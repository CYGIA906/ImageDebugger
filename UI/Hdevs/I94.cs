//
// File generated by HDevelop for HALCON/.NET (C#) Version 17.12
//

using HalconDotNet;

public partial class HDevelopExport
{
#if !(NO_EXPORT_MAIN || NO_EXPORT_APP_MAIN)
  public HDevelopExport()
  {
    // Default settings used in HDevelop 
  
  }
#endif

  // Procedures 
  // Chapter: Develop
  // Short Description: Changes the size of a graphics window with a given maximum and minimum extent such that it preserves the aspect ratio of the given image 
  public void dev_resize_window_fit_image (HObject ho_Image, HTuple hv_Row, HTuple hv_Column, 
      HTuple hv_WidthLimit, HTuple hv_HeightLimit)
  {




    // Local iconic variables 

    // Local control variables 

    HTuple hv_MinWidth = new HTuple(), hv_MaxWidth = new HTuple();
    HTuple hv_MinHeight = new HTuple(), hv_MaxHeight = new HTuple();
    HTuple hv_ResizeFactor = null, hv_Pointer = null, hv_Type = null;
    HTuple hv_ImageWidth = null, hv_ImageHeight = null, hv_TempWidth = null;
    HTuple hv_TempHeight = null, hv_WindowWidth = null, hv_WindowHeight = null;
    // Initialize local and output iconic variables 
    //This procedure adjusts the size of the current window
    //such that it fits into the limits specified by WidthLimit
    //and HeightLimit, but also maintains the correct image aspect ratio.
    //
    //If it is impossible to match the minimum and maximum extent requirements
    //at the same time (f.e. if the image is very long but narrow),
    //the maximum value gets a higher priority,
    //
    //Parse input tuple WidthLimit
    if ((int)((new HTuple((new HTuple(hv_WidthLimit.TupleLength())).TupleEqual(0))).TupleOr(
        new HTuple(hv_WidthLimit.TupleLess(0)))) != 0)
    {
      hv_MinWidth = 500;
      hv_MaxWidth = 800;
    }
    else if ((int)(new HTuple((new HTuple(hv_WidthLimit.TupleLength())).TupleEqual(
        1))) != 0)
    {
      hv_MinWidth = 0;
      hv_MaxWidth = hv_WidthLimit.Clone();
    }
    else
    {
      hv_MinWidth = hv_WidthLimit.TupleSelect(0);
      hv_MaxWidth = hv_WidthLimit.TupleSelect(1);
    }
    //Parse input tuple HeightLimit
    if ((int)((new HTuple((new HTuple(hv_HeightLimit.TupleLength())).TupleEqual(0))).TupleOr(
        new HTuple(hv_HeightLimit.TupleLess(0)))) != 0)
    {
      hv_MinHeight = 400;
      hv_MaxHeight = 600;
    }
    else if ((int)(new HTuple((new HTuple(hv_HeightLimit.TupleLength())).TupleEqual(
        1))) != 0)
    {
      hv_MinHeight = 0;
      hv_MaxHeight = hv_HeightLimit.Clone();
    }
    else
    {
      hv_MinHeight = hv_HeightLimit.TupleSelect(0);
      hv_MaxHeight = hv_HeightLimit.TupleSelect(1);
    }
    //
    //Test, if window size has to be changed.
    hv_ResizeFactor = 1;
    HOperatorSet.GetImagePointer1(ho_Image, out hv_Pointer, out hv_Type, out hv_ImageWidth, 
        out hv_ImageHeight);
    //First, expand window to the minimum extents (if necessary).
    if ((int)((new HTuple(hv_MinWidth.TupleGreater(hv_ImageWidth))).TupleOr(new HTuple(hv_MinHeight.TupleGreater(
        hv_ImageHeight)))) != 0)
    {
      hv_ResizeFactor = (((((hv_MinWidth.TupleReal())/hv_ImageWidth)).TupleConcat(
          (hv_MinHeight.TupleReal())/hv_ImageHeight))).TupleMax();
    }
    hv_TempWidth = hv_ImageWidth*hv_ResizeFactor;
    hv_TempHeight = hv_ImageHeight*hv_ResizeFactor;
    //Then, shrink window to maximum extents (if necessary).
    if ((int)((new HTuple(hv_MaxWidth.TupleLess(hv_TempWidth))).TupleOr(new HTuple(hv_MaxHeight.TupleLess(
        hv_TempHeight)))) != 0)
    {
      hv_ResizeFactor = hv_ResizeFactor*((((((hv_MaxWidth.TupleReal())/hv_TempWidth)).TupleConcat(
          (hv_MaxHeight.TupleReal())/hv_TempHeight))).TupleMin());
    }
    hv_WindowWidth = hv_ImageWidth*hv_ResizeFactor;
    hv_WindowHeight = hv_ImageHeight*hv_ResizeFactor;
    //Resize window
    if (HDevWindowStack.IsOpen())
    {
      HOperatorSet.SetWindowExtents(HDevWindowStack.GetActive(), hv_Row, hv_Column, 
          hv_WindowWidth, hv_WindowHeight);
    }
    if (HDevWindowStack.IsOpen())
    {
      HOperatorSet.SetPart(HDevWindowStack.GetActive(), 0, 0, hv_ImageHeight-1, hv_ImageWidth-1);
    }

    return;
  }

  // Local procedures 
  public void GenVisibleMeasureRect (out HObject ho_ROI_0, HTuple hv_rect1_row, HTuple hv_rect1_col, 
      HTuple hv_rect1_rad, HTuple hv_rect1_len1, HTuple hv_rect1_len2, HTuple hv_Width, 
      HTuple hv_Height, out HTuple hv_MeasureHandle)
  {


    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_ROI_0);
    ho_ROI_0.Dispose();
    HOperatorSet.GenRectangle2(out ho_ROI_0, hv_rect1_row, hv_rect1_col, hv_rect1_rad, 
        hv_rect1_len1, hv_rect1_len2);
    HOperatorSet.GenMeasureRectangle2(hv_rect1_row, hv_rect1_col, hv_rect1_rad, hv_rect1_len1, 
        hv_rect1_len2, hv_Width, hv_Height, "nearest_neighbor", out hv_MeasureHandle);

    return;
  }

  public void VisionProStyleFindLine (HObject ho_Image, out HObject ho_ROI_0, HTuple hv_transition, 
      HTuple hv_rect1_row, HTuple hv_rect1_col, HTuple hv_rect1_rad, HTuple hv_rect1_len1, 
      HTuple hv_rect1_len2, HTuple hv_numSubRects, HTuple hv_threshold, HTuple hv_sigma, 
      HTuple hv_firstOrLast, HTuple hv_usingPairs, HTuple hv_whichEdgePair, HTuple hv_minEdge, 
      HTuple hv_maxEdge, out HTuple hv_Xs, out HTuple hv_Ys)
  {




    // Local iconic variables 

    HObject ho_Rectangle=null;

    // Local control variables 

    HTuple hv_Width = null, hv_Height = null, hv_leftFaced = null;
    HTuple hv_rect1_deg = null, hv_widthSubRects = null, hv_heightSubRects = null;
    HTuple hv_betaDeg = new HTuple(), hv_rectStartX = new HTuple();
    HTuple hv_rectStartY = new HTuple(), hv_subRectXIncrement = new HTuple();
    HTuple hv_subRectYIncrement = new HTuple(), hv_firstSubRectCenterX = new HTuple();
    HTuple hv_firstSubRectCenterY = new HTuple(), hv_Index = null;
    HTuple hv_subRectCenterX = new HTuple(), hv_subRectCenterY = new HTuple();
    HTuple hv_subRectLen1 = new HTuple(), hv_subRectLen2 = new HTuple();
    HTuple hv_subRectPhi = new HTuple(), hv_MeasureHandle1 = new HTuple();
    HTuple hv_RowEdge1 = new HTuple(), hv_ColumnEdge1 = new HTuple();
    HTuple hv_Amplitude1 = new HTuple(), hv_Distance1 = new HTuple();
    HTuple hv_RowEdgeFirst = new HTuple(), hv_ColumnEdgeFirst = new HTuple();
    HTuple hv_AmplitudeFirst = new HTuple(), hv_RowEdgeSecond = new HTuple();
    HTuple hv_ColumnEdgeSecond = new HTuple(), hv_AmplitudeSecond = new HTuple();
    HTuple hv_IntraDistance = new HTuple(), hv_InterDistance = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_ROI_0);
    HOperatorSet.GenEmptyObj(out ho_Rectangle);
    try
    {

      hv_Xs = new HTuple();
      hv_Ys = new HTuple();


      HOperatorSet.GetImageSize(ho_Image, out hv_Width, out hv_Height);


      hv_leftFaced = (new HTuple(hv_rect1_rad.TupleLess((new HTuple(-90)).TupleRad()
          ))).TupleOr(new HTuple(hv_rect1_rad.TupleGreater((new HTuple(90)).TupleRad()
          )));
      hv_rect1_deg = hv_rect1_rad.TupleDeg();

      ho_ROI_0.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_0, hv_rect1_row, hv_rect1_col, hv_rect1_rad, 
          hv_rect1_len1, hv_rect1_len2);
      hv_widthSubRects = (hv_rect1_len2/hv_numSubRects)*2;
      hv_heightSubRects = hv_rect1_len1*2;

      if ((int)(hv_leftFaced) != 0)
      {
        hv_betaDeg = (-hv_rect1_deg)-90;
        hv_rectStartX = hv_rect1_col-(hv_rect1_len2*(((hv_betaDeg.TupleRad())).TupleCos()
            ));
        hv_rectStartY = hv_rect1_row-(hv_rect1_len2*(((hv_betaDeg.TupleRad())).TupleSin()
            ));
        hv_subRectXIncrement = hv_widthSubRects*(((hv_betaDeg.TupleRad())).TupleCos()
            );
        hv_subRectYIncrement = (((hv_widthSubRects*hv_widthSubRects)-(hv_subRectXIncrement*hv_subRectXIncrement))).TupleSqrt()
            ;
        hv_firstSubRectCenterX = hv_rectStartX+(hv_subRectXIncrement*0.5);
        hv_firstSubRectCenterY = hv_rectStartY+(hv_subRectYIncrement*0.5);
      }
      else
      {
        hv_betaDeg = 90+hv_rect1_deg;
        hv_rectStartX = hv_rect1_col+(hv_rect1_len2*(((hv_betaDeg.TupleRad())).TupleCos()
            ));
        hv_rectStartY = hv_rect1_row-(hv_rect1_len2*(((hv_betaDeg.TupleRad())).TupleSin()
            ));
        hv_subRectXIncrement = (-hv_widthSubRects)*(((hv_betaDeg.TupleRad())).TupleCos()
            );
        hv_subRectYIncrement = (((hv_widthSubRects*hv_widthSubRects)-(hv_subRectXIncrement*hv_subRectXIncrement))).TupleSqrt()
            ;
        hv_firstSubRectCenterX = hv_rectStartX+(hv_subRectXIncrement*0.5);
        hv_firstSubRectCenterY = hv_rectStartY+(hv_subRectYIncrement*0.5);
      }


      HTuple end_val34 = hv_numSubRects-1;
      HTuple step_val34 = 1;
      for (hv_Index=0; hv_Index.Continue(end_val34, step_val34); hv_Index = hv_Index.TupleAdd(step_val34))
      {

        if ((int)(hv_leftFaced) != 0)
        {
          hv_subRectCenterX = hv_firstSubRectCenterX+(hv_Index*hv_subRectXIncrement);
          hv_subRectCenterY = hv_firstSubRectCenterY+(hv_Index*hv_subRectYIncrement);
          hv_subRectLen1 = hv_rect1_len1.Clone();
          hv_subRectLen2 = hv_rect1_len2/hv_numSubRects;
          hv_subRectPhi = hv_rect1_rad.Clone();
        }
        else
        {
          hv_subRectCenterX = hv_firstSubRectCenterX+(hv_Index*hv_subRectXIncrement);
          hv_subRectCenterY = hv_firstSubRectCenterY+(hv_Index*hv_subRectYIncrement);
          hv_subRectLen1 = hv_rect1_len1.Clone();
          hv_subRectLen2 = hv_rect1_len2/hv_numSubRects;
          hv_subRectPhi = hv_rect1_rad.Clone();
        }

        ho_Rectangle.Dispose();
        HOperatorSet.GenRectangle2(out ho_Rectangle, hv_subRectCenterY, hv_subRectCenterX, 
            hv_subRectPhi, hv_subRectLen1, hv_subRectLen2);
        HOperatorSet.GenMeasureRectangle2(hv_subRectCenterY, hv_subRectCenterX, hv_subRectPhi, 
            hv_subRectLen1, hv_subRectLen2, hv_Width, hv_Height, "nearest_neighbor", 
            out hv_MeasureHandle1);

        if ((int)(new HTuple(hv_usingPairs.TupleEqual("false"))) != 0)
        {
          HOperatorSet.MeasurePos(ho_Image, hv_MeasureHandle1, hv_sigma, hv_threshold, 
              hv_transition, hv_firstOrLast, out hv_RowEdge1, out hv_ColumnEdge1, 
              out hv_Amplitude1, out hv_Distance1);
          hv_Xs = hv_Xs.TupleConcat(hv_ColumnEdge1);
          hv_Ys = hv_Ys.TupleConcat(hv_RowEdge1);
        }
        else
        {
          HOperatorSet.MeasurePairs(ho_Image, hv_MeasureHandle1, hv_sigma, hv_threshold, 
              hv_transition, hv_whichEdgePair, out hv_RowEdgeFirst, out hv_ColumnEdgeFirst, 
              out hv_AmplitudeFirst, out hv_RowEdgeSecond, out hv_ColumnEdgeSecond, 
              out hv_AmplitudeSecond, out hv_IntraDistance, out hv_InterDistance);
          //only count if edge with is within range
          if ((int)((new HTuple((new HTuple((new HTuple(hv_IntraDistance.TupleLength()
              )).TupleGreater(0))).TupleAnd(new HTuple(hv_IntraDistance.TupleGreater(
              hv_minEdge))))).TupleAnd(new HTuple(hv_IntraDistance.TupleLess(hv_maxEdge)))) != 0)
          {
            if ((int)(new HTuple(hv_firstOrLast.TupleEqual("first"))) != 0)
            {
              hv_Xs = hv_Xs.TupleConcat(hv_ColumnEdgeFirst);
              hv_Ys = hv_Ys.TupleConcat(hv_RowEdgeFirst);
            }
            else
            {
              hv_Xs = hv_Xs.TupleConcat(hv_ColumnEdgeSecond);
              hv_Ys = hv_Ys.TupleConcat(hv_RowEdgeSecond);
            }
          }

        }
        HOperatorSet.CloseMeasure(hv_MeasureHandle1);



      }


      ho_Rectangle.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Rectangle.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void FitLine2D (HTuple hv_Xs, HTuple hv_Ys, HTuple hv_ignorePortion, out HTuple hv_lineX1, 
      out HTuple hv_lineY1, out HTuple hv_lineX2, out HTuple hv_lineY2, out HTuple hv_XsUsed, 
      out HTuple hv_YsUsed, out HTuple hv_XsIgnored, out HTuple hv_YsIgnored)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_totalPoints = null, hv_numPointsLeft = null;
    HTuple hv_fiterrors = null, hv_i = null, hv_Distance = new HTuple();
    HTuple hv_Indices = null, hv_ErrorBest = null, hv_index = new HTuple();
    // Initialize local and output iconic variables 
    fit_line2D_rough(hv_Xs, hv_Ys, out hv_lineX1, out hv_lineY1, out hv_lineX2, out hv_lineY2);

    hv_totalPoints = new HTuple(hv_Xs.TupleLength());
    //number of points to ignore
    hv_numPointsLeft = (1.0-hv_ignorePortion)*(new HTuple(hv_Xs.TupleLength()));

    //calculate fitness of each point
    hv_fiterrors = new HTuple();
    for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_Xs.TupleLength()))-1); hv_i = (int)hv_i + 1)
    {
      HOperatorSet.DistancePl(hv_Ys.TupleSelect(hv_i), hv_Xs.TupleSelect(hv_i), hv_lineY1, 
          hv_lineX1, hv_lineY2, hv_lineX2, out hv_Distance);
      hv_fiterrors = hv_fiterrors.TupleConcat(hv_Distance);
    }

    HOperatorSet.TupleSortIndex(hv_fiterrors, out hv_Indices);

    //select the best fits
    hv_XsUsed = new HTuple();
    hv_YsUsed = new HTuple();
    hv_XsIgnored = new HTuple();
    hv_YsIgnored = new HTuple();
    hv_ErrorBest = new HTuple();
    HTuple end_val21 = hv_totalPoints-1;
    HTuple step_val21 = 1;
    for (hv_i=0; hv_i.Continue(end_val21, step_val21); hv_i = hv_i.TupleAdd(step_val21))
    {
      hv_index = hv_Indices.TupleSelect(hv_i);
      if ((int)(new HTuple(hv_i.TupleLess(hv_numPointsLeft))) != 0)
      {
        hv_XsUsed = hv_XsUsed.TupleConcat(hv_Xs.TupleSelect(hv_index));
        hv_YsUsed = hv_YsUsed.TupleConcat(hv_Ys.TupleSelect(hv_index));
        hv_ErrorBest = hv_ErrorBest.TupleConcat(hv_fiterrors.TupleSelect(hv_index));
      }
      else
      {
        hv_XsIgnored = hv_XsIgnored.TupleConcat(hv_Xs.TupleSelect(hv_index));
        hv_YsIgnored = hv_YsIgnored.TupleConcat(hv_Ys.TupleSelect(hv_index));
      }
    }

    //fit line again
    fit_line2D_rough(hv_XsUsed, hv_YsUsed, out hv_lineX1, out hv_lineY1, out hv_lineX2, 
        out hv_lineY2);



    return;
  }

  public void move_point_along_line (HTuple hv_lineStartX, HTuple hv_lineStartY, 
      HTuple hv_lineDirectionX, HTuple hv_lineDirectionY, HTuple hv_distance, out HTuple hv_lineMovedX, 
      out HTuple hv_lineMovedY)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xDiff = null, hv_yDiff = null, hv_totalDiff = null;
    HTuple hv_xDirection = null, hv_yDirection = null;
    // Initialize local and output iconic variables 
    hv_xDiff = hv_lineDirectionX-hv_lineStartX;
    hv_yDiff = hv_lineDirectionY-hv_lineStartY;
    hv_totalDiff = (((hv_yDiff*hv_yDiff)+(hv_xDiff*hv_xDiff))).TupleSqrt();
    hv_xDirection = hv_xDiff/hv_totalDiff;
    hv_yDirection = hv_yDiff/hv_totalDiff;
    hv_lineMovedX = hv_lineStartX+(hv_xDirection*hv_distance);
    hv_lineMovedY = hv_lineStartY+(hv_yDirection*hv_distance);

    return;
  }

  public void get_perpendicular_line_that_passes (HTuple hv_lineXStart, HTuple hv_lineYStart, 
      HTuple hv_lineXEnd, HTuple hv_lineYEnd, HTuple hv_xPass, HTuple hv_yPass, out HTuple hv_lineXPerpendicular, 
      out HTuple hv_lineYPerpendicular)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xUnit = null, hv_yUnit = null, hv_outputVectorX = null;
    HTuple hv_outputVectorY = null;
    // Initialize local and output iconic variables 
    get_direction_unit(hv_lineXStart, hv_lineYStart, hv_lineXEnd, hv_lineYEnd, out hv_xUnit, 
        out hv_yUnit);
    get_perpendicular_direction(hv_xUnit, hv_yUnit, out hv_outputVectorX, out hv_outputVectorY);

    //another point on the perpendicular line can be determined by
    //adding perpendicular unit vector to the first point that we passed
    hv_lineXPerpendicular = hv_xPass+hv_outputVectorX;
    hv_lineYPerpendicular = hv_yPass+hv_outputVectorY;


    return;
  }

  public void get_direction_unit (HTuple hv_xStart, HTuple hv_yStart, HTuple hv_xEnd, 
      HTuple hv_yEnd, out HTuple hv_xUnit, out HTuple hv_yUnit)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xDiff = null, hv_yDiff = null, hv_totalDiff = null;
    // Initialize local and output iconic variables 
    hv_xDiff = hv_xEnd-hv_xStart;
    hv_yDiff = hv_yEnd-hv_yStart;

    hv_totalDiff = (((hv_yDiff*hv_yDiff)+(hv_xDiff*hv_xDiff))).TupleSqrt();

    hv_xUnit = hv_xDiff/hv_totalDiff;
    hv_yUnit = hv_yDiff/hv_totalDiff;


    return;
  }

  public void get_perpendicular_direction (HTuple hv_inputVectorX, HTuple hv_inputVectorY, 
      out HTuple hv_outputVectorX, out HTuple hv_outputVectorY)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xAssume = null, hv_yAssume = null;
    HTuple hv_distAssume = null;
    // Initialize local and output iconic variables 
    //Should be deprecated

    //assume that a perticular vector perpendiclar to me is (xAssume, yAssume), let xAssume = 1
    hv_xAssume = 1;
    hv_yAssume = -(hv_inputVectorX/hv_inputVectorY);
    hv_distAssume = (((hv_yAssume*hv_yAssume)+(hv_xAssume*hv_xAssume))).TupleSqrt()
        ;

    //calculate unit length direction vector
    hv_outputVectorX = hv_xAssume/hv_distAssume;
    hv_outputVectorY = hv_yAssume/hv_distAssume;


    return;
  }

  public void fit_line2D_rough (HTuple hv_Xs, HTuple hv_Ys, out HTuple hv_lineX1, 
      out HTuple hv_lineY1, out HTuple hv_lineX2, out HTuple hv_lineY2)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_SumX = null, hv_AverageX = null;
    HTuple hv_SumY = null, hv_AverageY = null, hv_SumUpper = null;
    HTuple hv_SumLower = null, hv_i = null, hv_incrementUpper = new HTuple();
    HTuple hv_incrementLower = new HTuple(), hv_m = null, hv_b = null;
    // Initialize local and output iconic variables 
    if ((int)(new HTuple((new HTuple(hv_Xs.TupleLength())).TupleEqual(0))) != 0)
    {
      throw new HalconException("No points being passed in");
    }
    HOperatorSet.TupleSum(hv_Xs, out hv_SumX);
    hv_AverageX = hv_SumX/(new HTuple(hv_Xs.TupleLength()));

    HOperatorSet.TupleSum(hv_Ys, out hv_SumY);
    hv_AverageY = hv_SumY/(new HTuple(hv_Ys.TupleLength()));

    hv_SumUpper = 0;
    hv_SumLower = 0;
    for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_Xs.TupleLength()))-1); hv_i = (int)hv_i + 1)
    {
      hv_incrementUpper = ((hv_Xs.TupleSelect(hv_i))-hv_AverageX)*((hv_Ys.TupleSelect(
          hv_i))-hv_AverageY);
      hv_incrementLower = (hv_AverageX-(hv_Xs.TupleSelect(hv_i)))*(hv_AverageX-(hv_Xs.TupleSelect(
          hv_i)));
      hv_SumUpper = hv_SumUpper+hv_incrementUpper;
      hv_SumLower = hv_SumLower+hv_incrementLower;
    }

    hv_m = hv_SumUpper/hv_SumLower;
    hv_b = hv_AverageY-(hv_m*hv_AverageX);



    //sample two point
    HOperatorSet.TupleMax(hv_Xs, out hv_lineX1);
    HOperatorSet.TupleMin(hv_Xs, out hv_lineX2);

    hv_lineY1 = (hv_m*hv_lineX1)+hv_b;
    hv_lineY2 = (hv_m*hv_lineX2)+hv_b;

    return;
  }

  public void VisionProStyleFindLineOneStep (HObject ho_inputImage, out HObject ho_findLineRegion, 
      out HObject ho_lineRegion, HTuple hv_transition, HTuple hv_row, HTuple hv_col, 
      HTuple hv_radian, HTuple hv_len1, HTuple hv_len2, HTuple hv_numSubRects, HTuple hv_threshold, 
      HTuple hv_firstOrLast, HTuple hv_ignoreFraction, HTuple hv_isVertical, HTuple hv_sigma1, 
      HTuple hv_sigma2, HTuple hv_imageWidth, HTuple hv_imageHeight, HTuple hv_newWidth, 
      HTuple hv_cannyHigh, HTuple hv_cannyLow, out HTuple hv_lineX1, out HTuple hv_lineY1, 
      out HTuple hv_lineX2, out HTuple hv_lineY2, out HTuple hv_XsUsed, out HTuple hv_YsUsed, 
      out HTuple hv_XsIgnored, out HTuple hv_YsIgnored)
  {




    // Stack for temporary objects 
    HObject[] OTemp = new HObject[20];

    // Local iconic variables 

    HObject ho_findLineRegions, ho_lineRegions;

    // Local control variables 

    HTuple hv_MultipleLines = null, hv_EdgesX = null;
    HTuple hv_EdgesY = null, hv_AllXsUsed = null, hv_AllYsUsed = null;
    HTuple hv_AllXsIgnored = null, hv_AllYsIgnored = null;
    HTuple hv_i = null, hv_Xs = new HTuple(), hv_Ys = new HTuple();
    HTuple hv_RowBegin = new HTuple(), hv_ColBegin = new HTuple();
    HTuple hv_RowEnd = new HTuple(), hv_ColEnd = new HTuple();
    HTuple hv_EdgesXStep = new HTuple(), hv_EdgesYStep = new HTuple();
    HTuple hv_ExpDefaultCtrlDummyVar = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_findLineRegion);
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    HOperatorSet.GenEmptyObj(out ho_findLineRegions);
    HOperatorSet.GenEmptyObj(out ho_lineRegions);
    hv_lineX1 = new HTuple();
    hv_lineY1 = new HTuple();
    hv_lineX2 = new HTuple();
    hv_lineY2 = new HTuple();
    hv_XsUsed = new HTuple();
    hv_YsUsed = new HTuple();
    hv_XsIgnored = new HTuple();
    hv_YsIgnored = new HTuple();
    try
    {

      hv_MultipleLines = "false";
      if ((int)(new HTuple((new HTuple(hv_row.TupleLength())).TupleGreater(1))) != 0)
      {
        hv_MultipleLines = "true";
      }

      hv_EdgesX = new HTuple();
      hv_EdgesY = new HTuple();
      hv_AllXsUsed = new HTuple();
      hv_AllYsUsed = new HTuple();
      hv_AllXsIgnored = new HTuple();
      hv_AllYsIgnored = new HTuple();

      ho_findLineRegions.Dispose();
      HOperatorSet.GenEmptyObj(out ho_findLineRegions);
      ho_lineRegions.Dispose();
      HOperatorSet.GenEmptyObj(out ho_lineRegions);

      for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_row.TupleLength()))-1); hv_i = (int)hv_i + 1)
      {
        ho_findLineRegion.Dispose();
        VisionProStyleFindLine(ho_inputImage, out ho_findLineRegion, hv_transition, 
            hv_row.TupleSelect(hv_i), hv_col.TupleSelect(hv_i), hv_radian.TupleSelect(
            hv_i), hv_len1.TupleSelect(hv_i), hv_len2.TupleSelect(hv_i), hv_numSubRects, 
            hv_threshold.TupleSelect(hv_i), hv_sigma1, hv_firstOrLast, "false", "first", 
            0, 100, out hv_Xs, out hv_Ys);

        if ((int)(new HTuple(hv_isVertical.TupleEqual("true"))) != 0)
        {
          FitLine2D(hv_Ys, hv_Xs, hv_ignoreFraction, out hv_lineY1, out hv_lineX1, 
              out hv_lineY2, out hv_lineX2, out hv_YsUsed, out hv_XsUsed, out hv_YsIgnored, 
              out hv_XsIgnored);
        }
        else
        {
          FitLine2D(hv_Xs, hv_Ys, hv_ignoreFraction, out hv_lineX1, out hv_lineY1, 
              out hv_lineX2, out hv_lineY2, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
              out hv_YsIgnored);
        }

        ho_findLineRegion.Dispose();
        _genSubRect2(out ho_findLineRegion, hv_row.TupleSelect(hv_i), hv_col.TupleSelect(
            hv_i), hv_radian.TupleSelect(hv_i), hv_len1.TupleSelect(hv_i), hv_len2.TupleSelect(
            hv_i), hv_lineX1, hv_lineY1, hv_lineX2, hv_lineY2, hv_newWidth);
        {
        HObject ExpTmpOutVar_0;
        _pinPointFindLine(ho_inputImage, ho_findLineRegion, out ExpTmpOutVar_0, hv_lineX1, 
            hv_lineX2, hv_lineY1, hv_lineY2, hv_radian, hv_newWidth, hv_MultipleLines, 
            hv_cannyHigh, hv_cannyLow, hv_sigma2, out hv_RowBegin, out hv_ColBegin, 
            out hv_RowEnd, out hv_ColEnd, out hv_EdgesXStep, out hv_EdgesYStep);
        ho_findLineRegion.Dispose();
        ho_findLineRegion = ExpTmpOutVar_0;
        }

        if ((int)(new HTuple(hv_MultipleLines.TupleEqual("true"))) != 0)
        {
          hv_EdgesX = hv_EdgesX.TupleConcat(hv_EdgesXStep);
          hv_EdgesY = hv_EdgesY.TupleConcat(hv_EdgesYStep);
          {
          HObject ExpTmpOutVar_0;
          HOperatorSet.ConcatObj(ho_findLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
              );
          ho_findLineRegions.Dispose();
          ho_findLineRegions = ExpTmpOutVar_0;
          }
          hv_AllXsUsed = hv_AllXsUsed.TupleConcat(hv_XsUsed);
          hv_AllYsUsed = hv_AllYsUsed.TupleConcat(hv_YsUsed);
          hv_AllXsIgnored = hv_AllXsIgnored.TupleConcat(hv_XsIgnored);
          hv_AllYsIgnored = hv_AllYsIgnored.TupleConcat(hv_YsIgnored);
        }

      }

      if ((int)(new HTuple(hv_MultipleLines.TupleEqual("true"))) != 0)
      {
        FitLine2D(hv_EdgesX, hv_EdgesY, hv_ignoreFraction, out hv_ColBegin, out hv_RowBegin, 
            out hv_ColEnd, out hv_RowEnd, out hv_ExpDefaultCtrlDummyVar, out hv_ExpDefaultCtrlDummyVar, 
            out hv_ExpDefaultCtrlDummyVar, out hv_ExpDefaultCtrlDummyVar);
        ho_findLineRegion.Dispose();
        ho_findLineRegion = ho_findLineRegions.CopyObj(1,-1);
        hv_XsUsed = hv_AllXsUsed.Clone();
        hv_YsUsed = hv_AllYsUsed.Clone();
        hv_XsIgnored = hv_AllXsIgnored.Clone();
        hv_YsIgnored = hv_AllYsIgnored.Clone();
      }


      ho_lineRegion.Dispose();
      GenLineRegion(out ho_lineRegion, hv_ColBegin, hv_RowBegin, hv_ColEnd, hv_RowEnd, 
          hv_imageWidth, hv_imageHeight);
      hv_lineX1 = hv_ColBegin.Clone();
      hv_lineY1 = hv_RowBegin.Clone();
      hv_lineX2 = hv_ColEnd.Clone();
      hv_lineY2 = hv_RowEnd.Clone();
      ho_findLineRegions.Dispose();
      ho_lineRegions.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_findLineRegions.Dispose();
      ho_lineRegions.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void TranslateLineInWorldCoordinateAndConvertBack (HTuple hv_lineStartX, 
      HTuple hv_lineStartY, HTuple hv_lineEndX, HTuple hv_lineEndY, HTuple hv_distance, 
      HTuple hv_mapToWorld, HTuple hv_mapToImage, HTuple hv_isVertical, out HTuple hv_outLineStartX, 
      out HTuple hv_outLineStartY, out HTuple hv_outLineEndX, out HTuple hv_outLineEndY)
  {



    // Local control variables 

    HTuple hv_X1World = null, hv_Y1World = null;
    HTuple hv_X2World = null, hv_Y2World = null, hv_X1WorldTranslated = null;
    HTuple hv_Y1WorldTranslated = null, hv_X2WorldTranslated = null;
    HTuple hv_Y2WorldTranslated = null;
    HTuple   hv_lineEndX_COPY_INP_TMP = hv_lineEndX.Clone();
    HTuple   hv_lineEndY_COPY_INP_TMP = hv_lineEndY.Clone();
    HTuple   hv_lineStartX_COPY_INP_TMP = hv_lineStartX.Clone();
    HTuple   hv_lineStartY_COPY_INP_TMP = hv_lineStartY.Clone();

    // Initialize local and output iconic variables 
    if ((int)(new HTuple(hv_isVertical.TupleEqual("true"))) != 0)
    {
      SortLineUpDown(hv_lineStartX_COPY_INP_TMP, hv_lineStartY_COPY_INP_TMP, hv_lineEndX_COPY_INP_TMP, 
          hv_lineEndY_COPY_INP_TMP, out hv_lineStartX_COPY_INP_TMP, out hv_lineStartY_COPY_INP_TMP, 
          out hv_lineEndX_COPY_INP_TMP, out hv_lineEndY_COPY_INP_TMP);
    }
    else if ((int)(new HTuple(hv_isVertical.TupleEqual("false"))) != 0)
    {
      SortLineLeftRight(hv_lineStartX_COPY_INP_TMP, hv_lineStartY_COPY_INP_TMP, hv_lineEndX_COPY_INP_TMP, 
          hv_lineEndY_COPY_INP_TMP, out hv_lineStartX_COPY_INP_TMP, out hv_lineStartY_COPY_INP_TMP, 
          out hv_lineEndX_COPY_INP_TMP, out hv_lineEndY_COPY_INP_TMP);
    }
    else
    {
      throw new HalconException("Unknow param <isVertical>");
    }

    HOperatorSet.AffineTransPoint2d(hv_mapToWorld, hv_lineStartX_COPY_INP_TMP, hv_lineStartY_COPY_INP_TMP, 
        out hv_X1World, out hv_Y1World);
    HOperatorSet.AffineTransPoint2d(hv_mapToWorld, hv_lineEndX_COPY_INP_TMP, hv_lineEndY_COPY_INP_TMP, 
        out hv_X2World, out hv_Y2World);

    GetParallelLine(hv_X1World, hv_Y1World, hv_X2World, hv_Y2World, hv_distance, 
        out hv_X1WorldTranslated, out hv_Y1WorldTranslated, out hv_X2WorldTranslated, 
        out hv_Y2WorldTranslated);

    HOperatorSet.AffineTransPoint2d(hv_mapToImage, hv_X1WorldTranslated, hv_Y1WorldTranslated, 
        out hv_outLineStartX, out hv_outLineStartY);
    HOperatorSet.AffineTransPoint2d(hv_mapToImage, hv_X2WorldTranslated, hv_Y2WorldTranslated, 
        out hv_outLineEndX, out hv_outLineEndY);


    return;
  }

  public void DistancePLInWorld (HTuple hv_lineStartX, HTuple hv_lineStartY, HTuple hv_lineEndX, 
      HTuple hv_lineEndY, HTuple hv_ptX, HTuple hv_ptY, HTuple hv_mapToWorld, out HTuple hv_distanceWorld, 
      out HTuple hv_distancePixel)
  {



    // Local control variables 

    HTuple hv_ptXWorld = null, hv_ptYWorld = null;
    HTuple hv_X1World = null, hv_Y1World = null, hv_X2World = null;
    HTuple hv_Y2World = null;
    // Initialize local and output iconic variables 


    HOperatorSet.DistancePl(hv_ptY, hv_ptX, hv_lineStartY, hv_lineStartX, hv_lineEndY, 
        hv_lineEndX, out hv_distancePixel);



    HOperatorSet.AffineTransPoint2d(hv_mapToWorld, hv_ptX, hv_ptY, out hv_ptXWorld, 
        out hv_ptYWorld);
    HOperatorSet.AffineTransPoint2d(hv_mapToWorld, hv_lineStartX, hv_lineStartY, 
        out hv_X1World, out hv_Y1World);
    HOperatorSet.AffineTransPoint2d(hv_mapToWorld, hv_lineEndX, hv_lineEndY, out hv_X2World, 
        out hv_Y2World);


    HOperatorSet.DistancePl(hv_ptYWorld, hv_ptXWorld, hv_Y1World, hv_X1World, hv_Y2World, 
        hv_X2World, out hv_distanceWorld);

    return;
  }

  public void VisionProStyleFindLineOneStep_Pairs (HObject ho_inputImage, out HObject ho_findLineRegion, 
      out HObject ho_lineRegion, HTuple hv_row, HTuple hv_col, HTuple hv_radian, HTuple hv_len1, 
      HTuple hv_len2, HTuple hv_transition, HTuple hv_numSubRects, HTuple hv_threshold, 
      HTuple hv_sigma1, HTuple hv_sigma2, HTuple hv_firstOrLast, HTuple hv_isVertical, 
      HTuple hv_ignoreFraction, HTuple hv_whichEdgePair, HTuple hv_minEdge, HTuple hv_maxEdge, 
      HTuple hv_imageWidth, HTuple hv_imageHeight, HTuple hv_cannyHigh, HTuple hv_cannyLow, 
      HTuple hv_useXLD, HTuple hv_newWidth, out HTuple hv_XsUsed, out HTuple hv_YsUsed, 
      out HTuple hv_XsIgnored, out HTuple hv_YsIgnored, out HTuple hv_lineX1, out HTuple hv_lineY1, 
      out HTuple hv_lineX2, out HTuple hv_lineY2)
  {




    // Stack for temporary objects 
    HObject[] OTemp = new HObject[20];

    // Local iconic variables 

    HObject ho_findLineRegions, ho_lineRegions;

    // Local control variables 

    HTuple hv_MultipleLines = null, hv_EdgesX = null;
    HTuple hv_EdgesY = null, hv_AllXsUsed = null, hv_AllYsUsed = null;
    HTuple hv_AllXsIgnored = null, hv_AllYsIgnored = null;
    HTuple hv_i = null, hv_RowBegin = new HTuple(), hv_ColBegin = new HTuple();
    HTuple hv_RowEnd = new HTuple(), hv_ColEnd = new HTuple();
    HTuple hv_EdgesXStep = new HTuple(), hv_EdgesYStep = new HTuple();
    HTuple hv_ExpDefaultCtrlDummyVar = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_findLineRegion);
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    HOperatorSet.GenEmptyObj(out ho_findLineRegions);
    HOperatorSet.GenEmptyObj(out ho_lineRegions);
    hv_XsUsed = new HTuple();
    hv_YsUsed = new HTuple();
    hv_XsIgnored = new HTuple();
    hv_YsIgnored = new HTuple();
    hv_lineX1 = new HTuple();
    hv_lineY1 = new HTuple();
    hv_lineX2 = new HTuple();
    hv_lineY2 = new HTuple();
    try
    {

      hv_MultipleLines = "false";
      if ((int)(new HTuple((new HTuple(hv_row.TupleLength())).TupleGreater(1))) != 0)
      {
        hv_MultipleLines = "true";
      }

      hv_EdgesX = new HTuple();
      hv_EdgesY = new HTuple();
      hv_AllXsUsed = new HTuple();
      hv_AllYsUsed = new HTuple();
      hv_AllXsIgnored = new HTuple();
      hv_AllYsIgnored = new HTuple();

      ho_findLineRegions.Dispose();
      HOperatorSet.GenEmptyObj(out ho_findLineRegions);
      ho_lineRegions.Dispose();
      HOperatorSet.GenEmptyObj(out ho_lineRegions);

      for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_row.TupleLength()))-1); hv_i = (int)hv_i + 1)
      {
        ho_findLineRegion.Dispose();
        VisionProStyleFindLine(ho_inputImage, out ho_findLineRegion, hv_transition, 
            hv_row.TupleSelect(hv_i), hv_col.TupleSelect(hv_i), hv_radian.TupleSelect(
            hv_i), hv_len1.TupleSelect(hv_i), hv_len2.TupleSelect(hv_i), hv_numSubRects, 
            hv_threshold.TupleSelect(hv_i), hv_sigma1, hv_firstOrLast, "true", hv_whichEdgePair, 
            hv_minEdge, hv_maxEdge, out hv_XsUsed, out hv_YsUsed);

        if ((int)(new HTuple(hv_isVertical.TupleEqual("true"))) != 0)
        {
          FitLine2D(hv_XsUsed, hv_YsUsed, hv_ignoreFraction, out hv_lineY1, out hv_lineX1, 
              out hv_lineY2, out hv_lineX2, out hv_YsUsed, out hv_XsUsed, out hv_YsIgnored, 
              out hv_XsIgnored);
        }
        else
        {
          FitLine2D(hv_XsUsed, hv_YsUsed, hv_ignoreFraction, out hv_lineX1, out hv_lineY1, 
              out hv_lineX2, out hv_lineY2, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
              out hv_YsIgnored);
        }

        ho_findLineRegion.Dispose();
        _genSubRect2(out ho_findLineRegion, hv_row.TupleSelect(hv_i), hv_col.TupleSelect(
            hv_i), hv_radian.TupleSelect(hv_i), hv_len1.TupleSelect(hv_i), hv_len2.TupleSelect(
            hv_i), hv_lineX1, hv_lineY1, hv_lineX2, hv_lineY2, hv_newWidth);

        {
        HObject ExpTmpOutVar_0;
        _pinPointFindLine(ho_inputImage, ho_findLineRegion, out ExpTmpOutVar_0, hv_lineX1, 
            hv_lineX2, hv_lineY1, hv_lineY2, hv_radian, 5, hv_MultipleLines, hv_cannyHigh, 
            hv_cannyLow, hv_sigma2, out hv_RowBegin, out hv_ColBegin, out hv_RowEnd, 
            out hv_ColEnd, out hv_EdgesXStep, out hv_EdgesYStep);
        ho_findLineRegion.Dispose();
        ho_findLineRegion = ExpTmpOutVar_0;
        }

        if ((int)(new HTuple(hv_MultipleLines.TupleEqual("true"))) != 0)
        {
          hv_EdgesX = hv_EdgesX.TupleConcat(hv_EdgesXStep);
          hv_EdgesY = hv_EdgesY.TupleConcat(hv_EdgesYStep);
          {
          HObject ExpTmpOutVar_0;
          HOperatorSet.ConcatObj(ho_findLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
              );
          ho_findLineRegions.Dispose();
          ho_findLineRegions = ExpTmpOutVar_0;
          }
          hv_AllXsUsed = hv_AllXsUsed.TupleConcat(hv_XsUsed);
          hv_AllYsUsed = hv_AllYsUsed.TupleConcat(hv_YsUsed);
          hv_AllXsIgnored = hv_AllXsIgnored.TupleConcat(hv_XsIgnored);
          hv_AllYsIgnored = hv_AllYsIgnored.TupleConcat(hv_YsIgnored);
        }

      }

      if ((int)(new HTuple(hv_MultipleLines.TupleEqual("true"))) != 0)
      {
        if ((int)(new HTuple(hv_useXLD.TupleEqual("false"))) != 0)
        {
          hv_EdgesX = hv_XsUsed.Clone();
          hv_EdgesY = hv_YsUsed.Clone();
        }
        FitLine2D(hv_EdgesX, hv_EdgesY, 0, out hv_ColBegin, out hv_RowBegin, out hv_ColEnd, 
            out hv_RowEnd, out hv_ExpDefaultCtrlDummyVar, out hv_ExpDefaultCtrlDummyVar, 
            out hv_ExpDefaultCtrlDummyVar, out hv_ExpDefaultCtrlDummyVar);
        ho_findLineRegion.Dispose();
        ho_findLineRegion = ho_findLineRegions.CopyObj(1,-1);
        hv_XsUsed = hv_AllXsUsed.Clone();
        hv_YsUsed = hv_AllYsUsed.Clone();
        hv_XsIgnored = hv_AllXsIgnored.Clone();
        hv_YsIgnored = hv_AllYsIgnored.Clone();
      }


      ho_lineRegion.Dispose();
      GenLineRegion(out ho_lineRegion, hv_ColBegin, hv_RowBegin, hv_ColEnd, hv_RowEnd, 
          hv_imageWidth, hv_imageHeight);
      hv_lineX1 = hv_ColBegin.Clone();
      hv_lineY1 = hv_RowBegin.Clone();
      hv_lineX2 = hv_ColEnd.Clone();
      hv_lineY2 = hv_RowEnd.Clone();
      ho_findLineRegions.Dispose();
      ho_lineRegions.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_findLineRegions.Dispose();
      ho_lineRegions.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void _affineTransRect2Single (HTuple hv_row, HTuple hv_col, HTuple hv_radian, 
      HTuple hv_len1, HTuple hv_len2, HTuple hv_map, out HTuple hv_rowOut, out HTuple hv_colOut, 
      out HTuple hv_radianOut, out HTuple hv_len1Out, out HTuple hv_len2Out)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_topCenterCol = null, hv_topCenterRow = null;
    HTuple hv_topCenterRowTrans = null, hv_topCenterColTrans = null;
    HTuple hv_vecCol = null, hv_vecRow = null, hv_epslon = null;
    // Initialize local and output iconic variables 
    hv_radianOut = new HTuple();

    HOperatorSet.AffineTransPoint2d(hv_map, hv_row, hv_col, out hv_rowOut, out hv_colOut);
    hv_len1Out = hv_len1.Clone();
    hv_len2Out = hv_len2.Clone();

    hv_topCenterCol = hv_col+((hv_radian.TupleCos())*hv_len1);
    hv_topCenterRow = hv_row-((hv_radian.TupleSin())*hv_len2);

    HOperatorSet.AffineTransPoint2d(hv_map, hv_topCenterRow, hv_topCenterCol, out hv_topCenterRowTrans, 
        out hv_topCenterColTrans);



    hv_vecCol = hv_topCenterColTrans-hv_colOut;
    hv_vecRow = hv_topCenterRowTrans-hv_rowOut;
    hv_epslon = 0.0000000001;
    if ((int)(new HTuple(((hv_vecRow.TupleAbs())).TupleLess(hv_epslon))) != 0)
    {
      hv_vecRow = hv_epslon.Clone();
    }

    if ((int)((new HTuple(hv_vecCol.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_vecRow.TupleGreaterEqual(
        0)))) != 0)
    {
      //右下
      hv_radianOut = -(((hv_vecRow/hv_vecCol)).TupleAtan());
    }
    else if ((int)((new HTuple(hv_vecCol.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_vecRow.TupleLess(
        0)))) != 0)
    {
      //右上
      hv_radianOut = -(((hv_vecRow/hv_vecCol)).TupleAtan());
    }
    else if ((int)((new HTuple(hv_vecCol.TupleLess(0))).TupleAnd(new HTuple(hv_vecRow.TupleGreaterEqual(
        0)))) != 0)
    {
      //左下
      hv_radianOut = ((new HTuple(-180)).TupleRad())-(((hv_vecRow/hv_vecCol)).TupleAtan()
          );
    }
    else
    {
      //左上
      hv_radianOut = ((new HTuple(180)).TupleRad())-(((hv_vecRow/hv_vecCol)).TupleAtan()
          );
    }




    return;
  }

  public void GenLineRegion (out HObject ho_lineRegion, HTuple hv_lineXStart, HTuple hv_lineYStart, 
      HTuple hv_lineXEnd, HTuple hv_lineYEnd, HTuple hv_imageWidth, HTuple hv_imageHeight)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xDiff = null, hv_yDiff = null, hv_epslon = null;
    HTuple hv_m = null, hv_b = null, hv_result = null, hv_xStart = null;
    HTuple hv_yStart = null, hv_allBoundaries = null, hv_Index = null;
    HTuple hv_boundariesLeft = new HTuple(), hv_xEnd = null;
    HTuple hv_yEnd = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    if ((int)(new HTuple((new HTuple(hv_lineXStart.TupleLength())).TupleEqual(0))) != 0)
    {
      throw new HalconException("No points passed in");
    }
    hv_xDiff = hv_lineXEnd-hv_lineXStart;
    hv_yDiff = hv_lineYEnd-hv_lineYStart;

    hv_epslon = 0.0000000001;
    if ((int)(new HTuple(((hv_xDiff.TupleAbs())).TupleLess(hv_epslon))) != 0)
    {
      hv_xDiff = hv_epslon.Clone();
    }

    hv_m = hv_yDiff/hv_xDiff;
    hv_b = hv_lineYStart-(hv_m*hv_lineXStart);

    _search_boundary("null", hv_m, hv_b, hv_imageWidth, hv_imageHeight, out hv_result, 
        out hv_xStart, out hv_yStart);
    hv_allBoundaries = new HTuple();
    hv_allBoundaries[0] = "left";
    hv_allBoundaries[1] = "right";
    hv_allBoundaries[2] = "up";
    hv_allBoundaries[3] = "down";
    for (hv_Index=0; (int)hv_Index<=(int)((new HTuple(hv_allBoundaries.TupleLength()
        ))-1); hv_Index = (int)hv_Index + 1)
    {
      if ((int)(new HTuple(((hv_allBoundaries.TupleSelect(hv_Index))).TupleEqual(
          hv_result))) != 0)
      {
        HOperatorSet.TupleRemove(hv_allBoundaries, hv_Index, out hv_boundariesLeft);
      }
    }
    _search_boundary(hv_boundariesLeft, hv_m, hv_b, hv_imageWidth, hv_imageHeight, 
        out hv_result, out hv_xEnd, out hv_yEnd);

    ho_lineRegion.Dispose();
    HOperatorSet.GenContourPolygonXld(out ho_lineRegion, hv_yStart.TupleConcat(hv_yEnd), 
        hv_xStart.TupleConcat(hv_xEnd));

    return;
  }

  public void I94TopFaceMeasurement (HObject ho_Image, out HObject ho_ImageUndistorted, 
      out HObject ho_lineRegions, out HObject ho_FindLineRects, HTuple hv_ModelID, 
      HTuple hv_xCoeff, HTuple hv_yCoeff, HTuple hv_thresholds, out HTuple hv_outputs, 
      out HTuple hv_crossesXused, out HTuple hv_crossesYused, out HTuple hv_crossesXIgnored, 
      out HTuple hv_crossesYIgnored, out HTuple hv_intersectXs, out HTuple hv_intersectYs, 
      out HTuple hv_outputsPixel)
  {




    // Stack for temporary objects 
    HObject[] OTemp = new HObject[20];

    // Local iconic variables 

    HObject ho_ROI_0, ho_ImageReduced, ho_Border;
    HObject ho_Rectangle8, ho_ImageReduced1, ho_Rectangle1;
    HObject ho_rect, ho_lineRegion, ho_rectFAI2, ho_Rectangle7;
    HObject ho_rectFAI3, ho_Rectangle6, ho_rectFAI4, ho_Rectangle2;
    HObject ho_Rectangle, ho_lineRegion1, ho_Cross, ho_Rectangle3;
    HObject ho_Rectangle4, ho_Rectangle5;

    // Local copy input parameter variables 
    HObject ho_Image_COPY_INP_TMP;
    ho_Image_COPY_INP_TMP = ho_Image.CopyObj(1,-1);



    // Local control variables 

    HTuple hv_CameraParameters = null, hv_CameraPose = null;
    HTuple hv_OutCameraParams = null, hv_MapToWorld = null;
    HTuple hv_MapToImage = null, hv_Width = null, hv_Height = null;
    HTuple hv_crossSize = null, hv_numSubRects = null, hv_ignorePortion = null;
    HTuple hv_sigma2 = null, hv_ModelThreshold = null, hv_TopThreshold = null;
    HTuple hv_RightThreshold = null, hv_FAI2Threshold = null;
    HTuple hv_FAI3Threshold = null, hv_FAI4Threshold = null;
    HTuple hv_FAI5Threshold = null, hv_FAI6Threshold = null;
    HTuple hv_FAI9Threshold = null, hv_FAI12Threshold = null;
    HTuple hv_FAI16Threshold = null, hv_FAI17Threshold = null;
    HTuple hv_FAI19Threshold = null, hv_FAI20Threshold_up = null;
    HTuple hv_FAI20Threshold_down = null, hv_newWidth = null;
    HTuple hv_FAI2_LEN_P1 = null, hv_FAI2_LEN_P2 = null, hv_FAI2_LEN_P3 = null;
    HTuple hv_FAI3_LEN_P1 = null, hv_FAI3_LEN_P2 = null, hv_FAI3_LEN_P3 = null;
    HTuple hv_FAI4_LEN_P1 = null, hv_FAI4_LEN_P2 = null, hv_FAI4_LEN_P3 = null;
    HTuple hv_FAI5_LEN_P1 = null, hv_FAI5_LEN_P2 = null, hv_FAI5_LEN_P3 = null;
    HTuple hv_FAI6_LEN_P1 = null, hv_FAI6_LEN_P2 = null, hv_FAI6_LEN_P3 = null;
    HTuple hv_FAI9_LEN_P1 = null, hv_FAI9_LEN_P2 = null, hv_FAI9_LEN_P3 = null;
    HTuple hv_FAI12_LEN_P1 = null, hv_FAI12_LEN_P2 = null;
    HTuple hv_FAI16_LEN_P1 = null, hv_FAI16_LEN_P2 = null;
    HTuple hv_FAI17_LEN_P1 = null, hv_FAI17_LEN_P2 = null;
    HTuple hv_FAI19_LEN_P1 = null, hv_FAI19_LEN_P2 = null;
    HTuple hv_FAI20_LEN_X = null, hv_FAI20_LEN_Y = null, hv_Threshold = null;
    HTuple hv_rowModel = null, hv_colModel = null, hv_Row = null;
    HTuple hv_Column = null, hv_Angle = null, hv_Score = null;
    HTuple hv_MovementImageToImage = null, hv_ROW_1 = null;
    HTuple hv_COL_1 = null, hv_RAD_1 = null, hv_LEN_1 = null;
    HTuple hv_LEN_2 = null, hv_Value = null, hv_standardGrayValue = null;
    HTuple hv_scaleFacotr = null, hv_ROW1_1 = null, hv_COL1_1 = null;
    HTuple hv_RAD1_1 = null, hv_LEN1_1 = null, hv_LEN2_1 = null;
    HTuple hv_ROW1_2 = null, hv_COL1_2 = null, hv_RAD1_2 = null;
    HTuple hv_LEN1_2 = null, hv_LEN2_2 = null, hv_baseRightRow = null;
    HTuple hv_baseRightColum = null, hv_baseRightRadian = null;
    HTuple hv_baseRightLen1 = null, hv_baseRightLen2 = null;
    HTuple hv_lineX1RightBase = null, hv_lineY1RightBase = null;
    HTuple hv_lineX2RightBase = null, hv_lineY2RightBase = null;
    HTuple hv_XsUsed = null, hv_YsUsed = null, hv_XsIgnored = null;
    HTuple hv_YsIgnored = null, hv_ROW_2 = null, hv_COL_2 = null;
    HTuple hv_RAD_2 = null, hv_ROW_3 = null, hv_COL_3 = null;
    HTuple hv_RAD_3 = null, hv_LEN1_3 = null, hv_LEN2_3 = null;
    HTuple hv_baseTopRow = null, hv_baseTopColumn = null, hv_baseTopRadian = null;
    HTuple hv_baseTopLen1 = null, hv_baseTopLen2 = null, hv_lineX1TopBase = null;
    HTuple hv_lineY1TopBase = null, hv_lineX2TopBase = null;
    HTuple hv_lineY2TopBase = null, hv_rowOrigin = null, hv_colOrigin = null;
    HTuple hv_IsOverlapping = null, hv_ptXOnPerpenducularDir = null;
    HTuple hv_ptYOnPerpenducularDir = null, hv_FAI2_P1_LineStartX = null;
    HTuple hv_FAI2_P1_LineStartY = null, hv_FAI2_P1_LineEndX = null;
    HTuple hv_FAI2_P1_LineEndY = null, hv_FAI2_P2_LineStartX = null;
    HTuple hv_FAI2_P2_LineStartY = null, hv_FAI2_P2_LineEndX = null;
    HTuple hv_FAI2_P2_LineEndY = null, hv_FAI2_P3_LineStartX = null;
    HTuple hv_FAI2_P3_LineStartY = null, hv_FAI2_P3_LineEndX = null;
    HTuple hv_FAI2_P3_LineEndY = null, hv_rectFAI2Row = null;
    HTuple hv_rectFAI2Col = null, hv_rectFAI2Radian = null;
    HTuple hv_rectFAI2Len1 = null, hv_rectFAI2Len2 = null;
    HTuple hv_rectFAI2Row_RIGHT = null, hv_rectFAI2Col_RIGHT = null;
    HTuple hv_rectFAI2Radian_RIGHT = null, hv_rectFAI2Len1_RIGHT = null;
    HTuple hv_rectFAI2Len2_RIGHT = null, hv_lineStartX_FAI2H = null;
    HTuple hv_lineStartY_FAI2H = null, hv_lineEndX_FAI2H = null;
    HTuple hv_lineEndY_FAI2H = null, hv_rowIntersect = null;
    HTuple hv_colIntersect = null, hv_IsOverlapping1 = null;
    HTuple hv_distanceWorld = null, hv_distancePixel = null;
    HTuple hv_rectFAI3Row = null, hv_rectFAI3Col = null, hv_rectFAI3Radian = null;
    HTuple hv_rectFAI3Len1 = null, hv_rectFAI3Len2 = null;
    HTuple hv_rectFAI3Row_RIGHT = null, hv_rectFAI3Col_RIGHT = null;
    HTuple hv_rectFAI3Radian_RIGHT = null, hv_rectFAI3Len1_RIGHT = null;
    HTuple hv_rectFAI3Len2_RIGHT = null, hv_lineX1FAI3 = null;
    HTuple hv_lineY1FAI3 = null, hv_lineX2FAI3 = null, hv_lineY2FAI3 = null;
    HTuple hv_FAI3_P1_LineStartX = null, hv_FAI3_P1_LineStartY = null;
    HTuple hv_FAI3_P1_LineEndX = null, hv_FAI3_P1_LineEndY = null;
    HTuple hv_FAI3_P2_LineStartX = null, hv_FAI3_P2_LineStartY = null;
    HTuple hv_FAI3_P2_LineEndX = null, hv_FAI3_P2_LineEndY = null;
    HTuple hv_FAI3_P3_LineStartX = null, hv_FAI3_P3_LineStartY = null;
    HTuple hv_FAI3_P3_LineEndX = null, hv_FAI3_P3_LineEndY = null;
    HTuple hv_IsOverlapping2 = null, hv_rectFAI4Row = null;
    HTuple hv_rectFAI4Col = null, hv_rectFAI4Radian = null;
    HTuple hv_rectFAI4Len1 = null, hv_rectFAI4Len2 = null;
    HTuple hv_lineX1FAI4 = null, hv_lineY1FAI4 = null, hv_lineX2FAI4 = null;
    HTuple hv_lineY2FAI4 = null, hv_rectFAI5Row = null, hv_rectFAI5Col = null;
    HTuple hv_rectFAI5Radian = null, hv_rectFAI5Len1 = null;
    HTuple hv_rectFAI5Len2 = null, hv_lineX1FAI5 = null, hv_lineY1FAI5 = null;
    HTuple hv_lineX2FAI5 = null, hv_lineY2FAI5 = null, hv_rectFAI6Row = null;
    HTuple hv_rectFAI6Col = null, hv_rectFAI6Radian = null;
    HTuple hv_rectFAI6Len1 = null, hv_rectFAI6Len2 = null;
    HTuple hv_lineX1FAI6 = null, hv_lineY1FAI6 = null, hv_lineX2FAI6 = null;
    HTuple hv_lineY2FAI6 = null, hv_FAI6_P1_LineStartX = null;
    HTuple hv_FAI6_P1_LineStartY = null, hv_FAI6_P1_LineEndX = null;
    HTuple hv_FAI6_P1_LineEndY = null, hv_FAI6_P2_LineStartX = null;
    HTuple hv_FAI6_P2_LineStartY = null, hv_FAI6_P2_LineEndX = null;
    HTuple hv_FAI6_P2_LineEndY = null, hv_FAI6_P3_LineStartX = null;
    HTuple hv_FAI6_P3_LineStartY = null, hv_FAI6_P3_LineEndX = null;
    HTuple hv_FAI6_P3_LineEndY = null, hv_rectFAI9Row = null;
    HTuple hv_rectFAI9Col = null, hv_rectFAI9Radian = null;
    HTuple hv_rectFAI9Len1 = null, hv_rectFAI9Len2 = null;
    HTuple hv_lineX1FAI9 = null, hv_lineY1FAI9 = null, hv_lineX2FAI9 = null;
    HTuple hv_lineY2FAI9 = null, hv_FAI9_P1_LineStartX = null;
    HTuple hv_FAI9_P1_LineStartY = null, hv_FAI9_P1_LineEndX = null;
    HTuple hv_FAI9_P1_LineEndY = null, hv_FAI9_P2_LineStartX = null;
    HTuple hv_FAI9_P2_LineStartY = null, hv_FAI9_P2_LineEndX = null;
    HTuple hv_FAI9_P2_LineEndY = null, hv_FAI9_P3_LineStartX = null;
    HTuple hv_FAI9_P3_LineStartY = null, hv_FAI9_P3_LineEndX = null;
    HTuple hv_FAI9_P3_LineEndY = null, hv_rectFAI12Row = null;
    HTuple hv_rectFAI12Col = null, hv_rectFAI12Radian = null;
    HTuple hv_rectFAI12Len1 = null, hv_rectFAI12Len2 = null;
    HTuple hv_lineX1FAI12 = null, hv_lineY1FAI12 = null, hv_lineX2FAI12 = null;
    HTuple hv_lineY2FAI12 = null, hv_FAI12_P1_LineStartX = null;
    HTuple hv_FAI12_P1_LineStartY = null, hv_FAI12_P1_LineEndX = null;
    HTuple hv_FAI12_P1_LineEndY = null, hv_FAI12_P2_LineStartX = null;
    HTuple hv_FAI12_P2_LineStartY = null, hv_FAI12_P2_LineEndX = null;
    HTuple hv_FAI12_P2_LineEndY = null, hv_rectFAI16Row = null;
    HTuple hv_rectFAI16Col = null, hv_rectFAI16Radian = null;
    HTuple hv_rectFAI16Len1 = null, hv_rectFAI16Len2 = null;
    HTuple hv_lineX1FAI16 = null, hv_lineY1FAI16 = null, hv_lineX2FAI16 = null;
    HTuple hv_lineY2FAI16 = null, hv_FAI16_P1_LineStartX = null;
    HTuple hv_FAI16_P1_LineStartY = null, hv_FAI16_P1_LineEndX = null;
    HTuple hv_FAI16_P1_LineEndY = null, hv_FAI16_P2_LineStartX = null;
    HTuple hv_FAI16_P2_LineStartY = null, hv_FAI16_P2_LineEndX = null;
    HTuple hv_FAI16_P2_LineEndY = null, hv_rectFAI17Row = null;
    HTuple hv_rectFAI17Col = null, hv_rectFAI17Radian = null;
    HTuple hv_rectFAI17Len1 = null, hv_rectFAI17Len2 = null;
    HTuple hv_lineX1FAI17 = null, hv_lineY1FAI17 = null, hv_lineX2FAI17 = null;
    HTuple hv_lineY2FAI17 = null, hv_FAI17_P1_LineStartX = null;
    HTuple hv_FAI17_P1_LineStartY = null, hv_FAI17_P1_LineEndX = null;
    HTuple hv_FAI17_P1_LineEndY = null, hv_FAI17_P2_LineStartX = null;
    HTuple hv_FAI17_P2_LineStartY = null, hv_FAI17_P2_LineEndX = null;
    HTuple hv_FAI17_P2_LineEndY = null, hv_rectFAI19Row = null;
    HTuple hv_rectFAI19Col = null, hv_rectFAI19Radian = null;
    HTuple hv_rectFAI19Len1 = null, hv_rectFAI19Len2 = null;
    HTuple hv_lineX1FAI19 = null, hv_lineY1FAI19 = null, hv_lineX2FAI19 = null;
    HTuple hv_lineY2FAI19 = null, hv_FAI19_P1_LineStartX = null;
    HTuple hv_FAI19_P1_LineStartY = null, hv_FAI19_P1_LineEndX = null;
    HTuple hv_FAI19_P1_LineEndY = null, hv_FAI19_P2_LineStartX = null;
    HTuple hv_FAI19_P2_LineStartY = null, hv_FAI19_P2_LineEndX = null;
    HTuple hv_FAI19_P2_LineEndY = null, hv_FAI20_P2_LineStartX = null;
    HTuple hv_FAI20_P2_LineStartY = null, hv_FAI20_P2_LineEndX = null;
    HTuple hv_FAI20_P2_LineEndY = null, hv_FAI20V_P1_LineStartX = null;
    HTuple hv_FAI20V_P1_LineStartY = null, hv_FAI20V_P1_LineEndX = null;
    HTuple hv_FAI20V_P1_LineEndY = null, hv_rowCenterTop = null;
    HTuple hv_colCenterTop = null, hv_rectFAI20TRRow = null;
    HTuple hv_rectFAI20TRCol = null, hv_rectFAI20TRRadian = null;
    HTuple hv_rectFAI20TRLen1 = null, hv_rectFAI20TRLen2 = null;
    HTuple hv_lineX1FAI20TR = null, hv_lineY1FAI20TR = null;
    HTuple hv_lineX2FAI20TR = null, hv_lineY2FAI20TR = null;
    HTuple hv_rectFAI20BLRow = null, hv_rectFAI20BLCol = null;
    HTuple hv_rectFAI20BLRadian = null, hv_rectFAI20BLLen1 = null;
    HTuple hv_rectFAI20BLLen2 = null, hv_lineX1FAI20BL = null;
    HTuple hv_lineY1FAI20BL = null, hv_lineX2FAI20BL = null;
    HTuple hv_lineY2FAI20BL = null, hv_ptX_TR = null, hv_ptY_TR = null;
    HTuple hv_ptX_BL = null, hv_ptY_BL = null, hv_ptX = null;
    HTuple hv_ptY = null, hv_outLineX1 = null, hv_outLineY1 = null;
    HTuple hv_outLineX2 = null, hv_outLineY2 = null, hv_numOutputs = null;
    HTuple hv_numOutputPixels = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_ImageUndistorted);
    HOperatorSet.GenEmptyObj(out ho_lineRegions);
    HOperatorSet.GenEmptyObj(out ho_FindLineRects);
    HOperatorSet.GenEmptyObj(out ho_ROI_0);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced);
    HOperatorSet.GenEmptyObj(out ho_Border);
    HOperatorSet.GenEmptyObj(out ho_Rectangle8);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced1);
    HOperatorSet.GenEmptyObj(out ho_Rectangle1);
    HOperatorSet.GenEmptyObj(out ho_rect);
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    HOperatorSet.GenEmptyObj(out ho_rectFAI2);
    HOperatorSet.GenEmptyObj(out ho_Rectangle7);
    HOperatorSet.GenEmptyObj(out ho_rectFAI3);
    HOperatorSet.GenEmptyObj(out ho_Rectangle6);
    HOperatorSet.GenEmptyObj(out ho_rectFAI4);
    HOperatorSet.GenEmptyObj(out ho_Rectangle2);
    HOperatorSet.GenEmptyObj(out ho_Rectangle);
    HOperatorSet.GenEmptyObj(out ho_lineRegion1);
    HOperatorSet.GenEmptyObj(out ho_Cross);
    HOperatorSet.GenEmptyObj(out ho_Rectangle3);
    HOperatorSet.GenEmptyObj(out ho_Rectangle4);
    HOperatorSet.GenEmptyObj(out ho_Rectangle5);
    try
    {
      hv_CameraParameters = new HTuple();
      hv_CameraParameters[0] = "area_scan_telecentric_division";
      hv_CameraParameters[1] = 0.588611;
      hv_CameraParameters[2] = -0.451042;
      hv_CameraParameters[3] = 4.49784e-006;
      hv_CameraParameters[4] = 4.5e-006;
      hv_CameraParameters[5] = 2561.74;
      hv_CameraParameters[6] = 2560.1;
      hv_CameraParameters[7] = 5120;
      hv_CameraParameters[8] = 5120;
      hv_CameraPose = new HTuple();
      hv_CameraPose[0] = -0.00435978;
      hv_CameraPose[1] = -0.000190543;
      hv_CameraPose[2] = 0.000999271;
      hv_CameraPose[3] = 0.346393;
      hv_CameraPose[4] = 2.16033;
      hv_CameraPose[5] = 180.996;
      hv_CameraPose[6] = 0.0;

      {
      HObject ExpTmpOutVar_0;
      UndistortImage(ho_Image_COPY_INP_TMP, out ExpTmpOutVar_0, hv_CameraParameters, 
          out hv_OutCameraParams);
      ho_Image_COPY_INP_TMP.Dispose();
      ho_Image_COPY_INP_TMP = ExpTmpOutVar_0;
      }
      ho_ImageUndistorted.Dispose();
      ho_ImageUndistorted = ho_Image_COPY_INP_TMP.CopyObj(1,-1);

      GenCalibrationMaps(ho_Image_COPY_INP_TMP, hv_OutCameraParams, hv_CameraPose, 
          out hv_MapToWorld, out hv_MapToImage);


      HOperatorSet.GetImageSize(ho_Image_COPY_INP_TMP, out hv_Width, out hv_Height);


      if (HDevWindowStack.IsOpen())
      {
        HOperatorSet.SetDraw(HDevWindowStack.GetActive(), "margin");
      }

      hv_crossSize = 100;
      hv_numSubRects = 10;
      hv_ignorePortion = 0.2;
      hv_sigma2 = 5;

      //init thresholds
      hv_ModelThreshold = hv_thresholds.TupleSelect(0);
      hv_TopThreshold = hv_thresholds.TupleSelect(1);
      hv_RightThreshold = hv_thresholds.TupleSelect(2);
      hv_FAI2Threshold = hv_thresholds.TupleSelect(3);
      hv_FAI3Threshold = hv_thresholds.TupleSelect(4);
      hv_FAI4Threshold = hv_thresholds.TupleSelect(5);
      hv_FAI5Threshold = hv_thresholds.TupleSelect(6);
      hv_FAI6Threshold = hv_thresholds.TupleSelect(7);
      hv_FAI9Threshold = hv_thresholds.TupleSelect(8);
      hv_FAI12Threshold = hv_thresholds.TupleSelect(9);
      hv_FAI16Threshold = hv_thresholds.TupleSelect(10);
      hv_FAI17Threshold = hv_thresholds.TupleSelect(11);
      hv_FAI19Threshold = hv_thresholds.TupleSelect(12);
      hv_FAI20Threshold_up = hv_thresholds.TupleSelect(13);
      hv_FAI20Threshold_down = hv_thresholds.TupleSelect(14);

      hv_newWidth = 5;


      //record find line points
      hv_crossesXused = new HTuple();
      hv_crossesYused = new HTuple();
      hv_crossesXIgnored = new HTuple();
      hv_crossesYIgnored = new HTuple();

      //record line-line intersections
      hv_intersectXs = new HTuple();
      hv_intersectYs = new HTuple();

      //outputs
      hv_outputs = new HTuple();
      hv_outputsPixel = new HTuple();

      //set units and positions


      hv_FAI2_LEN_P1 = 4.583;
      hv_FAI2_LEN_P2 = 9;
      hv_FAI2_LEN_P3 = 14.583;

      hv_FAI3_LEN_P1 = 5.299;
      hv_FAI3_LEN_P2 = 9;
      hv_FAI3_LEN_P3 = 13.299;

      hv_FAI4_LEN_P1 = 5.299;
      hv_FAI4_LEN_P2 = 9.299;
      hv_FAI4_LEN_P3 = 13.299;

      hv_FAI5_LEN_P1 = 5.299;
      hv_FAI5_LEN_P2 = 9.299;
      hv_FAI5_LEN_P3 = 13.299;

      hv_FAI6_LEN_P1 = 22.024;
      hv_FAI6_LEN_P2 = 24.024;
      hv_FAI6_LEN_P3 = 26.024;

      hv_FAI9_LEN_P1 = 21.753;
      hv_FAI9_LEN_P2 = 23.753;
      hv_FAI9_LEN_P3 = 25.753;


      hv_FAI12_LEN_P1 = 23.213;
      hv_FAI12_LEN_P2 = 34.97;

      hv_FAI16_LEN_P1 = 13.071;
      hv_FAI16_LEN_P2 = 20.213;

      hv_FAI17_LEN_P1 = 1.53;
      hv_FAI17_LEN_P2 = 9.827;

      hv_FAI19_LEN_P1 = 2.157;
      hv_FAI19_LEN_P2 = 13.791;

      hv_FAI20_LEN_X = 9.299;
      hv_FAI20_LEN_Y = 7.886;

      ho_FindLineRects.Dispose();
      HOperatorSet.GenEmptyObj(out ho_FindLineRects);
      ho_lineRegions.Dispose();
      HOperatorSet.GenEmptyObj(out ho_lineRegions);


      //find model
      hv_Threshold = 128;
      hv_rowModel = 1171.5;
      hv_colModel = 3678.5;
      ho_ROI_0.Dispose();
      HOperatorSet.GenRectangle1(out ho_ROI_0, 53.9, 1940.83, 3017.1, 4961.63);
      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image_COPY_INP_TMP, ho_ROI_0, out ho_ImageReduced
          );
      ho_Border.Dispose();
      HOperatorSet.ThresholdSubPix(ho_ImageReduced, out ho_Border, hv_ModelThreshold);
      HOperatorSet.FindShapeModel(ho_ImageReduced, hv_ModelID, -0.39, 0.79, 0.5, 
          1, 0.5, "least_squares", 0, 0.9, out hv_Row, out hv_Column, out hv_Angle, 
          out hv_Score);
      HOperatorSet.VectorAngleToRigid(0, 0, 0, hv_Row, hv_Column, hv_Angle, out hv_MovementImageToImage);

      //image normalization
      hv_ROW_1 = 1972-hv_rowModel;
      hv_COL_1 = 4257-hv_colModel;
      hv_RAD_1 = 0;
      hv_LEN_1 = 150;
      hv_LEN_2 = 150;

      AffineTransRect2(hv_ROW_1, hv_COL_1, hv_RAD_1, hv_LEN_1, hv_LEN_2, hv_MovementImageToImage, 
          out hv_ROW_1, out hv_COL_1, out hv_RAD_1, out hv_LEN_1, out hv_LEN_2);
      ho_Rectangle8.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle8, hv_ROW_1, hv_COL_1, hv_RAD_1, 
          hv_LEN_1, hv_LEN_2);
      ho_ImageReduced1.Dispose();
      HOperatorSet.ReduceDomain(ho_ImageReduced, ho_Rectangle8, out ho_ImageReduced1
          );
      HOperatorSet.GrayFeatures(ho_Rectangle8, ho_ImageReduced1, "mean", out hv_Value);
      hv_standardGrayValue = 140.0;
      hv_scaleFacotr = hv_standardGrayValue/hv_Value;
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ScaleImage(ho_Image_COPY_INP_TMP, out ExpTmpOutVar_0, hv_scaleFacotr, 
          0);
      ho_Image_COPY_INP_TMP.Dispose();
      ho_Image_COPY_INP_TMP = ExpTmpOutVar_0;
      }

      hv_ROW1_1 = 2684-hv_rowModel;
      hv_COL1_1 = 4804-hv_colModel;
      hv_RAD1_1 = (new HTuple(180)).TupleRad();
      hv_LEN1_1 = 200;
      hv_LEN2_1 = 350;

      hv_ROW1_2 = 4380-hv_rowModel;
      hv_COL1_2 = 4804-hv_colModel;
      hv_RAD1_2 = (new HTuple(180)).TupleRad();
      hv_LEN1_2 = 200;
      hv_LEN2_2 = 350;

      hv_baseRightRow = new HTuple();
      hv_baseRightRow = hv_baseRightRow.TupleConcat(hv_ROW1_1);
      hv_baseRightRow = hv_baseRightRow.TupleConcat(hv_ROW1_2);
      hv_baseRightColum = new HTuple();
      hv_baseRightColum = hv_baseRightColum.TupleConcat(hv_COL1_1);
      hv_baseRightColum = hv_baseRightColum.TupleConcat(hv_COL1_2);
      hv_baseRightRadian = new HTuple();
      hv_baseRightRadian = hv_baseRightRadian.TupleConcat(hv_RAD1_1);
      hv_baseRightRadian = hv_baseRightRadian.TupleConcat(hv_RAD1_2);
      hv_baseRightLen1 = new HTuple();
      hv_baseRightLen1 = hv_baseRightLen1.TupleConcat(hv_LEN1_1);
      hv_baseRightLen1 = hv_baseRightLen1.TupleConcat(hv_LEN1_2);
      hv_baseRightLen2 = new HTuple();
      hv_baseRightLen2 = hv_baseRightLen2.TupleConcat(hv_LEN2_1);
      hv_baseRightLen2 = hv_baseRightLen2.TupleConcat(hv_LEN2_2);


      AffineTransRect2(hv_baseRightRow, hv_baseRightColum, hv_baseRightRadian, hv_baseRightLen1, 
          hv_baseRightLen2, hv_MovementImageToImage, out hv_baseRightRow, out hv_baseRightColum, 
          out hv_baseRightRadian, out hv_baseRightLen1, out hv_baseRightLen2);
      ho_Rectangle1.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle1, hv_baseRightRow, hv_baseRightColum, 
          hv_baseRightRadian, hv_baseRightLen1, hv_baseRightLen2);

      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_baseRightRow, hv_baseRightColum, hv_baseRightRadian, hv_baseRightLen1, 
          hv_baseRightLen2, hv_numSubRects, hv_TopThreshold.TupleConcat(hv_TopThreshold), 
          "first", hv_ignorePortion, "true", 1, 2, hv_Width, hv_Height, hv_newWidth, 
          60, 30, out hv_lineX1RightBase, out hv_lineY1RightBase, out hv_lineX2RightBase, 
          out hv_lineY2RightBase, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
          out hv_YsIgnored);
      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }


      //find top base line
      hv_ROW_1 = 162.42300000-hv_rowModel;
      hv_COL_1 = 3050-hv_colModel;
      hv_RAD_1 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_1 = 100;
      hv_LEN2_1 = 200;

      hv_ROW_2 = 162.42300000-hv_rowModel;
      hv_COL_2 = 3694-hv_colModel;
      hv_RAD_2 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_2 = 100;
      hv_LEN2_2 = 100;

      hv_ROW_3 = 162.42300000-hv_rowModel;
      hv_COL_3 = 4310-hv_colModel;
      hv_RAD_3 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_3 = 100;
      hv_LEN2_3 = 100;

      hv_baseTopRow = new HTuple();
      hv_baseTopRow = hv_baseTopRow.TupleConcat(hv_ROW_1);
      hv_baseTopRow = hv_baseTopRow.TupleConcat(hv_ROW_2);
      hv_baseTopRow = hv_baseTopRow.TupleConcat(hv_ROW_3);
      hv_baseTopColumn = new HTuple();
      hv_baseTopColumn = hv_baseTopColumn.TupleConcat(hv_COL_1);
      hv_baseTopColumn = hv_baseTopColumn.TupleConcat(hv_COL_2);
      hv_baseTopColumn = hv_baseTopColumn.TupleConcat(hv_COL_3);
      hv_baseTopRadian = new HTuple();
      hv_baseTopRadian = hv_baseTopRadian.TupleConcat(hv_RAD_1);
      hv_baseTopRadian = hv_baseTopRadian.TupleConcat(hv_RAD_2);
      hv_baseTopRadian = hv_baseTopRadian.TupleConcat(hv_RAD_3);
      hv_baseTopLen1 = new HTuple();
      hv_baseTopLen1 = hv_baseTopLen1.TupleConcat(hv_LEN1_1);
      hv_baseTopLen1 = hv_baseTopLen1.TupleConcat(hv_LEN1_2);
      hv_baseTopLen1 = hv_baseTopLen1.TupleConcat(hv_LEN1_3);
      hv_baseTopLen2 = new HTuple();
      hv_baseTopLen2 = hv_baseTopLen2.TupleConcat(hv_LEN2_1);
      hv_baseTopLen2 = hv_baseTopLen2.TupleConcat(hv_LEN2_2);
      hv_baseTopLen2 = hv_baseTopLen2.TupleConcat(hv_LEN2_3);



      AffineTransRect2(hv_baseTopRow, hv_baseTopColumn, hv_baseTopRadian, hv_baseTopLen1, 
          hv_baseTopLen2, hv_MovementImageToImage, out hv_baseTopRow, out hv_baseTopColumn, 
          out hv_baseTopRadian, out hv_baseTopLen1, out hv_baseTopLen2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_baseTopRow, hv_baseTopColumn, hv_baseTopRadian, hv_baseTopLen1, 
          hv_baseTopLen2, hv_numSubRects, ((hv_RightThreshold.TupleConcat(hv_RightThreshold))).TupleConcat(
          hv_RightThreshold), "first", hv_ignorePortion, "false", 1, hv_sigma2, hv_Width, 
          hv_Height, hv_newWidth, 60, 30, out hv_lineX1TopBase, out hv_lineY1TopBase, 
          out hv_lineX2TopBase, out hv_lineY2TopBase, out hv_XsUsed, out hv_YsUsed, 
          out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);



      //make origin
      HOperatorSet.IntersectionLines(hv_lineY1RightBase, hv_lineX1RightBase, hv_lineY2RightBase, 
          hv_lineX2RightBase, hv_lineY1TopBase, hv_lineX1TopBase, hv_lineY2TopBase, 
          hv_lineX2TopBase, out hv_rowOrigin, out hv_colOrigin, out hv_IsOverlapping);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colOrigin);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowOrigin);

      //rectify bases
      get_perpendicular_line_that_passes(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, 
          hv_lineY2TopBase, hv_colOrigin, hv_rowOrigin, out hv_ptXOnPerpenducularDir, 
          out hv_ptYOnPerpenducularDir);
      hv_lineX1RightBase = hv_colOrigin.Clone();
      hv_lineY1RightBase = hv_rowOrigin.Clone();
      hv_lineX2RightBase = hv_ptXOnPerpenducularDir.Clone();
      hv_lineY2RightBase = hv_ptYOnPerpenducularDir.Clone();


      //***************************************************FAI2***********************************
      //make vertical grids
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI2_LEN_P1, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI2_P1_LineStartX, out hv_FAI2_P1_LineStartY, 
          out hv_FAI2_P1_LineEndX, out hv_FAI2_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI2_LEN_P2, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI2_P2_LineStartX, out hv_FAI2_P2_LineStartY, 
          out hv_FAI2_P2_LineEndX, out hv_FAI2_P2_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI2_LEN_P3, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI2_P3_LineStartX, out hv_FAI2_P3_LineStartY, 
          out hv_FAI2_P3_LineEndX, out hv_FAI2_P3_LineEndY);

      //make H line for FAI2

      hv_rectFAI2Row = 2173.39000000-hv_rowModel;
      hv_rectFAI2Col = 3168.38000000-hv_colModel;
      hv_rectFAI2Radian = (new HTuple(-91)).TupleRad();
      hv_rectFAI2Len1 = 100.89500000;
      hv_rectFAI2Len2 = 200.18000000;

      hv_rectFAI2Row_RIGHT = 2173.39000000-hv_rowModel;
      hv_rectFAI2Col_RIGHT = 4168.38000000-hv_colModel;
      hv_rectFAI2Radian_RIGHT = (new HTuple(-91)).TupleRad();
      hv_rectFAI2Len1_RIGHT = 100.89500000;
      hv_rectFAI2Len2_RIGHT = 200.18000000;
      AffineTransRect2(hv_rectFAI2Row.TupleConcat(hv_rectFAI2Row_RIGHT), hv_rectFAI2Col.TupleConcat(
          hv_rectFAI2Col_RIGHT), hv_rectFAI2Radian.TupleConcat(hv_rectFAI2Radian_RIGHT), 
          hv_rectFAI2Len1.TupleConcat(hv_rectFAI2Len1_RIGHT), hv_rectFAI2Len2.TupleConcat(
          hv_rectFAI2Len2_RIGHT), hv_MovementImageToImage, out hv_rectFAI2Row, out hv_rectFAI2Col, 
          out hv_rectFAI2Radian, out hv_rectFAI2Len1, out hv_rectFAI2Len2);
      ho_rectFAI2.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rectFAI2, out ho_lineRegion, 
          "positive", hv_rectFAI2Row, hv_rectFAI2Col, hv_rectFAI2Radian, hv_rectFAI2Len1, 
          hv_rectFAI2Len2, 10, hv_FAI2Threshold.TupleConcat(hv_FAI2Threshold), "first", 
          0.2, "false", 1, 3, 5120, 5120, 5, 30, 15, out hv_lineStartX_FAI2H, out hv_lineStartY_FAI2H, 
          out hv_lineEndX_FAI2H, out hv_lineEndY_FAI2H, out hv_XsUsed, out hv_YsUsed, 
          out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rectFAI2, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }
      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);


      //FAI2-P2
      HOperatorSet.IntersectionLines(hv_lineStartY_FAI2H, hv_lineStartX_FAI2H, hv_lineEndY_FAI2H, 
          hv_lineEndX_FAI2H, hv_FAI2_P2_LineStartY, hv_FAI2_P2_LineStartX, hv_FAI2_P2_LineEndY, 
          hv_FAI2_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping1);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);



      //*********************************************FAI3************************************


      hv_rectFAI3Row = 2200.39000000-hv_rowModel;
      hv_rectFAI3Col = 3168.38000000-hv_colModel;
      hv_rectFAI3Radian = (new HTuple(-91)).TupleRad();
      hv_rectFAI3Len1 = 50.89500000;
      hv_rectFAI3Len2 = 200.18000000;

      hv_rectFAI3Row_RIGHT = 2233.39000000-hv_rowModel;
      hv_rectFAI3Col_RIGHT = 4168.38000000-hv_colModel;
      hv_rectFAI3Radian_RIGHT = (new HTuple(-91)).TupleRad();
      hv_rectFAI3Len1_RIGHT = 50.89500000;
      hv_rectFAI3Len2_RIGHT = 200.18000000;
      AffineTransRect2(hv_rectFAI3Row.TupleConcat(hv_rectFAI3Row_RIGHT), hv_rectFAI3Col.TupleConcat(
          hv_rectFAI3Col_RIGHT), hv_rectFAI3Radian.TupleConcat(hv_rectFAI3Radian_RIGHT), 
          hv_rectFAI3Len1.TupleConcat(hv_rectFAI3Len1_RIGHT), hv_rectFAI3Len2.TupleConcat(
          hv_rectFAI3Len2_RIGHT), hv_MovementImageToImage, out hv_rectFAI3Row, out hv_rectFAI3Col, 
          out hv_rectFAI3Radian, out hv_rectFAI3Len1, out hv_rectFAI3Len2);

      ho_Rectangle7.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle7, hv_rectFAI3Row, hv_rectFAI3Col, 
          hv_rectFAI3Radian, hv_rectFAI3Len1, hv_rectFAI3Len2);
      ho_rectFAI3.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rectFAI3, out ho_lineRegion, 
          "negative", hv_rectFAI3Row, hv_rectFAI3Col, hv_rectFAI3Radian, hv_rectFAI3Len1, 
          hv_rectFAI3Len2, 10, hv_FAI3Threshold.TupleConcat(hv_FAI3Threshold), "first", 
          0.2, "false", 1, 1, 5120, 5120, 5, 30, 15, out hv_lineX1FAI3, out hv_lineY1FAI3, 
          out hv_lineX2FAI3, out hv_lineY2FAI3, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
          out hv_YsIgnored);


      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rectFAI3, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate base right
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI3_LEN_P1, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI3_P1_LineStartX, out hv_FAI3_P1_LineStartY, 
          out hv_FAI3_P1_LineEndX, out hv_FAI3_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI3_LEN_P2, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI3_P2_LineStartX, out hv_FAI3_P2_LineStartY, 
          out hv_FAI3_P2_LineEndX, out hv_FAI3_P2_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI3_LEN_P3, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI3_P3_LineStartX, out hv_FAI3_P3_LineStartY, 
          out hv_FAI3_P3_LineEndX, out hv_FAI3_P3_LineEndY);


      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI3, hv_lineX1FAI3, hv_lineY2FAI3, 
          hv_lineX2FAI3, hv_FAI3_P2_LineStartY, hv_FAI3_P2_LineStartX, hv_FAI3_P2_LineEndY, 
          hv_FAI3_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //**********************************************FAI4*******************************
      hv_rectFAI4Row = 4682.30000000-hv_rowModel;
      hv_rectFAI4Col = 3567.21000000-hv_colModel;
      hv_rectFAI4Radian = (new HTuple(85)).TupleRad();
      hv_rectFAI4Len1 = 70.89900000;
      hv_rectFAI4Len2 = 800;
      AffineTransRect2(hv_rectFAI4Row, hv_rectFAI4Col, hv_rectFAI4Radian, hv_rectFAI4Len1, 
          hv_rectFAI4Len2, hv_MovementImageToImage, out hv_rectFAI4Row, out hv_rectFAI4Col, 
          out hv_rectFAI4Radian, out hv_rectFAI4Len1, out hv_rectFAI4Len2);
      ho_Rectangle6.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle6, hv_rectFAI4Row, hv_rectFAI4Col, 
          hv_rectFAI4Radian, hv_rectFAI4Len1, hv_rectFAI4Len2);
      ho_rectFAI4.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rectFAI4, out ho_lineRegion, 
          "negative", hv_rectFAI4Row, hv_rectFAI4Col, hv_rectFAI4Radian, hv_rectFAI4Len1, 
          hv_rectFAI4Len2, 6, hv_FAI4Threshold, "first", hv_ignorePortion, "false", 
          1, hv_sigma2, hv_Width, hv_Height, hv_newWidth, 40, 20, out hv_lineX1FAI4, 
          out hv_lineY1FAI4, out hv_lineX2FAI4, out hv_lineY2FAI4, out hv_XsUsed, 
          out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rectFAI4, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI4, hv_lineX1FAI4, hv_lineY2FAI4, 
          hv_lineX2FAI4, hv_FAI3_P1_LineStartY, hv_FAI3_P1_LineStartX, hv_FAI3_P1_LineEndY, 
          hv_FAI3_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI4, hv_lineX1FAI4, hv_lineY2FAI4, 
          hv_lineX2FAI4, hv_FAI3_P2_LineStartY, hv_FAI3_P2_LineStartX, hv_FAI3_P2_LineEndY, 
          hv_FAI3_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P3
      HOperatorSet.IntersectionLines(hv_lineY1FAI4, hv_lineX1FAI4, hv_lineY2FAI4, 
          hv_lineX2FAI4, hv_FAI3_P3_LineStartY, hv_FAI3_P3_LineStartX, hv_FAI3_P3_LineEndY, 
          hv_FAI3_P3_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //************************************FAI 5***************************************
      hv_ROW_1 = 4850-hv_rowModel;
      hv_COL_1 = 2800-hv_colModel;
      hv_RAD_1 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_1 = 100;
      hv_LEN2_1 = 200;

      hv_ROW_2 = 4850-hv_rowModel;
      hv_COL_2 = 3650-hv_colModel;
      hv_RAD_2 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_2 = 100;
      hv_LEN2_2 = 150;

      hv_ROW_3 = 4890-hv_rowModel;
      hv_COL_3 = 4470-hv_colModel;
      hv_RAD_3 = (new HTuple(-90.00000000)).TupleRad();
      hv_LEN1_3 = 100;
      hv_LEN2_3 = 200;


      hv_rectFAI5Row = new HTuple();
      hv_rectFAI5Row = hv_rectFAI5Row.TupleConcat(hv_ROW_1);
      hv_rectFAI5Row = hv_rectFAI5Row.TupleConcat(hv_ROW_2);
      hv_rectFAI5Row = hv_rectFAI5Row.TupleConcat(hv_ROW_3);
      hv_rectFAI5Col = new HTuple();
      hv_rectFAI5Col = hv_rectFAI5Col.TupleConcat(hv_COL_1);
      hv_rectFAI5Col = hv_rectFAI5Col.TupleConcat(hv_COL_2);
      hv_rectFAI5Col = hv_rectFAI5Col.TupleConcat(hv_COL_3);
      hv_rectFAI5Radian = new HTuple();
      hv_rectFAI5Radian = hv_rectFAI5Radian.TupleConcat(hv_RAD_1);
      hv_rectFAI5Radian = hv_rectFAI5Radian.TupleConcat(hv_RAD_2);
      hv_rectFAI5Radian = hv_rectFAI5Radian.TupleConcat(hv_RAD_3);
      hv_rectFAI5Len1 = new HTuple();
      hv_rectFAI5Len1 = hv_rectFAI5Len1.TupleConcat(hv_LEN1_1);
      hv_rectFAI5Len1 = hv_rectFAI5Len1.TupleConcat(hv_LEN1_2);
      hv_rectFAI5Len1 = hv_rectFAI5Len1.TupleConcat(hv_LEN1_3);
      hv_rectFAI5Len2 = new HTuple();
      hv_rectFAI5Len2 = hv_rectFAI5Len2.TupleConcat(hv_LEN2_1);
      hv_rectFAI5Len2 = hv_rectFAI5Len2.TupleConcat(hv_LEN2_2);
      hv_rectFAI5Len2 = hv_rectFAI5Len2.TupleConcat(hv_LEN2_3);

      AffineTransRect2(hv_rectFAI5Row, hv_rectFAI5Col, hv_rectFAI5Radian, hv_rectFAI5Len1, 
          hv_rectFAI5Len2, hv_MovementImageToImage, out hv_rectFAI5Row, out hv_rectFAI5Col, 
          out hv_rectFAI5Radian, out hv_rectFAI5Len1, out hv_rectFAI5Len2);
      ho_Rectangle2.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle2, hv_rectFAI5Row, hv_rectFAI5Col, 
          hv_rectFAI5Radian, hv_rectFAI5Len1, hv_rectFAI5Len2);

      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "positive", hv_rectFAI5Row, hv_rectFAI5Col, hv_rectFAI5Radian, hv_rectFAI5Len1, 
          hv_rectFAI5Len2, 6, ((hv_FAI5Threshold.TupleConcat(hv_FAI5Threshold))).TupleConcat(
          hv_FAI5Threshold), "first", hv_ignorePortion, "false", 1, 2, hv_Width, 
          hv_Height, hv_newWidth, 40, 20, out hv_lineX1FAI5, out hv_lineY1FAI5, out hv_lineX2FAI5, 
          out hv_lineY2FAI5, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI5, hv_lineX1FAI5, hv_lineY2FAI5, 
          hv_lineX2FAI5, hv_FAI3_P1_LineStartY, hv_FAI3_P1_LineStartX, hv_FAI3_P1_LineEndY, 
          hv_FAI3_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI5, hv_lineX1FAI5, hv_lineY2FAI5, 
          hv_lineX2FAI5, hv_FAI3_P2_LineStartY, hv_FAI3_P2_LineStartX, hv_FAI3_P2_LineEndY, 
          hv_FAI3_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P3
      HOperatorSet.IntersectionLines(hv_lineY1FAI5, hv_lineX1FAI5, hv_lineY2FAI5, 
          hv_lineX2FAI5, hv_FAI3_P3_LineStartY, hv_FAI3_P3_LineStartX, hv_FAI3_P3_LineEndY, 
          hv_FAI3_P3_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);



      //************************************FAI 6******************************************
      hv_rectFAI6Row = 2983.82000000-hv_rowModel;
      hv_rectFAI6Col = 1710.50000000-hv_colModel;
      hv_rectFAI6Radian = (new HTuple(88)).TupleRad();
      hv_rectFAI6Len1 = 101.93600000;
      hv_rectFAI6Len2 = 300.58900000;
      AffineTransRect2(hv_rectFAI6Row, hv_rectFAI6Col, hv_rectFAI6Radian, hv_rectFAI6Len1, 
          hv_rectFAI6Len2, hv_MovementImageToImage, out hv_rectFAI6Row, out hv_rectFAI6Col, 
          out hv_rectFAI6Radian, out hv_rectFAI6Len1, out hv_rectFAI6Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI6Row, hv_rectFAI6Col, hv_rectFAI6Radian, hv_rectFAI6Len1, 
          hv_rectFAI6Len2, hv_numSubRects, hv_FAI6Threshold, "first", hv_ignorePortion, 
          "false", 1, hv_sigma2, hv_Width, hv_Height, hv_newWidth, 60, 30, out hv_lineX1FAI6, 
          out hv_lineY1FAI6, out hv_lineX2FAI6, out hv_lineY2FAI6, out hv_XsUsed, 
          out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate base right
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI6_LEN_P1, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI6_P1_LineStartX, out hv_FAI6_P1_LineStartY, 
          out hv_FAI6_P1_LineEndX, out hv_FAI6_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI6_LEN_P2, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI6_P2_LineStartX, out hv_FAI6_P2_LineStartY, 
          out hv_FAI6_P2_LineEndX, out hv_FAI6_P2_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI6_LEN_P3, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI6_P3_LineStartX, out hv_FAI6_P3_LineStartY, 
          out hv_FAI6_P3_LineEndX, out hv_FAI6_P3_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI6, hv_lineX1FAI6, hv_lineY2FAI6, 
          hv_lineX2FAI6, hv_FAI6_P1_LineStartY, hv_FAI6_P1_LineStartX, hv_FAI6_P1_LineEndY, 
          hv_FAI6_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI6, hv_lineX1FAI6, hv_lineY2FAI6, 
          hv_lineX2FAI6, hv_FAI6_P2_LineStartY, hv_FAI6_P2_LineStartX, hv_FAI6_P2_LineEndY, 
          hv_FAI6_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P3
      HOperatorSet.IntersectionLines(hv_lineY1FAI6, hv_lineX1FAI6, hv_lineY2FAI6, 
          hv_lineX2FAI6, hv_FAI6_P3_LineStartY, hv_FAI6_P3_LineStartX, hv_FAI6_P3_LineEndY, 
          hv_FAI6_P3_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //************************************FAI9********************************************
      hv_rectFAI9Row = 1584.57000000-hv_rowModel;
      hv_rectFAI9Col = 1744.61000000-hv_colModel;
      hv_rectFAI9Radian = (new HTuple(-90)).TupleRad();
      hv_rectFAI9Len1 = 97.95910000;
      hv_rectFAI9Len2 = 275.13700000;
      AffineTransRect2(hv_rectFAI9Row, hv_rectFAI9Col, hv_rectFAI9Radian, hv_rectFAI9Len1, 
          hv_rectFAI9Len2, hv_MovementImageToImage, out hv_rectFAI9Row, out hv_rectFAI9Col, 
          out hv_rectFAI9Radian, out hv_rectFAI9Len1, out hv_rectFAI9Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI9Row, hv_rectFAI9Col, hv_rectFAI9Radian, hv_rectFAI9Len1, 
          hv_rectFAI9Len2, hv_numSubRects, hv_FAI9Threshold, "first", hv_ignorePortion, 
          "false", 1, hv_sigma2, hv_Width, hv_Height, hv_newWidth, 60, 30, out hv_lineX1FAI9, 
          out hv_lineY1FAI9, out hv_lineX2FAI9, out hv_lineY2FAI9, out hv_XsUsed, 
          out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate base right
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI9_LEN_P1, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI9_P1_LineStartX, out hv_FAI9_P1_LineStartY, 
          out hv_FAI9_P1_LineEndX, out hv_FAI9_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI9_LEN_P2, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI9_P2_LineStartX, out hv_FAI9_P2_LineStartY, 
          out hv_FAI9_P2_LineEndX, out hv_FAI9_P2_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI9_LEN_P3, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI9_P3_LineStartX, out hv_FAI9_P3_LineStartY, 
          out hv_FAI9_P3_LineEndX, out hv_FAI9_P3_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI9, hv_lineX1FAI9, hv_lineY2FAI9, 
          hv_lineX2FAI9, hv_FAI9_P1_LineStartY, hv_FAI9_P1_LineStartX, hv_FAI9_P1_LineEndY, 
          hv_FAI9_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI9, hv_lineX1FAI9, hv_lineY2FAI9, 
          hv_lineX2FAI9, hv_FAI9_P2_LineStartY, hv_FAI9_P2_LineStartX, hv_FAI9_P2_LineEndY, 
          hv_FAI9_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P3
      HOperatorSet.IntersectionLines(hv_lineY1FAI9, hv_lineX1FAI9, hv_lineY2FAI9, 
          hv_lineX2FAI9, hv_FAI9_P3_LineStartY, hv_FAI9_P3_LineStartX, hv_FAI9_P3_LineEndY, 
          hv_FAI9_P3_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1TopBase, hv_lineY1TopBase, hv_lineX2TopBase, hv_lineY2TopBase, 
          hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //*****************************FAI12**************************
      hv_ROW_1 = 3240-hv_rowModel;
      hv_COL_1 = 2420-hv_colModel;
      hv_RAD_1 = (new HTuple(-1)).TupleRad();
      hv_LEN1_1 = 100;
      hv_LEN2_1 = 100;

      hv_ROW_2 = 3886-hv_rowModel;
      hv_COL_2 = 2400-hv_colModel;
      hv_RAD_2 = (new HTuple(-1)).TupleRad();
      hv_LEN1_2 = 100;
      hv_LEN2_2 = 100;

      hv_ROW_3 = 4500-hv_rowModel;
      hv_COL_3 = 2400-hv_colModel;
      hv_RAD_3 = (new HTuple(-1)).TupleRad();
      hv_LEN1_3 = 100;
      hv_LEN2_3 = 200;



      hv_rectFAI12Row = new HTuple();
      hv_rectFAI12Row = hv_rectFAI12Row.TupleConcat(hv_ROW_1);
      hv_rectFAI12Row = hv_rectFAI12Row.TupleConcat(hv_ROW_2);
      hv_rectFAI12Row = hv_rectFAI12Row.TupleConcat(hv_ROW_3);
      hv_rectFAI12Col = new HTuple();
      hv_rectFAI12Col = hv_rectFAI12Col.TupleConcat(hv_COL_1);
      hv_rectFAI12Col = hv_rectFAI12Col.TupleConcat(hv_COL_2);
      hv_rectFAI12Col = hv_rectFAI12Col.TupleConcat(hv_COL_3);
      hv_rectFAI12Radian = new HTuple();
      hv_rectFAI12Radian = hv_rectFAI12Radian.TupleConcat(hv_RAD_1);
      hv_rectFAI12Radian = hv_rectFAI12Radian.TupleConcat(hv_RAD_2);
      hv_rectFAI12Radian = hv_rectFAI12Radian.TupleConcat(hv_RAD_3);
      hv_rectFAI12Len1 = new HTuple();
      hv_rectFAI12Len1 = hv_rectFAI12Len1.TupleConcat(hv_LEN1_1);
      hv_rectFAI12Len1 = hv_rectFAI12Len1.TupleConcat(hv_LEN1_2);
      hv_rectFAI12Len1 = hv_rectFAI12Len1.TupleConcat(hv_LEN1_3);
      hv_rectFAI12Len2 = new HTuple();
      hv_rectFAI12Len2 = hv_rectFAI12Len2.TupleConcat(hv_LEN2_1);
      hv_rectFAI12Len2 = hv_rectFAI12Len2.TupleConcat(hv_LEN2_2);
      hv_rectFAI12Len2 = hv_rectFAI12Len2.TupleConcat(hv_LEN2_3);
      AffineTransRect2(hv_rectFAI12Row, hv_rectFAI12Col, hv_rectFAI12Radian, hv_rectFAI12Len1, 
          hv_rectFAI12Len2, hv_MovementImageToImage, out hv_rectFAI12Row, out hv_rectFAI12Col, 
          out hv_rectFAI12Radian, out hv_rectFAI12Len1, out hv_rectFAI12Len2);

      ho_Rectangle.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle, hv_rectFAI12Row, hv_rectFAI12Col, 
          hv_rectFAI12Radian, hv_rectFAI12Len1, hv_rectFAI12Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI12Row, hv_rectFAI12Col, hv_rectFAI12Radian, hv_rectFAI12Len1, 
          hv_rectFAI12Len2, hv_numSubRects, ((hv_FAI12Threshold.TupleConcat(hv_FAI12Threshold))).TupleConcat(
          hv_FAI12Threshold), "first", hv_ignorePortion, "true", 1, 2, hv_Width, 
          hv_Height, hv_newWidth, 60, 30, out hv_lineX1FAI12, out hv_lineY1FAI12, 
          out hv_lineX2FAI12, out hv_lineY2FAI12, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
          out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate TOP right
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI12_LEN_P1, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI12_P1_LineStartX, out hv_FAI12_P1_LineStartY, out hv_FAI12_P1_LineEndX, 
          out hv_FAI12_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI12_LEN_P2, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI12_P2_LineStartX, out hv_FAI12_P2_LineStartY, out hv_FAI12_P2_LineEndX, 
          out hv_FAI12_P2_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI12, hv_lineX1FAI12, hv_lineY2FAI12, 
          hv_lineX2FAI12, hv_FAI12_P1_LineStartY, hv_FAI12_P1_LineStartX, hv_FAI12_P1_LineEndY, 
          hv_FAI12_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      //***************
      ho_lineRegion1.Dispose();
      GenLineRegion(out ho_lineRegion1, hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, 5120, 5120);
      ho_Cross.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross, hv_rowIntersect, hv_colIntersect, 
          300, hv_Angle);
      //**************
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI12, hv_lineX1FAI12, hv_lineY2FAI12, 
          hv_lineX2FAI12, hv_FAI12_P2_LineStartY, hv_FAI12_P2_LineStartX, hv_FAI12_P2_LineEndY, 
          hv_FAI12_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //********************************FAI16*************************
      hv_rectFAI16Row = 2246.47000000-hv_rowModel;
      hv_rectFAI16Col = 992.65500000-hv_colModel;
      hv_rectFAI16Radian = (new HTuple(-0.5)).TupleRad();
      hv_rectFAI16Len1 = 125.95600000;
      hv_rectFAI16Len2 = 470.84500000;

      AffineTransRect2(hv_rectFAI16Row, hv_rectFAI16Col, hv_rectFAI16Radian, hv_rectFAI16Len1, 
          hv_rectFAI16Len2, hv_MovementImageToImage, out hv_rectFAI16Row, out hv_rectFAI16Col, 
          out hv_rectFAI16Radian, out hv_rectFAI16Len1, out hv_rectFAI16Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI16Row, hv_rectFAI16Col, hv_rectFAI16Radian, hv_rectFAI16Len1, 
          hv_rectFAI16Len2, 6, hv_FAI16Threshold, "first", hv_ignorePortion, "true", 
          1, 2, hv_Width, hv_Height, hv_newWidth, 30, 15, out hv_lineX1FAI16, out hv_lineY1FAI16, 
          out hv_lineX2FAI16, out hv_lineY2FAI16, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
          out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate base top
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI16_LEN_P1, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI16_P1_LineStartX, out hv_FAI16_P1_LineStartY, out hv_FAI16_P1_LineEndX, 
          out hv_FAI16_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI16_LEN_P2, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI16_P2_LineStartX, out hv_FAI16_P2_LineStartY, out hv_FAI16_P2_LineEndX, 
          out hv_FAI16_P2_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI16, hv_lineX1FAI16, hv_lineY2FAI16, 
          hv_lineX2FAI16, hv_FAI16_P1_LineStartY, hv_FAI16_P1_LineStartX, hv_FAI16_P1_LineEndY, 
          hv_FAI16_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI16, hv_lineX1FAI16, hv_lineY2FAI16, 
          hv_lineX2FAI16, hv_FAI16_P2_LineStartY, hv_FAI16_P2_LineStartX, hv_FAI16_P2_LineEndY, 
          hv_FAI16_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);


      //*************************FAI17*******************************
      hv_ROW_1 = 466-hv_rowModel;
      hv_COL_1 = 2700-hv_colModel;
      hv_RAD_1 = (new HTuple(-1)).TupleRad();
      hv_LEN1_1 = 100;
      hv_LEN2_1 = 100;

      hv_ROW_2 = 868-hv_rowModel;
      hv_COL_2 = 2670-hv_colModel;
      hv_RAD_2 = (new HTuple(-1)).TupleRad();
      hv_LEN1_2 = 100;
      hv_LEN2_2 = 100;

      hv_ROW_3 = 1266-hv_rowModel;
      hv_COL_3 = 2670-hv_colModel;
      hv_RAD_3 = (new HTuple(-1)).TupleRad();
      hv_LEN1_3 = 100;
      hv_LEN2_3 = 100;



      hv_rectFAI17Row = new HTuple();
      hv_rectFAI17Row = hv_rectFAI17Row.TupleConcat(hv_ROW_1);
      hv_rectFAI17Row = hv_rectFAI17Row.TupleConcat(hv_ROW_2);
      hv_rectFAI17Row = hv_rectFAI17Row.TupleConcat(hv_ROW_3);
      hv_rectFAI17Col = new HTuple();
      hv_rectFAI17Col = hv_rectFAI17Col.TupleConcat(hv_COL_1);
      hv_rectFAI17Col = hv_rectFAI17Col.TupleConcat(hv_COL_2);
      hv_rectFAI17Col = hv_rectFAI17Col.TupleConcat(hv_COL_3);
      hv_rectFAI17Radian = new HTuple();
      hv_rectFAI17Radian = hv_rectFAI17Radian.TupleConcat(hv_RAD_1);
      hv_rectFAI17Radian = hv_rectFAI17Radian.TupleConcat(hv_RAD_2);
      hv_rectFAI17Radian = hv_rectFAI17Radian.TupleConcat(hv_RAD_3);
      hv_rectFAI17Len1 = new HTuple();
      hv_rectFAI17Len1 = hv_rectFAI17Len1.TupleConcat(hv_LEN1_1);
      hv_rectFAI17Len1 = hv_rectFAI17Len1.TupleConcat(hv_LEN1_2);
      hv_rectFAI17Len1 = hv_rectFAI17Len1.TupleConcat(hv_LEN1_3);
      hv_rectFAI17Len2 = new HTuple();
      hv_rectFAI17Len2 = hv_rectFAI17Len2.TupleConcat(hv_LEN2_1);
      hv_rectFAI17Len2 = hv_rectFAI17Len2.TupleConcat(hv_LEN2_2);
      hv_rectFAI17Len2 = hv_rectFAI17Len2.TupleConcat(hv_LEN2_3);
      AffineTransRect2(hv_rectFAI17Row, hv_rectFAI17Col, hv_rectFAI17Radian, hv_rectFAI17Len1, 
          hv_rectFAI17Len2, hv_MovementImageToImage, out hv_rectFAI17Row, out hv_rectFAI17Col, 
          out hv_rectFAI17Radian, out hv_rectFAI17Len1, out hv_rectFAI17Len2);
      ho_Rectangle3.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle3, hv_rectFAI17Row, hv_rectFAI17Col, 
          hv_rectFAI17Radian, hv_rectFAI17Len1, hv_rectFAI17Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI17Row, hv_rectFAI17Col, hv_rectFAI17Radian, hv_rectFAI17Len1, 
          hv_rectFAI17Len2, hv_numSubRects, ((hv_FAI17Threshold.TupleConcat(hv_FAI17Threshold))).TupleConcat(
          hv_FAI17Threshold), "first", hv_ignorePortion, "true", 1, hv_sigma2, hv_Width, 
          hv_Height, hv_newWidth, 60, 30, out hv_lineX1FAI17, out hv_lineY1FAI17, 
          out hv_lineX2FAI17, out hv_lineY2FAI17, out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, 
          out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate top base
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI17_LEN_P1, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI17_P1_LineStartX, out hv_FAI17_P1_LineStartY, out hv_FAI17_P1_LineEndX, 
          out hv_FAI17_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI17_LEN_P2, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI17_P2_LineStartX, out hv_FAI17_P2_LineStartY, out hv_FAI17_P2_LineEndX, 
          out hv_FAI17_P2_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI17, hv_lineX1FAI17, hv_lineY2FAI17, 
          hv_lineX2FAI17, hv_FAI17_P1_LineStartY, hv_FAI17_P1_LineStartX, hv_FAI17_P1_LineEndY, 
          hv_FAI17_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI17, hv_lineX1FAI17, hv_lineY2FAI17, 
          hv_lineX2FAI17, hv_FAI17_P2_LineStartY, hv_FAI17_P2_LineStartX, hv_FAI17_P2_LineEndY, 
          hv_FAI17_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);


      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);





      //*******************************FAI19**************************
      hv_ROW_1 = 887-hv_rowModel;
      hv_COL_1 = 4665-hv_colModel;
      hv_RAD_1 = (new HTuple(179.5)).TupleRad();
      hv_LEN1_1 = 100;
      hv_LEN2_1 = 350;

      hv_ROW_2 = 1806-hv_rowModel;
      hv_COL_2 = 4665-hv_colModel;
      hv_RAD_2 = (new HTuple(179)).TupleRad();
      hv_LEN1_2 = 100;
      hv_LEN2_2 = 140;

      hv_rectFAI19Row = new HTuple();
      hv_rectFAI19Row = hv_rectFAI19Row.TupleConcat(hv_ROW_1);
      hv_rectFAI19Row = hv_rectFAI19Row.TupleConcat(hv_ROW_2);
      hv_rectFAI19Col = new HTuple();
      hv_rectFAI19Col = hv_rectFAI19Col.TupleConcat(hv_COL_1);
      hv_rectFAI19Col = hv_rectFAI19Col.TupleConcat(hv_COL_2);
      hv_rectFAI19Radian = new HTuple();
      hv_rectFAI19Radian = hv_rectFAI19Radian.TupleConcat(hv_RAD_1);
      hv_rectFAI19Radian = hv_rectFAI19Radian.TupleConcat(hv_RAD_2);
      hv_rectFAI19Len1 = new HTuple();
      hv_rectFAI19Len1 = hv_rectFAI19Len1.TupleConcat(hv_LEN1_1);
      hv_rectFAI19Len1 = hv_rectFAI19Len1.TupleConcat(hv_LEN1_2);
      hv_rectFAI19Len2 = new HTuple();
      hv_rectFAI19Len2 = hv_rectFAI19Len2.TupleConcat(hv_LEN2_1);
      hv_rectFAI19Len2 = hv_rectFAI19Len2.TupleConcat(hv_LEN2_2);
      AffineTransRect2(hv_rectFAI19Row, hv_rectFAI19Col, hv_rectFAI19Radian, hv_rectFAI19Len1, 
          hv_rectFAI19Len2, hv_MovementImageToImage, out hv_rectFAI19Row, out hv_rectFAI19Col, 
          out hv_rectFAI19Radian, out hv_rectFAI19Len1, out hv_rectFAI19Len2);
      ho_Rectangle4.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle4, hv_rectFAI19Row, hv_rectFAI19Col, 
          hv_rectFAI19Radian, hv_rectFAI19Len1, hv_rectFAI19Len2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI19Row, hv_rectFAI19Col, hv_rectFAI19Radian, hv_rectFAI19Len1, 
          hv_rectFAI19Len2, 6, hv_FAI19Threshold.TupleConcat(hv_FAI19Threshold), 
          "first", 0.2, "true", 1, hv_sigma2, hv_Width, hv_Height, hv_newWidth, 60, 
          30, out hv_lineX1FAI19, out hv_lineY1FAI19, out hv_lineX2FAI19, out hv_lineY2FAI19, 
          out hv_XsUsed, out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //translate top base
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI19_LEN_P1, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI19_P1_LineStartX, out hv_FAI19_P1_LineStartY, out hv_FAI19_P1_LineEndX, 
          out hv_FAI19_P1_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI19_LEN_P2, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI19_P2_LineStartX, out hv_FAI19_P2_LineStartY, out hv_FAI19_P2_LineEndX, 
          out hv_FAI19_P2_LineEndY);

      //P1
      HOperatorSet.IntersectionLines(hv_lineY1FAI19, hv_lineX1FAI19, hv_lineY2FAI19, 
          hv_lineX2FAI19, hv_FAI19_P1_LineStartY, hv_FAI19_P1_LineStartX, hv_FAI19_P1_LineEndY, 
          hv_FAI19_P1_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //P2
      HOperatorSet.IntersectionLines(hv_lineY1FAI19, hv_lineX1FAI19, hv_lineY2FAI19, 
          hv_lineX2FAI19, hv_FAI19_P2_LineStartY, hv_FAI19_P2_LineStartX, hv_FAI19_P2_LineEndY, 
          hv_FAI19_P2_LineEndX, out hv_rowIntersect, out hv_colIntersect, out hv_IsOverlapping2);
      DistancePLInWorld(hv_lineX1RightBase, hv_lineY1RightBase, hv_lineX2RightBase, 
          hv_lineY2RightBase, hv_colIntersect, hv_rowIntersect, hv_MapToWorld, out hv_distanceWorld, 
          out hv_distancePixel);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colIntersect);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowIntersect);

      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);




      //****************************FAI20********************************
      //定圆心
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI20_LEN_Y, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_FAI20_P2_LineStartX, out hv_FAI20_P2_LineStartY, out hv_FAI20_P2_LineEndX, 
          out hv_FAI20_P2_LineEndY);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1RightBase, hv_lineY1RightBase, 
          hv_lineX2RightBase, hv_lineY2RightBase, hv_FAI20_LEN_X, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_FAI20V_P1_LineStartX, out hv_FAI20V_P1_LineStartY, 
          out hv_FAI20V_P1_LineEndX, out hv_FAI20V_P1_LineEndY);
      HOperatorSet.IntersectionLines(hv_FAI20_P2_LineStartY, hv_FAI20_P2_LineStartX, 
          hv_FAI20_P2_LineEndY, hv_FAI20_P2_LineEndX, hv_FAI20V_P1_LineStartY, hv_FAI20V_P1_LineStartX, 
          hv_FAI20V_P1_LineEndY, hv_FAI20V_P1_LineEndX, out hv_rowCenterTop, out hv_colCenterTop, 
          out hv_IsOverlapping2);
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_colCenterTop);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_rowCenterTop);

      hv_rectFAI20TRRow = 288.18300000-hv_rowModel;
      hv_rectFAI20TRCol = 4587.96000000-hv_colModel;
      hv_rectFAI20TRRadian = (new HTuple(50.84800000)).TupleRad();
      hv_rectFAI20TRLen1 = 84.64630000;
      hv_rectFAI20TRLen2 = 65.46210000;

      AffineTransRect2(hv_rectFAI20TRRow, hv_rectFAI20TRCol, hv_rectFAI20TRRadian, 
          hv_rectFAI20TRLen1, hv_rectFAI20TRLen2, hv_MovementImageToImage, out hv_rectFAI20TRRow, 
          out hv_rectFAI20TRCol, out hv_rectFAI20TRRadian, out hv_rectFAI20TRLen1, 
          out hv_rectFAI20TRLen2);
      ho_Rectangle5.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle5, hv_rectFAI20TRRow, hv_rectFAI20TRCol, 
          hv_rectFAI20TRRadian, hv_rectFAI20TRLen1, hv_rectFAI20TRLen2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep_Pairs(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          hv_rectFAI20TRRow, hv_rectFAI20TRCol, hv_rectFAI20TRRadian, hv_rectFAI20TRLen1, 
          hv_rectFAI20TRLen2, "negative", 6, hv_FAI20Threshold_up, 5, hv_sigma2, 
          "last", "false", 0.3, "first", 10, 50, 5120, 5120, 20, 10, "true", 5, out hv_XsUsed, 
          out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored, out hv_lineX1FAI20TR, 
          out hv_lineY1FAI20TR, out hv_lineX2FAI20TR, out hv_lineY2FAI20TR);

      //VisionProStyleFindLineOneStep (Image, rect, lineRegion, 'negative', rectFAI20TRRow, rectFAI20TRCol, rectFAI20TRRadian, rectFAI20TRLen1, rectFAI20TRLen2, 5, FAI20Threshold_up, 'first', 0.3, 'false', 3, sigma2, Width, Height, newWidth, 30, 15, lineX1FAI20TR, lineY1FAI20TR, lineX2FAI20TR, lineY2FAI20TR, XsUsed, YsUsed, XsIgnored, YsIgnored)
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      hv_rectFAI20BLRow = 2078.83000000-hv_rowModel;
      hv_rectFAI20BLCol = 2775.07000000-hv_colModel;
      hv_rectFAI20BLRadian = (new HTuple(45)).TupleRad();
      hv_rectFAI20BLLen1 = 80.07090000;
      hv_rectFAI20BLLen2 = 80.95030000;
      AffineTransRect2(hv_rectFAI20BLRow, hv_rectFAI20BLCol, hv_rectFAI20BLRadian, 
          hv_rectFAI20BLLen1, hv_rectFAI20BLLen2, hv_MovementImageToImage, out hv_rectFAI20BLRow, 
          out hv_rectFAI20BLCol, out hv_rectFAI20BLRadian, out hv_rectFAI20BLLen1, 
          out hv_rectFAI20BLLen2);
      ho_rect.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image_COPY_INP_TMP, out ho_rect, out ho_lineRegion, 
          "negative", hv_rectFAI20BLRow, hv_rectFAI20BLCol, hv_rectFAI20BLRadian, 
          hv_rectFAI20BLLen1, hv_rectFAI20BLLen2, 10, hv_FAI20Threshold_down, "first", 
          0, "false", 1, 3, hv_Width, hv_Height, hv_newWidth, 30, 15, out hv_lineX1FAI20BL, 
          out hv_lineY1FAI20BL, out hv_lineX2FAI20BL, out hv_lineY2FAI20BL, out hv_XsUsed, 
          out hv_YsUsed, out hv_XsIgnored, out hv_YsIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRects, ho_rect, out ExpTmpOutVar_0);
      ho_FindLineRects.Dispose();
      ho_FindLineRects = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }

      hv_crossesXused = hv_crossesXused.TupleConcat(hv_XsUsed);
      hv_crossesYused = hv_crossesYused.TupleConcat(hv_YsUsed);
      hv_crossesXIgnored = hv_crossesXIgnored.TupleConcat(hv_XsIgnored);
      hv_crossesYIgnored = hv_crossesYIgnored.TupleConcat(hv_YsIgnored);

      //FAI20-1
      hv_ptX_TR = (hv_lineX1FAI20TR+hv_lineX2FAI20TR)/2.0;
      hv_ptY_TR = (hv_lineY1FAI20TR+hv_lineY2FAI20TR)/2.0;
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_ptX_TR);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_ptY_TR);

      DistancePLInWorld(hv_lineX1FAI20BL, hv_lineY1FAI20BL, hv_lineX2FAI20BL, hv_lineY2FAI20BL, 
          hv_ptX_TR, hv_ptY_TR, hv_MapToWorld, out hv_distanceWorld, out hv_distancePixel);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      //FAI20-2
      hv_ptX_BL = (hv_lineX1FAI20BL+hv_lineX2FAI20BL)/2.0;
      hv_ptY_BL = (hv_lineY1FAI20BL+hv_lineY2FAI20BL)/2.0;
      hv_intersectXs = hv_intersectXs.TupleConcat(hv_ptX_BL);
      hv_intersectYs = hv_intersectYs.TupleConcat(hv_ptY_BL);

      hv_ptX = (hv_ptX_TR+hv_ptX_BL)/2.0;
      hv_ptY = (hv_ptY_TR+hv_ptY_BL)/2.0;

      ho_lineRegion.Dispose();
      PivotLineAroundPoint(out ho_lineRegion, hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_colOrigin, hv_rowOrigin, (new HTuple(45)).TupleRad()
          , "right", 5120, 5120, out hv_outLineX1, out hv_outLineY1, out hv_outLineX2, 
          out hv_outLineY2);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_lineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_lineRegions.Dispose();
      ho_lineRegions = ExpTmpOutVar_0;
      }
      DistancePLInWorld(hv_outLineX1, hv_outLineY1, hv_outLineX2, hv_outLineY2, hv_ptX, 
          hv_ptY, hv_MapToWorld, out hv_distanceWorld, out hv_distancePixel);
      hv_outputs = hv_outputs.TupleConcat(hv_distanceWorld);
      hv_outputsPixel = hv_outputsPixel.TupleConcat(hv_distancePixel);

      hv_numOutputs = new HTuple(hv_outputs.TupleLength());
      hv_numOutputPixels = new HTuple(hv_outputsPixel.TupleLength());
      ho_Image_COPY_INP_TMP.Dispose();
      ho_ROI_0.Dispose();
      ho_ImageReduced.Dispose();
      ho_Border.Dispose();
      ho_Rectangle8.Dispose();
      ho_ImageReduced1.Dispose();
      ho_Rectangle1.Dispose();
      ho_rect.Dispose();
      ho_lineRegion.Dispose();
      ho_rectFAI2.Dispose();
      ho_Rectangle7.Dispose();
      ho_rectFAI3.Dispose();
      ho_Rectangle6.Dispose();
      ho_rectFAI4.Dispose();
      ho_Rectangle2.Dispose();
      ho_Rectangle.Dispose();
      ho_lineRegion1.Dispose();
      ho_Cross.Dispose();
      ho_Rectangle3.Dispose();
      ho_Rectangle4.Dispose();
      ho_Rectangle5.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Image_COPY_INP_TMP.Dispose();
      ho_ROI_0.Dispose();
      ho_ImageReduced.Dispose();
      ho_Border.Dispose();
      ho_Rectangle8.Dispose();
      ho_ImageReduced1.Dispose();
      ho_Rectangle1.Dispose();
      ho_rect.Dispose();
      ho_lineRegion.Dispose();
      ho_rectFAI2.Dispose();
      ho_Rectangle7.Dispose();
      ho_rectFAI3.Dispose();
      ho_Rectangle6.Dispose();
      ho_rectFAI4.Dispose();
      ho_Rectangle2.Dispose();
      ho_Rectangle.Dispose();
      ho_lineRegion1.Dispose();
      ho_Cross.Dispose();
      ho_Rectangle3.Dispose();
      ho_Rectangle4.Dispose();
      ho_Rectangle5.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void _pinPointFindLine (HObject ho_inputImage, HObject ho_inputRegion, out HObject ho_findLineRegion, 
      HTuple hv_lineX1, HTuple hv_lineX2, HTuple hv_lineY1, HTuple hv_lineY2, HTuple hv_radian, 
      HTuple hv_newWidth, HTuple hv_EdgesOnly, HTuple hv_cannyHigh, HTuple hv_cannyLow, 
      HTuple hv_sigma, out HTuple hv_RowBegin, out HTuple hv_ColBegin, out HTuple hv_RowEnd, 
      out HTuple hv_ColEnd, out HTuple hv_EdgesX, out HTuple hv_EdgesY)
  {




    // Stack for temporary objects 
    HObject[] OTemp = new HObject[20];

    // Local iconic variables 

    HObject ho_ImageReduced, ho_Edges, ho_Edge=null;

    // Local control variables 

    HTuple hv_lineCenterX = null, hv_lineCenterY = null;
    HTuple hv_Phi = null, hv_xDirOld = null, hv_yDirOld = null;
    HTuple hv_xDirNew = null, hv_yDirNew = null, hv_newRadian = null;
    HTuple hv_newHeight = null, hv_maxLength = null, hv_selectedIndex = null;
    HTuple hv_numEdges = null, hv_Index = new HTuple(), hv_Length = new HTuple();
    HTuple hv_Nr = null, hv_Nc = null, hv_Dist = null, hv_Indices = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_findLineRegion);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced);
    HOperatorSet.GenEmptyObj(out ho_Edges);
    HOperatorSet.GenEmptyObj(out ho_Edge);
    hv_RowBegin = new HTuple();
    hv_ColBegin = new HTuple();
    hv_RowEnd = new HTuple();
    hv_ColEnd = new HTuple();
    hv_EdgesX = new HTuple();
    hv_EdgesY = new HTuple();
    try
    {
      hv_lineCenterX = (hv_lineX1+hv_lineX2)/2.0;
      hv_lineCenterY = (hv_lineY1+hv_lineY2)/2.0;
      HOperatorSet.LineOrientation(hv_lineY1, hv_lineX1, hv_lineY2, hv_lineX2, out hv_Phi);
      hv_xDirOld = hv_radian.TupleCos();
      hv_yDirOld = hv_radian.TupleSin();

      hv_xDirNew = ((hv_Phi+((new HTuple(90)).TupleRad()))).TupleCos();
      hv_yDirNew = ((hv_Phi+((new HTuple(90)).TupleRad()))).TupleSin();

      if ((int)(new HTuple((((hv_xDirOld*hv_xDirNew)+(hv_yDirOld*hv_yDirNew))).TupleLess(
          0))) != 0)
      {
        hv_yDirNew = -hv_yDirNew;
        hv_xDirNew = -hv_xDirNew;
      }

      hv_newRadian = hv_yDirNew.TupleAtan2(hv_xDirNew);

      HOperatorSet.DistancePp(hv_lineY1, hv_lineX1, hv_lineY2, hv_lineX2, out hv_newHeight);

      ho_findLineRegion.Dispose();
      HOperatorSet.GenRectangle2(out ho_findLineRegion, hv_lineCenterY, hv_lineCenterX, 
          hv_newRadian, hv_newWidth, hv_newHeight/2);
      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_inputImage, ho_inputRegion, out ho_ImageReduced
          );
      ho_Edges.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced, out ho_Edges, "canny", hv_sigma, 
          hv_cannyLow, hv_cannyHigh);


      hv_maxLength = 0;
      hv_selectedIndex = 0;
      HOperatorSet.CountObj(ho_Edges, out hv_numEdges);
      if ((int)(new HTuple(hv_numEdges.TupleGreater(1))) != 0)
      {
        HTuple end_val27 = hv_numEdges;
        HTuple step_val27 = 1;
        for (hv_Index=1; hv_Index.Continue(end_val27, step_val27); hv_Index = hv_Index.TupleAdd(step_val27))
        {
          ho_Edge.Dispose();
          HOperatorSet.SelectObj(ho_Edges, out ho_Edge, hv_Index);
          HOperatorSet.LengthXld(ho_Edge, out hv_Length);
          if ((int)(new HTuple(hv_Length.TupleGreater(hv_maxLength))) != 0)
          {
            hv_maxLength = hv_Length.Clone();
            hv_selectedIndex = hv_Index.Clone();
          }
        }
        {
        HObject ExpTmpOutVar_0;
        HOperatorSet.SelectObj(ho_Edges, out ExpTmpOutVar_0, hv_selectedIndex);
        ho_Edges.Dispose();
        ho_Edges = ExpTmpOutVar_0;
        }

      }

      ho_findLineRegion.Dispose();
      ho_findLineRegion = ho_Edges.CopyObj(1,-1);

      if ((int)(new HTuple(hv_EdgesOnly.TupleEqual("true"))) != 0)
      {
        HOperatorSet.GetContourXld(ho_Edges, out hv_EdgesY, out hv_EdgesX);
        ho_ImageReduced.Dispose();
        ho_Edges.Dispose();
        ho_Edge.Dispose();

        return;
      }

      HOperatorSet.FitLineContourXld(ho_Edges, "tukey", -1, 0, 5, 2, out hv_RowBegin, 
          out hv_ColBegin, out hv_RowEnd, out hv_ColEnd, out hv_Nr, out hv_Nc, out hv_Dist);

      if ((int)(new HTuple((new HTuple(hv_Dist.TupleLength())).TupleGreater(1))) != 0)
      {
        HOperatorSet.TupleSortIndex(hv_Dist, out hv_Indices);
        hv_RowBegin = hv_RowBegin.TupleSelect(1);
        hv_ColBegin = hv_ColBegin.TupleSelect(1);
        hv_RowEnd = hv_RowEnd.TupleSelect(1);
        hv_ColEnd = hv_ColEnd.TupleSelect(1);
      }
      ho_ImageReduced.Dispose();
      ho_Edges.Dispose();
      ho_Edge.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_ImageReduced.Dispose();
      ho_Edges.Dispose();
      ho_Edge.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void AngledLineThatPasses (HTuple hv_centerX, HTuple hv_centerY, HTuple hv_radian, 
      out HTuple hv_x1, out HTuple hv_y1)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_m = null, hv_b = null;
    // Initialize local and output iconic variables 

    hv_m = hv_radian.TupleTan();
    hv_b = hv_centerY-(hv_m*hv_centerX);

    hv_x1 = hv_centerX+100;
    hv_y1 = (hv_m*hv_x1)+hv_b;




    return;
  }

  public void _getUnmarkedBoundary (HTuple hv_boundarySearched, HTuple hv_m, HTuple hv_b, 
      HTuple hv_imageWidth, HTuple hv_imageHeight, out HTuple hv_x, out HTuple hv_y)
  {


    // Initialize local and output iconic variables 
    hv_x = new HTuple();
    hv_y = new HTuple();



    return;
  }

  public void _search_boundary (HTuple hv_boundariesToSearch, HTuple hv_m, HTuple hv_b, 
      HTuple hv_imageWidth, HTuple hv_imageHeight, out HTuple hv_result, out HTuple hv_x, 
      out HTuple hv_y)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_hasElement = null, hv_hasNull = null;
    // Initialize local and output iconic variables 
    hv_result = new HTuple();
    hv_x = new HTuple();
    hv_y = new HTuple();
    //down
    StringTupleContains(hv_boundariesToSearch, "down", out hv_hasElement);
    StringTupleContains(hv_boundariesToSearch, "null", out hv_hasNull);

    if ((int)((new HTuple(hv_hasElement.TupleEqual("true"))).TupleOr(new HTuple(hv_hasNull.TupleEqual(
        "true")))) != 0)
    {
      hv_y = hv_imageHeight-1;
      hv_x = (hv_y-hv_b)/hv_m;

      if ((int)((new HTuple(hv_x.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_x.TupleLess(
          hv_imageWidth)))) != 0)
      {
        hv_result = "down";

        return;
      }
    }

    //up
    StringTupleContains(hv_boundariesToSearch, "up", out hv_hasElement);
    StringTupleContains(hv_boundariesToSearch, "null", out hv_hasNull);

    if ((int)((new HTuple(hv_hasElement.TupleEqual("true"))).TupleOr(new HTuple(hv_hasNull.TupleEqual(
        "true")))) != 0)
    {
      hv_y = 0;
      hv_x = (hv_y-hv_b)/hv_m;

      if ((int)((new HTuple(hv_x.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_x.TupleLess(
          hv_imageWidth)))) != 0)
      {
        hv_result = "up";

        return;
      }
    }

    //left
    StringTupleContains(hv_boundariesToSearch, "left", out hv_hasElement);
    StringTupleContains(hv_boundariesToSearch, "null", out hv_hasNull);

    if ((int)((new HTuple(hv_hasElement.TupleEqual("true"))).TupleOr(new HTuple(hv_hasNull.TupleEqual(
        "true")))) != 0)
    {
      hv_x = 0;
      hv_y = (hv_m*hv_x)+hv_b;

      if ((int)((new HTuple(hv_y.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_y.TupleLess(
          hv_imageHeight)))) != 0)
      {
        hv_result = "left";

        return;
      }
    }


    //right
    StringTupleContains(hv_boundariesToSearch, "right", out hv_hasElement);
    StringTupleContains(hv_boundariesToSearch, "null", out hv_hasNull);

    if ((int)((new HTuple(hv_hasElement.TupleEqual("true"))).TupleOr(new HTuple(hv_hasNull.TupleEqual(
        "true")))) != 0)
    {
      hv_x = hv_imageWidth-1;
      hv_y = (hv_m*hv_x)+hv_b;

      if ((int)((new HTuple(hv_y.TupleGreaterEqual(0))).TupleAnd(new HTuple(hv_y.TupleLess(
          hv_imageHeight)))) != 0)
      {
        hv_result = "right";

        return;
      }
    }

    hv_result = "null";


    return;
  }

  public void StringTupleContains (HTuple hv_listOfString, HTuple hv_targetString, 
      out HTuple hv_hasElement)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_i = null;
    // Initialize local and output iconic variables 
    hv_hasElement = new HTuple();
    for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_listOfString.TupleLength()))-1); hv_i = (int)hv_i + 1)
    {
      if ((int)(new HTuple(((hv_listOfString.TupleSelect(hv_i))).TupleEqual(hv_targetString))) != 0)
      {
        hv_hasElement = "true";

        return;
      }
    }

    hv_hasElement = "false";


    return;
  }

  public void GetWeightByNamme (HTuple hv_nameList, HTuple hv_weightList, HTuple hv_name, 
      out HTuple hv_weight)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_nameLen = null, hv_weightLen = null;
    HTuple hv_i = null;
    // Initialize local and output iconic variables 
    hv_weight = new HTuple();
    hv_nameLen = new HTuple(hv_nameList.TupleLength());
    hv_weightLen = new HTuple(hv_weightList.TupleLength());

    if ((int)(new HTuple(hv_nameLen.TupleNotEqual(hv_weightLen))) != 0)
    {
      throw new HalconException("nameLen != weightLen!!!!!!!!!");
    }

    HTuple end_val7 = hv_nameLen-1;
    HTuple step_val7 = 1;
    for (hv_i=0; hv_i.Continue(end_val7, step_val7); hv_i = hv_i.TupleAdd(step_val7))
    {
      if ((int)(new HTuple(((hv_nameList.TupleSelect(hv_i))).TupleEqual(hv_name))) != 0)
      {
        hv_weight = hv_weightList.TupleSelect(hv_i);

        return;
      }

    }

    throw new HalconException("Name does not exist");


    return;
  }

  public void I94BottomViewMeasure (HObject ho_Image, out HObject ho_FindLineRegions, 
      out HObject ho_LineRegions, HTuple hv_ModelID, HTuple hv_XCoeff, HTuple hv_YCoeff, 
      HTuple hv_FAINames, HTuple hv_FAIWeights, HTuple hv_FAIBiases, out HTuple hv_IntersectsX, 
      out HTuple hv_IntersectsY, out HTuple hv_Outputs, out HTuple hv_OutputsPixel, 
      out HTuple hv_PointsXUsed, out HTuple hv_PointsYUsed, out HTuple hv_PointsXIgnored, 
      out HTuple hv_PointsYIgnored)
  {




    // Stack for temporary objects 
    HObject[] OTemp = new HObject[20];

    // Local iconic variables 

    HObject ho_findLineRegionTop, ho_lineRegionTop;
    HObject ho_findLineRegionLeft, ho_lineRegionLeft, ho_findLineRegion;
    HObject ho_lineRegion, ho_ROI_0, ho_ImageReduced1, ho_ImageMean1;
    HObject ho_mask, ho_ImageReduced2, ho_Edges2, ho_SelectedContours;
    HObject ho_UnionContours, ho_outputContour, ho_ContCircle;
    HObject ho_Circle, ho_lineRegion1, ho_ROI_FAI26_TL, ho_ImageReduced;
    HObject ho_Edges1, ho_Cross1, ho_ROI_FAI26_BL, ho_Cross2;
    HObject ho_ROI_FAI26_TR, ho_Cross3, ho_ROI_FAI26_BR, ho_Region;
    HObject ho_ConnectedRegions, ho_SelectedRegions, ho_RegionDilation;
    HObject ho_image_intersection, ho_Edges, ho_UnionContours2;
    HObject ho_SelectedXLD, ho_ContCircle1, ho_Rectangle;

    // Local control variables 

    HTuple hv_modelRow = null, hv_modelCol = null;
    HTuple hv_Row = null, hv_Column = null, hv_Angle = null;
    HTuple hv_Score = null, hv_MovementOfItem = null, hv_FAI21_P1_LEN = null;
    HTuple hv_FAI21_P2_LEN = null, hv_FAI21_P3_LEN = null;
    HTuple hv_FAI21_MID_LEN = null, hv_FAI23_P1_LEN = null;
    HTuple hv_FAI23_P2_LEN = null, hv_FAI23_P3_LEN = null;
    HTuple hv_FAI23_MID_LEN = null, hv_FAI24_P1_LEN = null;
    HTuple hv_FAI24_P2_LEN = null, hv_FAI24_P3_LEN = null;
    HTuple hv_FAI26_LEN = null, hv_FAI27_P1_LEN = null, hv_FAI27_P2_LEN = null;
    HTuple hv_FAI27_P3_LEN = null, hv_FAI28_X_LEN = null, hv_FAI28_Y_LEN = null;
    HTuple hv_FAI29_P1_LEN = null, hv_FAI29_P2_LEN = null;
    HTuple hv_FAI29_P3_LEN = null, hv_FAI31_LEFT_LEN = null;
    HTuple hv_FAI31_RIGHT_LEN = null, hv_FAI31_CENTERY_LEN = null;
    HTuple hv_FAI31_CENTERX_LEN = null, hv_FAI32_X1_LEN = null;
    HTuple hv_FAI32_X2_LEN = null, hv_FAI32_Y1_LEN = null;
    HTuple hv_FAI32_Y2_LEN = null, hv_FAI33_V_LEN = null, hv_FAI33_H_LEN = null;
    HTuple hv_FAI123_P1_LEN = null, hv_FAI123_P2_LEN = null;
    HTuple hv_FAI123_P3_LEN = null, hv_Threshold = null, hv_MapToWorld = null;
    HTuple hv_MapToImage = null, hv_sigma2 = null, hv_row1TopBase = null;
    HTuple hv_col1TopBase = null, hv_radianTopBase = null;
    HTuple hv_len1TopBase = null, hv_len2TopBase = null, hv_row1TopBase1 = null;
    HTuple hv_col1TopBase1 = null, hv_radianTopBase1 = null;
    HTuple hv_len1TopBase1 = null, hv_len2TopBase1 = null;
    HTuple hv_row1TopBase2 = null, hv_col1TopBase2 = null;
    HTuple hv_radianTopBase2 = null, hv_len1TopBase2 = null;
    HTuple hv_len2TopBase2 = null, hv_lineX1TopBase = null;
    HTuple hv_lineY1TopBase = null, hv_lineX2TopBase = null;
    HTuple hv_lineY2TopBase = null, hv_ptsXUsed = null, hv_ptsYUsed = null;
    HTuple hv_ptsXIgnored = null, hv_ptsYIgnored = null, hv_row1LeftBase = null;
    HTuple hv_col1LeftBase = null, hv_radianLeftBase = null;
    HTuple hv_len1LeftBase = null, hv_len2LeftBase = null;
    HTuple hv_row1LeftBase1 = null, hv_col1LeftBase1 = null;
    HTuple hv_radianLeftBase1 = null, hv_len1LeftBase1 = null;
    HTuple hv_len2LeftBase1 = null, hv_lineX1LeftBase = null;
    HTuple hv_lineY1LeftBase = null, hv_lineX2LeftBase = null;
    HTuple hv_lineY2LeftBase = null, hv_row1FAI21LeftUpper = null;
    HTuple hv_col1FAI21LeftUpper = null, hv_radianFAI21LeftUpper = null;
    HTuple hv_len1FAI21LeftUpper = null, hv_len2FAI21LeftUpper = null;
    HTuple hv_row1FAI21LeftLower = null, hv_col1FAI21LeftLower = null;
    HTuple hv_radianFAI21LeftLower = null, hv_len1FAI21LeftLower = null;
    HTuple hv_len2FAI21LeftLower = null, hv_row1FAI21Left = null;
    HTuple hv_col1FAI21Left = null, hv_radianFAI21Left = null;
    HTuple hv_len1FAI21Left = null, hv_len2FAI21Left = null;
    HTuple hv_lineX1_FAI21_LEFT = null, hv_lineY1_FAI21_LEFT = null;
    HTuple hv_lineX2_FAI21_LEFT = null, hv_lineY2_FAI21_LEFT = null;
    HTuple hv_row1FAI21RightUpper = null, hv_col1FAI21RightUpper = null;
    HTuple hv_radianFAI21RightUpper = null, hv_len1FAI21RightUpper = null;
    HTuple hv_len2FAI21RightUpper = null, hv_row1FAI21RightLower = null;
    HTuple hv_col1FAI21RightLower = null, hv_radianFAI21RightLower = null;
    HTuple hv_len1FAI21RightLower = null, hv_len2FAI21RightLower = null;
    HTuple hv_row1FAI21Right = null, hv_col1FAI21Right = null;
    HTuple hv_radianFAI21Right = null, hv_len1FAI21Right = null;
    HTuple hv_len2FAI21Right = null, hv_lineX1_FAI21_Right = null;
    HTuple hv_lineY1_FAI21_Right = null, hv_lineX2_FAI21_Right = null;
    HTuple hv_lineY2_FAI21_Right = null, hv_X1_FAI21_LINE_H_P1 = null;
    HTuple hv_Y1_FAI21_LINE_H_P1 = null, hv_X2_FAI21_LINE_H_P1 = null;
    HTuple hv_Y2_FAI21_LINE_H_P1 = null, hv_X1_FAI21_LINE_H_P3 = null;
    HTuple hv_Y1_FAI21_LINE_H_P3 = null, hv_X2_FAI21_LINE_H_P3 = null;
    HTuple hv_Y2_FAI21_LINE_H_P3 = null, hv_intersectY_LEFT = null;
    HTuple hv_intersectX_LEFT = null, hv_IsOverlapping = null;
    HTuple hv_intersectY_RIGHT = null, hv_intersectX_RIGHT = null;
    HTuple hv_Distance = null, hv_rectX1 = null, hv_rectY1 = null;
    HTuple hv_rectRadian = null, hv_rectLen1 = null, hv_rectLen2 = null;
    HTuple hv_lineX1_FAI23_TOP = null, hv_lineY1_FAI23_TOP = null;
    HTuple hv_lineX2_FAI23_TOP = null, hv_lineY2_FAI23_TOP = null;
    HTuple hv_rect1X1 = null, hv_rect1Y1 = null, hv_rect1Radian = null;
    HTuple hv_rect1Len1 = null, hv_rect1Len2 = null, hv_rect2X1 = null;
    HTuple hv_rect2Y1 = null, hv_rect2Radian = null, hv_rect2Len1 = null;
    HTuple hv_rect2Len2 = null, hv_rect3X1 = null, hv_rect3Y1 = null;
    HTuple hv_rect3Radian = null, hv_rect3Len1 = null, hv_rect3Len2 = null;
    HTuple hv_lineX1_FAI23_BOTTOM = null, hv_lineY1_FAI23_BOTTOM = null;
    HTuple hv_lineX2_FAI23_BOTTOM = null, hv_lineY2_FAI23_BOTTOM = null;
    HTuple hv_X1_FAI23_P1 = null, hv_Y1_FAI23_P1 = null, hv_X2_FAI23_P1 = null;
    HTuple hv_Y2_FAI23_P1 = null, hv_X1_FAI23_P3 = null, hv_Y1_FAI23_P3 = null;
    HTuple hv_X2_FAI23_P3 = null, hv_Y2_FAI23_P3 = null, hv_intersectY_TOP = null;
    HTuple hv_intersectX_TOP = null, hv_intersectY_BOTTOM = null;
    HTuple hv_intersectX_BOTTOM = null, hv_lineX1_FAI24_LEFT = null;
    HTuple hv_lineY1_FAI24_LEFT = null, hv_lineX2_FAI24_LEFT = null;
    HTuple hv_lineY2_FAI24_LEFT = null, hv_lineX1_FAI24_RIGHT = null;
    HTuple hv_lineY1_FAI24_RIGHT = null, hv_lineX2_FAI24_RIGHT = null;
    HTuple hv_lineY2_FAI24_RIGHT = null, hv_X1_FAI24_LINE_H_P2 = null;
    HTuple hv_Y1_FAI24_LINE_H_P2 = null, hv_X2_FAI24_LINE_H_P2 = null;
    HTuple hv_Y2_FAI24_LINE_H_P2 = null, hv_Radius = null;
    HTuple hv_StartPhi = null, hv_EndPhi = null, hv_PointOrder = null;
    HTuple hv_diameterPixel = null, hv_DistancePixelY = null;
    HTuple hv_DistancePixelX = null, hv_distance = null, hv_X1_FAI26_LEFT = null;
    HTuple hv_Y1_FAI26_LEFT = null, hv_X2_FAI26_LEFT = null;
    HTuple hv_Y2_FAI26_LEFT = null, hv_X1_FAI26_RIGHT = null;
    HTuple hv_Y1_FAI26_RIGHT = null, hv_X2_FAI26_RIGHT = null;
    HTuple hv_Y2_FAI26_RIGHT = null, hv_rowTL_FAI26 = null;
    HTuple hv_colTL_FAI26 = null, hv_IsOverlapping3 = null;
    HTuple hv_rowBL_FAI26 = null, hv_colBL_FAI26 = null, hv_rowTR_FAI26 = null;
    HTuple hv_colTR_FAI26 = null, hv_rowBR_FAI26 = null, hv_colBR_FAI26 = null;
    HTuple hv_distPixel = null, hv_lineX1_FAI27_TOP = null;
    HTuple hv_lineY1_FAI27_TOP = null, hv_lineX2_FAI27_TOP = null;
    HTuple hv_lineY2_FAI27_TOP = null, hv_lineX1_FAI27_BOTTOM = null;
    HTuple hv_lineY1_FAI27_BOTTOM = null, hv_lineX2_FAI27_BOTTOM = null;
    HTuple hv_lineY2_FAI27_BOTTOM = null, hv_rowRightCircle = null;
    HTuple hv_colRightCircle = null, hv_radRightCircle = null;
    HTuple hv_X1_FAI27_P2 = null, hv_Y1_FAI27_P2 = null, hv_X2_FAI27_P2 = null;
    HTuple hv_Y2_FAI27_P2 = null, hv_intersectY = null, hv_intersectX = null;
    HTuple hv_distancePixel = null, hv_X1H = null, hv_Y1H = null;
    HTuple hv_X2H = null, hv_Y2H = null, hv_X1V = null, hv_Y1V = null;
    HTuple hv_X2V = null, hv_Y2V = null, hv_centerY = null;
    HTuple hv_centerX = null, hv_IsOverlapping9 = null, hv_lineX1_FAI29_LEFT = null;
    HTuple hv_lineY1_FAI29_LEFT = null, hv_lineX2_FAI29_LEFT = null;
    HTuple hv_lineY2_FAI29_LEFT = null, hv_lineX1_FAI29_RIGHT = null;
    HTuple hv_lineY1_FAI29_RIGHT = null, hv_lineX2_FAI29_RIGHT = null;
    HTuple hv_lineY2_FAI29_RIGHT = null, hv_X1_FAI29_LINE_H_P2 = null;
    HTuple hv_Y1_FAI29_LINE_H_P2 = null, hv_X2_FAI29_LINE_H_P2 = null;
    HTuple hv_Y2_FAI29_LINE_H_P2 = null, hv_lineX1_FAI31_TOPLEFT = null;
    HTuple hv_lineY1_FAI31_TOPLEFT = null, hv_lineX2_FAI31_TOPLEFT = null;
    HTuple hv_lineY2_FAI31_TOPLEFT = null, hv_lineX1_FAI31_BOTTOMLEFT = null;
    HTuple hv_lineY1_FAI31_BOTTOMLEFT = null, hv_lineX2_FAI31_BOTTOMLEFT = null;
    HTuple hv_lineY2_FAI31_BOTTOMLEFT = null, hv_lineX1_FAI31_TOPRIGHT = null;
    HTuple hv_lineY1_FAI31_TOPRIGHT = null, hv_lineX2_FAI31_TOPRIGHT = null;
    HTuple hv_lineY2_FAI31_TOPRIGHT = null, hv_lineX1_FAI31_BOTTOMRIGHT = null;
    HTuple hv_lineY1_FAI31_BOTTOMRIGHT = null, hv_lineX2_FAI31_BOTTOMRIGHT = null;
    HTuple hv_lineY2_FAI31_BOTTOMRIGHT = null, hv_X1_X_1 = null;
    HTuple hv_Y1_X_1 = null, hv_X2_X_1 = null, hv_Y2_X_1 = null;
    HTuple hv_ptY_TL = null, hv_ptX_TL = null, hv_IsOverlapping1 = null;
    HTuple hv_ptY_BL = null, hv_ptX_BL = null, hv_X1_X_2 = null;
    HTuple hv_Y1_X_2 = null, hv_X2_X_2 = null, hv_Y2_X_2 = null;
    HTuple hv_ptY_TR = null, hv_ptX_TR = null, hv_ptY_BR = null;
    HTuple hv_ptX_BR = null, hv_ptY = null, hv_ptX = null;
    HTuple hv_IsOverlapping2 = null, hv_IsOverlapping8 = null;
    HTuple hv_intersectY_TL = null, hv_intersectX_TL = null;
    HTuple hv_IsOverlapping5 = null, hv_intersectY_BL = null;
    HTuple hv_intersectX_BL = null, hv_intersectY_TR = null;
    HTuple hv_intersectX_TR = null, hv_intersectY_BR = null;
    HTuple hv_intersectX_BR = null, hv_X1_L6 = null, hv_Y1_L6 = null;
    HTuple hv_X2_L6 = null, hv_Y2_L6 = null, hv_X1_Y_1 = null;
    HTuple hv_Y1_Y_1 = null, hv_X2_Y_1 = null, hv_Y2_Y_1 = null;
    HTuple hv_intersectY_LT = null, hv_intersectX_LT = null;
    HTuple hv_IsOverlapping6 = null, hv_intersectY_RT = null;
    HTuple hv_intersectX_RT = null, hv_X1_Y_2 = null, hv_Y1_Y_2 = null;
    HTuple hv_X2_Y_2 = null, hv_Y2_Y_2 = null, hv_intersectY_LB = null;
    HTuple hv_intersectX_LB = null, hv_intersectY_RB = null;
    HTuple hv_intersectX_RB = null, hv_X1_L5 = null, hv_Y1_L5 = null;
    HTuple hv_X2_L5 = null, hv_Y2_L5 = null, hv_centerY_FAI32 = null;
    HTuple hv_centerX_FAI32 = null, hv_IsOverlapping7 = null;
    HTuple hv_L6_ROW1 = null, hv_L6_COL1 = null, hv_L6_ROW2 = null;
    HTuple hv_L6_COL2 = null, hv_L5_ROW1 = null, hv_L5_COL1 = null;
    HTuple hv_L5_ROW2 = null, hv_L5_COL2 = null, hv_centerY_FAI33 = null;
    HTuple hv_centerX_FAI33 = null, hv_IsOverlapping4 = null;
    HTuple hv_lineX1 = null, hv_lineY1 = null, hv_lineX2 = null;
    HTuple hv_lineY2 = null, hv_P1_X1 = null, hv_P1_Y1 = null;
    HTuple hv_P1_X2 = null, hv_P1_Y2 = null, hv_rowP1_TOP = null;
    HTuple hv_colP1_TOP = null, hv_IsOverlapping10 = null;
    HTuple hv_rowP1_BOTTOM = null, hv_colP1_BOTTOM = null;
    HTuple hv_P2_X1 = null, hv_P2_Y1 = null, hv_P2_X2 = null;
    HTuple hv_P2_Y2 = null, hv_rowP2_TOP = null, hv_colP2_TOP = null;
    HTuple hv_rowP2_BOTTOM = null, hv_colP2_BOTTOM = null;
    HTuple hv_P3_X1 = null, hv_P3_Y1 = null, hv_P3_X2 = null;
    HTuple hv_P3_Y2 = null, hv_rowP3_TOP = null, hv_colP3_TOP = null;
    HTuple hv_rowP3_BOTTOM = null, hv_colP3_BOTTOM = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_FindLineRegions);
    HOperatorSet.GenEmptyObj(out ho_LineRegions);
    HOperatorSet.GenEmptyObj(out ho_findLineRegionTop);
    HOperatorSet.GenEmptyObj(out ho_lineRegionTop);
    HOperatorSet.GenEmptyObj(out ho_findLineRegionLeft);
    HOperatorSet.GenEmptyObj(out ho_lineRegionLeft);
    HOperatorSet.GenEmptyObj(out ho_findLineRegion);
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    HOperatorSet.GenEmptyObj(out ho_ROI_0);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced1);
    HOperatorSet.GenEmptyObj(out ho_ImageMean1);
    HOperatorSet.GenEmptyObj(out ho_mask);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced2);
    HOperatorSet.GenEmptyObj(out ho_Edges2);
    HOperatorSet.GenEmptyObj(out ho_SelectedContours);
    HOperatorSet.GenEmptyObj(out ho_UnionContours);
    HOperatorSet.GenEmptyObj(out ho_outputContour);
    HOperatorSet.GenEmptyObj(out ho_ContCircle);
    HOperatorSet.GenEmptyObj(out ho_Circle);
    HOperatorSet.GenEmptyObj(out ho_lineRegion1);
    HOperatorSet.GenEmptyObj(out ho_ROI_FAI26_TL);
    HOperatorSet.GenEmptyObj(out ho_ImageReduced);
    HOperatorSet.GenEmptyObj(out ho_Edges1);
    HOperatorSet.GenEmptyObj(out ho_Cross1);
    HOperatorSet.GenEmptyObj(out ho_ROI_FAI26_BL);
    HOperatorSet.GenEmptyObj(out ho_Cross2);
    HOperatorSet.GenEmptyObj(out ho_ROI_FAI26_TR);
    HOperatorSet.GenEmptyObj(out ho_Cross3);
    HOperatorSet.GenEmptyObj(out ho_ROI_FAI26_BR);
    HOperatorSet.GenEmptyObj(out ho_Region);
    HOperatorSet.GenEmptyObj(out ho_ConnectedRegions);
    HOperatorSet.GenEmptyObj(out ho_SelectedRegions);
    HOperatorSet.GenEmptyObj(out ho_RegionDilation);
    HOperatorSet.GenEmptyObj(out ho_image_intersection);
    HOperatorSet.GenEmptyObj(out ho_Edges);
    HOperatorSet.GenEmptyObj(out ho_UnionContours2);
    HOperatorSet.GenEmptyObj(out ho_SelectedXLD);
    HOperatorSet.GenEmptyObj(out ho_ContCircle1);
    HOperatorSet.GenEmptyObj(out ho_Rectangle);
    try
    {
      //TODO: make top axis as auxillary axis

      hv_modelRow = 1166.78;
      hv_modelCol = 2205;

      HOperatorSet.FindShapeModel(ho_Image, hv_ModelID, -0.39, 0.79, 0.2, 1, 0.5, 
          "least_squares", 0, 0.9, out hv_Row, out hv_Column, out hv_Angle, out hv_Score);
      HOperatorSet.VectorAngleToRigid(0, 0, 0, hv_Row, hv_Column, hv_Angle, out hv_MovementOfItem);
      if (HDevWindowStack.IsOpen())
      {
        HOperatorSet.DispObj(ho_Image, HDevWindowStack.GetActive());
      }

      hv_FAI21_P1_LEN = 20.362/hv_YCoeff;
      hv_FAI21_P2_LEN = 25.362/hv_YCoeff;
      hv_FAI21_P3_LEN = 30.362/hv_YCoeff;
      hv_FAI21_MID_LEN = 9.299/hv_XCoeff;

      hv_FAI23_P1_LEN = 5.299/hv_XCoeff;
      hv_FAI23_P2_LEN = 9.299/hv_XCoeff;
      hv_FAI23_P3_LEN = 13.299/hv_XCoeff;
      hv_FAI23_MID_LEN = 25.362/hv_YCoeff;

      hv_FAI24_P1_LEN = 6.705/hv_YCoeff;
      hv_FAI24_P2_LEN = 7.885/hv_YCoeff;
      hv_FAI24_P3_LEN = 9.065/hv_YCoeff;

      hv_FAI26_LEN = 0.6/hv_XCoeff;

      hv_FAI27_P1_LEN = 23.137/hv_XCoeff;
      hv_FAI27_P2_LEN = 24.434/hv_XCoeff;
      hv_FAI27_P3_LEN = 25.731/hv_XCoeff;

      hv_FAI28_X_LEN = 24.434/hv_XCoeff;
      hv_FAI28_Y_LEN = 16.624/hv_YCoeff;

      hv_FAI29_P1_LEN = 15.327/hv_YCoeff;
      hv_FAI29_P2_LEN = 16.623/hv_YCoeff;
      hv_FAI29_P3_LEN = 17.919/hv_YCoeff;


      hv_FAI31_LEFT_LEN = 2.203/hv_XCoeff;
      hv_FAI31_RIGHT_LEN = 16.395/hv_XCoeff;
      hv_FAI31_CENTERY_LEN = 25.362/hv_YCoeff;
      hv_FAI31_CENTERX_LEN = 9.299/hv_XCoeff;


      hv_FAI32_X1_LEN = 5.5/hv_XCoeff;
      hv_FAI32_X2_LEN = 13.2/hv_XCoeff;
      hv_FAI32_Y1_LEN = 21.0/hv_YCoeff;
      hv_FAI32_Y2_LEN = 30.1/hv_YCoeff;

      hv_FAI33_V_LEN = 7.886/hv_YCoeff;
      hv_FAI33_H_LEN = 9.299/hv_XCoeff;

      hv_FAI123_P1_LEN = 3/hv_XCoeff;
      hv_FAI123_P2_LEN = 9.269/hv_XCoeff;
      hv_FAI123_P3_LEN = 15.5/hv_XCoeff;


      hv_PointsXUsed = new HTuple();
      hv_PointsYUsed = new HTuple();
      hv_PointsXIgnored = new HTuple();
      hv_PointsYIgnored = new HTuple();
      hv_IntersectsX = new HTuple();
      hv_IntersectsY = new HTuple();

      hv_Outputs = new HTuple();
      hv_OutputsPixel = new HTuple();

      hv_Threshold = 30;
      hv_MapToWorld = 0;
      hv_MapToImage = 0;
      hv_sigma2 = 5;

      //Find top base line
      hv_row1TopBase = 137-hv_modelRow;
      hv_col1TopBase = 2217-hv_modelCol;
      hv_radianTopBase = (new HTuple(-91)).TupleRad();
      hv_len1TopBase = 187;
      hv_len2TopBase = 107;

      hv_row1TopBase1 = 137-hv_modelRow;
      hv_col1TopBase1 = 1628-hv_modelCol;
      hv_radianTopBase1 = (new HTuple(-91)).TupleRad();
      hv_len1TopBase1 = 187;
      hv_len2TopBase1 = 107;

      hv_row1TopBase2 = 137-hv_modelRow;
      hv_col1TopBase2 = 2876-hv_modelCol;
      hv_radianTopBase2 = (new HTuple(-91)).TupleRad();
      hv_len1TopBase2 = 187;
      hv_len2TopBase2 = 160;

      hv_row1TopBase = ((hv_row1TopBase.TupleConcat(hv_row1TopBase1))).TupleConcat(
          hv_row1TopBase2);
      hv_col1TopBase = ((hv_col1TopBase.TupleConcat(hv_col1TopBase1))).TupleConcat(
          hv_col1TopBase2);
      hv_radianTopBase = ((hv_radianTopBase.TupleConcat(hv_radianTopBase1))).TupleConcat(
          hv_radianTopBase2);
      hv_len1TopBase = ((hv_len1TopBase.TupleConcat(hv_len1TopBase1))).TupleConcat(
          hv_len1TopBase2);
      hv_len2TopBase = ((hv_len2TopBase.TupleConcat(hv_len2TopBase1))).TupleConcat(
          hv_len2TopBase2);

      AffineTransRect2(hv_row1TopBase, hv_col1TopBase, hv_radianTopBase, hv_len1TopBase, 
          hv_len2TopBase, hv_MovementOfItem, out hv_row1TopBase, out hv_col1TopBase, 
          out hv_radianTopBase, out hv_len1TopBase, out hv_len2TopBase);

      ho_findLineRegionTop.Dispose();ho_lineRegionTop.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegionTop, out ho_lineRegionTop, 
          "negative", hv_row1TopBase, hv_col1TopBase, hv_radianTopBase, hv_len1TopBase, 
          hv_len2TopBase, 10, ((((hv_Threshold-10)).TupleConcat(hv_Threshold-10))).TupleConcat(
          hv_Threshold-10), "first", 0.3, "false", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1TopBase, out hv_lineY1TopBase, out hv_lineX2TopBase, out hv_lineY2TopBase, 
          out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, out hv_ptsYIgnored);
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);


      //Find left base line
      hv_row1LeftBase = 2607-hv_modelRow;
      hv_col1LeftBase = 995-hv_modelCol;
      hv_radianLeftBase = (new HTuple(-1)).TupleRad();
      hv_len1LeftBase = 441;
      hv_len2LeftBase = 281;

      hv_row1LeftBase1 = 4216-hv_modelRow;
      hv_col1LeftBase1 = 995-hv_modelCol;
      hv_radianLeftBase1 = (new HTuple(-1)).TupleRad();
      hv_len1LeftBase1 = 441;
      hv_len2LeftBase1 = 281;

      hv_row1LeftBase = hv_row1LeftBase.TupleConcat(hv_row1LeftBase1);
      hv_col1LeftBase = hv_col1LeftBase.TupleConcat(hv_col1LeftBase1);
      hv_radianLeftBase = hv_radianLeftBase.TupleConcat(hv_radianLeftBase1);
      hv_len1LeftBase = hv_len1LeftBase.TupleConcat(hv_len1LeftBase1);
      hv_len2LeftBase = hv_len2LeftBase.TupleConcat(hv_len2LeftBase1);

      AffineTransRect2(hv_row1LeftBase, hv_col1LeftBase, hv_radianLeftBase, hv_len1LeftBase, 
          hv_len2LeftBase, hv_MovementOfItem, out hv_row1LeftBase, out hv_col1LeftBase, 
          out hv_radianLeftBase, out hv_len1LeftBase, out hv_len2LeftBase);

      ho_findLineRegionLeft.Dispose();ho_lineRegionLeft.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegionLeft, out ho_lineRegionLeft, 
          "negative", hv_row1LeftBase, hv_col1LeftBase, hv_radianLeftBase, hv_len1LeftBase, 
          hv_len2LeftBase, 10, hv_Threshold.TupleConcat(hv_Threshold), "first", 0.2, 
          "true", 1, hv_sigma2, 5120, 5120, 5, 60, 30, out hv_lineX1LeftBase, out hv_lineY1LeftBase, 
          out hv_lineX2LeftBase, out hv_lineY2LeftBase, out hv_ptsXUsed, out hv_ptsYUsed, 
          out hv_ptsXIgnored, out hv_ptsYIgnored);
      ho_FindLineRegions.Dispose();
      HOperatorSet.ConcatObj(ho_findLineRegionTop, ho_findLineRegionLeft, out ho_FindLineRegions
          );
      ho_LineRegions.Dispose();
      HOperatorSet.ConcatObj(ho_lineRegionTop, ho_lineRegionLeft, out ho_LineRegions
          );
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);


      //******************************FAI21*******************************
      //left
      hv_row1FAI21LeftUpper = 2825-hv_modelRow;
      hv_col1FAI21LeftUpper = 1033-hv_modelCol;
      hv_radianFAI21LeftUpper = (new HTuple(178.5)).TupleRad();
      hv_len1FAI21LeftUpper = 210;
      hv_len2FAI21LeftUpper = 140;

      hv_row1FAI21LeftLower = 4009-hv_modelRow;
      hv_col1FAI21LeftLower = 1052-hv_modelCol;
      hv_radianFAI21LeftLower = (new HTuple(178)).TupleRad();
      hv_len1FAI21LeftLower = 210;
      hv_len2FAI21LeftLower = 115;
      hv_row1FAI21Left = new HTuple();
      hv_row1FAI21Left = hv_row1FAI21Left.TupleConcat(hv_row1FAI21LeftUpper);
      hv_row1FAI21Left = hv_row1FAI21Left.TupleConcat(hv_row1FAI21LeftLower);
      hv_col1FAI21Left = new HTuple();
      hv_col1FAI21Left = hv_col1FAI21Left.TupleConcat(hv_col1FAI21LeftUpper);
      hv_col1FAI21Left = hv_col1FAI21Left.TupleConcat(hv_col1FAI21LeftLower);
      hv_radianFAI21Left = new HTuple();
      hv_radianFAI21Left = hv_radianFAI21Left.TupleConcat(hv_radianFAI21LeftUpper);
      hv_radianFAI21Left = hv_radianFAI21Left.TupleConcat(hv_radianFAI21LeftLower);
      hv_len1FAI21Left = new HTuple();
      hv_len1FAI21Left = hv_len1FAI21Left.TupleConcat(hv_len1FAI21LeftUpper);
      hv_len1FAI21Left = hv_len1FAI21Left.TupleConcat(hv_len1FAI21LeftLower);
      hv_len2FAI21Left = new HTuple();
      hv_len2FAI21Left = hv_len2FAI21Left.TupleConcat(hv_len2FAI21LeftUpper);
      hv_len2FAI21Left = hv_len2FAI21Left.TupleConcat(hv_len2FAI21LeftLower);
      AffineTransRect2(hv_row1FAI21Left, hv_col1FAI21Left, hv_radianFAI21Left, hv_len1FAI21Left, 
          hv_len2FAI21Left, hv_MovementOfItem, out hv_row1FAI21Left, out hv_col1FAI21Left, 
          out hv_radianFAI21Left, out hv_len1FAI21Left, out hv_len2FAI21Left);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_row1FAI21Left, hv_col1FAI21Left, hv_radianFAI21Left, hv_len1FAI21Left, 
          hv_len2FAI21Left, 10, hv_Threshold.TupleConcat(hv_Threshold), "first", 
          0.2, "true", 1, 2, 5120, 5120, 5, 60, 30, out hv_lineX1_FAI21_LEFT, out hv_lineY1_FAI21_LEFT, 
          out hv_lineX2_FAI21_LEFT, out hv_lineY2_FAI21_LEFT, out hv_ptsXUsed, out hv_ptsYUsed, 
          out hv_ptsXIgnored, out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //right
      hv_row1FAI21RightUpper = 2869-hv_modelRow;
      hv_col1FAI21RightUpper = 3305-hv_modelCol;
      hv_radianFAI21RightUpper = (new HTuple(-1.5)).TupleRad();
      hv_len1FAI21RightUpper = 243;
      hv_len2FAI21RightUpper = 121;

      hv_row1FAI21RightLower = 4034-hv_modelRow;
      hv_col1FAI21RightLower = 3285-hv_modelCol;
      hv_radianFAI21RightLower = (new HTuple(-1)).TupleRad();
      hv_len1FAI21RightLower = 243;
      hv_len2FAI21RightLower = 121;

      hv_row1FAI21Right = new HTuple();
      hv_row1FAI21Right = hv_row1FAI21Right.TupleConcat(hv_row1FAI21RightUpper);
      hv_row1FAI21Right = hv_row1FAI21Right.TupleConcat(hv_row1FAI21RightLower);
      hv_col1FAI21Right = new HTuple();
      hv_col1FAI21Right = hv_col1FAI21Right.TupleConcat(hv_col1FAI21RightUpper);
      hv_col1FAI21Right = hv_col1FAI21Right.TupleConcat(hv_col1FAI21RightLower);
      hv_radianFAI21Right = new HTuple();
      hv_radianFAI21Right = hv_radianFAI21Right.TupleConcat(hv_radianFAI21RightUpper);
      hv_radianFAI21Right = hv_radianFAI21Right.TupleConcat(hv_radianFAI21RightLower);
      hv_len1FAI21Right = new HTuple();
      hv_len1FAI21Right = hv_len1FAI21Right.TupleConcat(hv_len1FAI21RightUpper);
      hv_len1FAI21Right = hv_len1FAI21Right.TupleConcat(hv_len1FAI21RightLower);
      hv_len2FAI21Right = new HTuple();
      hv_len2FAI21Right = hv_len2FAI21Right.TupleConcat(hv_len2FAI21RightUpper);
      hv_len2FAI21Right = hv_len2FAI21Right.TupleConcat(hv_len2FAI21RightLower);
      AffineTransRect2(hv_row1FAI21Right, hv_col1FAI21Right, hv_radianFAI21Right, 
          hv_len1FAI21Right, hv_len2FAI21Right, hv_MovementOfItem, out hv_row1FAI21Right, 
          out hv_col1FAI21Right, out hv_radianFAI21Right, out hv_len1FAI21Right, 
          out hv_len2FAI21Right);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_row1FAI21Right, hv_col1FAI21Right, hv_radianFAI21Right, 
          hv_len1FAI21Right, hv_len2FAI21Right, 10, hv_Threshold.TupleConcat(hv_Threshold), 
          "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 30, out hv_lineX1_FAI21_Right, 
          out hv_lineY1_FAI21_Right, out hv_lineX2_FAI21_Right, out hv_lineY2_FAI21_Right, 
          out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //Mid

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI21_P1_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_FAI21_LINE_H_P1, out hv_Y1_FAI21_LINE_H_P1, out hv_X2_FAI21_LINE_H_P1, 
          out hv_Y2_FAI21_LINE_H_P1);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI21_P3_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_FAI21_LINE_H_P3, out hv_Y1_FAI21_LINE_H_P3, out hv_X2_FAI21_LINE_H_P3, 
          out hv_Y2_FAI21_LINE_H_P3);

      //Left intersections and distances
      HOperatorSet.IntersectionLines(hv_lineY1_FAI21_LEFT, hv_lineX1_FAI21_LEFT, 
          hv_lineY2_FAI21_LEFT, hv_lineX2_FAI21_LEFT, hv_Y1_FAI21_LINE_H_P1, hv_X1_FAI21_LINE_H_P1, 
          hv_Y2_FAI21_LINE_H_P1, hv_X2_FAI21_LINE_H_P1, out hv_intersectY_LEFT, out hv_intersectX_LEFT, 
          out hv_IsOverlapping);
      HOperatorSet.IntersectionLines(hv_lineY1_FAI21_Right, hv_lineX1_FAI21_Right, 
          hv_lineY2_FAI21_Right, hv_lineX2_FAI21_Right, hv_Y1_FAI21_LINE_H_P1, hv_X1_FAI21_LINE_H_P1, 
          hv_Y2_FAI21_LINE_H_P1, hv_X2_FAI21_LINE_H_P1, out hv_intersectY_RIGHT, 
          out hv_intersectX_RIGHT, out hv_IsOverlapping);
      HOperatorSet.DistancePp(hv_intersectY_LEFT, hv_intersectX_LEFT, hv_intersectY_RIGHT, 
          hv_intersectX_RIGHT, out hv_Distance);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_LEFT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_LEFT);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_RIGHT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_RIGHT);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);


      HOperatorSet.IntersectionLines(hv_lineY1_FAI21_LEFT, hv_lineX1_FAI21_LEFT, 
          hv_lineY2_FAI21_LEFT, hv_lineX2_FAI21_LEFT, hv_Y1_FAI21_LINE_H_P3, hv_X1_FAI21_LINE_H_P3, 
          hv_Y2_FAI21_LINE_H_P3, hv_X2_FAI21_LINE_H_P3, out hv_intersectY_LEFT, out hv_intersectX_LEFT, 
          out hv_IsOverlapping);
      HOperatorSet.IntersectionLines(hv_lineY1_FAI21_Right, hv_lineX1_FAI21_Right, 
          hv_lineY2_FAI21_Right, hv_lineX2_FAI21_Right, hv_Y1_FAI21_LINE_H_P3, hv_X1_FAI21_LINE_H_P3, 
          hv_Y2_FAI21_LINE_H_P3, hv_X2_FAI21_LINE_H_P3, out hv_intersectY_RIGHT, 
          out hv_intersectX_RIGHT, out hv_IsOverlapping);
      HOperatorSet.DistancePp(hv_intersectY_LEFT, hv_intersectX_LEFT, hv_intersectY_RIGHT, 
          hv_intersectX_RIGHT, out hv_Distance);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_LEFT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_LEFT);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_RIGHT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_RIGHT);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);


      //************************FAI23****************************
      //Top line
      hv_rectX1 = 2210-hv_modelCol;
      hv_rectY1 = 2210-hv_modelRow;
      hv_rectRadian = (new HTuple(-91)).TupleRad();
      hv_rectLen1 = 230;
      hv_rectLen2 = 549;

      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold+10, "first", 0.2, "false", 1, hv_sigma2, 5120, 5120, 5, 
          60, 30, out hv_lineX1_FAI23_TOP, out hv_lineY1_FAI23_TOP, out hv_lineX2_FAI23_TOP, 
          out hv_lineY2_FAI23_TOP, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //Bottom line
      hv_rect1X1 = 1602-hv_modelCol;
      hv_rect1Y1 = 4603-hv_modelRow;
      hv_rect1Radian = (new HTuple(-90)).TupleRad();
      hv_rect1Len1 = 150;
      hv_rect1Len2 = 102;

      hv_rect2X1 = 2178-hv_modelCol;
      hv_rect2Y1 = 4617-hv_modelRow;
      hv_rect2Radian = (new HTuple(-90)).TupleRad();
      hv_rect2Len1 = 150;
      hv_rect2Len2 = 150;

      hv_rect3X1 = 2709-hv_modelCol;
      hv_rect3Y1 = 4623-hv_modelRow;
      hv_rect3Radian = (new HTuple(-90)).TupleRad();
      hv_rect3Len1 = 150;
      hv_rect3Len2 = 102;

      hv_rectX1 = new HTuple();
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect1X1);
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect2X1);
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect3X1);
      hv_rectY1 = new HTuple();
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect1Y1);
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect2Y1);
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect3Y1);
      hv_rectRadian = new HTuple();
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect1Radian);
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect2Radian);
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect3Radian);
      hv_rectLen1 = new HTuple();
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect1Len1);
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect2Len1);
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect3Len1);
      hv_rectLen2 = new HTuple();
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect1Len2);
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect2Len2);
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect3Len2);
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, ((hv_Threshold.TupleConcat(hv_Threshold))).TupleConcat(hv_Threshold), 
          "first", 0.2, "false", 1, hv_sigma2, 5120, 5120, 5, 60, 30, out hv_lineX1_FAI23_BOTTOM, 
          out hv_lineY1_FAI23_BOTTOM, out hv_lineX2_FAI23_BOTTOM, out hv_lineY2_FAI23_BOTTOM, 
          out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //Intersection points
      //TranslateLineInWorldCoordinateAndConvertBack (lineX1TopBase, lineY1TopBase, lineX2TopBase, lineY2TopBase, FAI23_MID_LEN, MapToWorld, MapToImage, 'false', X1_FAI23_LINE_H, Y1_FAI23_LINE_H, X2_FAI23_LINE_H, Y2_FAI23_LINE_H)

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI23_P1_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1_FAI23_P1, out hv_Y1_FAI23_P1, out hv_X2_FAI23_P1, out hv_Y2_FAI23_P1);
      //TranslateLineInWorldCoordinateAndConvertBack (lineX1LeftBase, lineY1LeftBase, lineX2LeftBase, lineY2LeftBase, FAI23_P2_LEN, MapToWorld, MapToImage, 'true', X1_FAI23_P2, Y1_FAI23_P2, X2_FAI23_P2, Y2_FAI23_P2)
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI23_P3_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1_FAI23_P3, out hv_Y1_FAI23_P3, out hv_X2_FAI23_P3, out hv_Y2_FAI23_P3);




      //BOTTOM intersections and distances
      HOperatorSet.IntersectionLines(hv_lineY1_FAI23_TOP, hv_lineX1_FAI23_TOP, hv_lineY2_FAI23_TOP, 
          hv_lineX2_FAI23_TOP, hv_Y1_FAI23_P1, hv_X1_FAI23_P1, hv_Y2_FAI23_P1, hv_X2_FAI23_P1, 
          out hv_intersectY_TOP, out hv_intersectX_TOP, out hv_IsOverlapping);
      HOperatorSet.IntersectionLines(hv_lineY1_FAI23_BOTTOM, hv_lineX1_FAI23_BOTTOM, 
          hv_lineY2_FAI23_BOTTOM, hv_lineX2_FAI23_BOTTOM, hv_Y1_FAI23_P1, hv_X1_FAI23_P1, 
          hv_Y2_FAI23_P1, hv_X2_FAI23_P1, out hv_intersectY_BOTTOM, out hv_intersectX_BOTTOM, 
          out hv_IsOverlapping);
      HOperatorSet.DistancePp(hv_intersectY_TOP, hv_intersectX_TOP, hv_intersectY_BOTTOM, 
          hv_intersectX_BOTTOM, out hv_Distance);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_TOP);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_TOP);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_BOTTOM);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_BOTTOM);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);


      HOperatorSet.IntersectionLines(hv_lineY1_FAI23_TOP, hv_lineX1_FAI23_TOP, hv_lineY2_FAI23_TOP, 
          hv_lineX2_FAI23_TOP, hv_Y1_FAI23_P3, hv_X1_FAI23_P3, hv_Y2_FAI23_P3, hv_X2_FAI23_P3, 
          out hv_intersectY_TOP, out hv_intersectX_TOP, out hv_IsOverlapping);
      HOperatorSet.IntersectionLines(hv_lineY1_FAI23_BOTTOM, hv_lineX1_FAI23_BOTTOM, 
          hv_lineY2_FAI23_BOTTOM, hv_lineX2_FAI23_BOTTOM, hv_Y1_FAI23_P3, hv_X1_FAI23_P3, 
          hv_Y2_FAI23_P3, hv_X2_FAI23_P3, out hv_intersectY_BOTTOM, out hv_intersectX_BOTTOM, 
          out hv_IsOverlapping);
      HOperatorSet.DistancePp(hv_intersectY_TOP, hv_intersectX_TOP, hv_intersectY_BOTTOM, 
          hv_intersectX_BOTTOM, out hv_Distance);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_TOP);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_TOP);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_BOTTOM);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_BOTTOM);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      //*****************************FAI24************************
      hv_rectX1 = 1429-hv_modelCol;
      hv_rectY1 = 1148-hv_modelRow;
      hv_rectRadian = (new HTuple(-1)).TupleRad();
      hv_rectLen1 = 153;
      hv_rectLen2 = 140;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, 1, 5120, 5120, 5, 60, 30, out hv_lineX1_FAI24_LEFT, 
          out hv_lineY1_FAI24_LEFT, out hv_lineX2_FAI24_LEFT, out hv_lineY2_FAI24_LEFT, 
          out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      hv_rectX1 = 2991-hv_modelCol;
      hv_rectY1 = 1186-hv_modelRow;
      hv_rectRadian = (new HTuple(179)).TupleRad();
      hv_rectLen1 = 147;
      hv_rectLen2 = 140;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI24_RIGHT, out hv_lineY1_FAI24_RIGHT, out hv_lineX2_FAI24_RIGHT, 
          out hv_lineY2_FAI24_RIGHT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI24_P2_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_FAI24_LINE_H_P2, out hv_Y1_FAI24_LINE_H_P2, out hv_X2_FAI24_LINE_H_P2, 
          out hv_Y2_FAI24_LINE_H_P2);


      HOperatorSet.IntersectionLines(hv_lineY1_FAI24_LEFT, hv_lineX1_FAI24_LEFT, 
          hv_lineY2_FAI24_LEFT, hv_lineX2_FAI24_LEFT, hv_Y1_FAI24_LINE_H_P2, hv_X1_FAI24_LINE_H_P2, 
          hv_Y2_FAI24_LINE_H_P2, hv_X2_FAI24_LINE_H_P2, out hv_intersectY_LEFT, out hv_intersectX_LEFT, 
          out hv_IsOverlapping);
      HOperatorSet.IntersectionLines(hv_lineY1_FAI24_RIGHT, hv_lineX1_FAI24_RIGHT, 
          hv_lineY2_FAI24_RIGHT, hv_lineX2_FAI24_RIGHT, hv_Y1_FAI24_LINE_H_P2, hv_X1_FAI24_LINE_H_P2, 
          hv_Y2_FAI24_LINE_H_P2, hv_X2_FAI24_LINE_H_P2, out hv_intersectY_RIGHT, 
          out hv_intersectX_RIGHT, out hv_IsOverlapping);
      HOperatorSet.DistancePp(hv_intersectY_LEFT, hv_intersectX_LEFT, hv_intersectY_RIGHT, 
          hv_intersectX_RIGHT, out hv_Distance);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_LEFT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_LEFT);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX_RIGHT);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY_RIGHT);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);



      //***************************FAI25************************
      hv_rectX1 = 2195-hv_modelCol;
      hv_rectY1 = 1202-hv_modelRow;
      hv_rectRadian = (new HTuple(-90)).TupleRad();
      hv_rectLen1 = 900;
      hv_rectLen2 = 600;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_ROI_0.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_0, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);
      ho_ImageReduced1.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_0, out ho_ImageReduced1);
      ho_ImageMean1.Dispose();
      HOperatorSet.MeanImage(ho_ImageReduced1, out ho_ImageMean1, 9, 9);
      ho_mask.Dispose();
      HOperatorSet.Threshold(ho_ImageMean1, out ho_mask, 70, 255);
      ho_ImageReduced2.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_mask, out ho_ImageReduced2);
      ho_Edges2.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced2, out ho_Edges2, "canny", 3, 15, 30);
      ho_SelectedContours.Dispose();
      HOperatorSet.SelectContoursXld(ho_Edges2, out ho_SelectedContours, "contour_length", 
          500, 999999, -0.5, 0.5);
      ho_UnionContours.Dispose();
      HOperatorSet.UnionCocircularContoursXld(ho_SelectedContours, out ho_UnionContours, 
          (new HTuple(180)).TupleRad(), (new HTuple(5)).TupleRad(), (new HTuple(180)).TupleRad()
          , 2000, 10, 50, "true", 3);
      ho_outputContour.Dispose();
      LongestXLD(ho_UnionContours, out ho_outputContour);
      HOperatorSet.FitCircleContourXld(ho_outputContour, "algebraic", -1, 0, 0, 3, 
          2, out hv_Row, out hv_Column, out hv_Radius, out hv_StartPhi, out hv_EndPhi, 
          out hv_PointOrder);
      ho_ContCircle.Dispose();
      HOperatorSet.GenCircleContourXld(out ho_ContCircle, hv_Row, hv_Column, hv_Radius, 
          hv_StartPhi, hv_StartPhi+((new HTuple(360)).TupleRad()), "positive", 1);

      ho_Circle.Dispose();
      HOperatorSet.GenCircle(out ho_Circle, hv_Row, hv_Column, hv_Radius);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_Circle, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_diameterPixel = hv_Radius*2;
      hv_Outputs = hv_Outputs.TupleConcat(hv_diameterPixel*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_diameterPixel);

      HOperatorSet.DistancePl(hv_Row, hv_Column, hv_lineY1TopBase, hv_lineX1TopBase, 
          hv_lineY2TopBase, hv_lineX2TopBase, out hv_DistancePixelY);
      HOperatorSet.DistancePl(hv_Row, hv_Column, hv_lineY1LeftBase, hv_lineX1LeftBase, 
          hv_lineY2LeftBase, hv_lineX2LeftBase, out hv_DistancePixelX);
      hv_distance = (((hv_DistancePixelY*hv_DistancePixelY)+(hv_DistancePixelX*hv_DistancePixelX))).TupleSqrt()
          ;
      hv_Outputs = hv_Outputs.TupleConcat(hv_distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distance);





      //*****************************FAI26***********************
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1_FAI24_LEFT, hv_lineY1_FAI24_LEFT, 
          hv_lineX2_FAI24_LEFT, hv_lineY2_FAI24_LEFT, hv_FAI26_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_X1_FAI26_LEFT, out hv_Y1_FAI26_LEFT, out hv_X2_FAI26_LEFT, 
          out hv_Y2_FAI26_LEFT);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1_FAI24_RIGHT, hv_lineY1_FAI24_RIGHT, 
          hv_lineX2_FAI24_RIGHT, hv_lineY2_FAI24_RIGHT, -hv_FAI26_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_X1_FAI26_RIGHT, out hv_Y1_FAI26_RIGHT, out hv_X2_FAI26_RIGHT, 
          out hv_Y2_FAI26_RIGHT);
      ho_lineRegion1.Dispose();
      GenLineRegion(out ho_lineRegion1, hv_X1_FAI26_LEFT, hv_Y1_FAI26_LEFT, hv_X2_FAI26_LEFT, 
          hv_Y2_FAI26_LEFT, 5120, 5120);

      //top left point
      hv_rectX1 = 1500-hv_modelCol;
      hv_rectY1 = 941-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 256;
      hv_rectLen2 = 160;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_ROI_FAI26_TL.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_FAI26_TL, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);
      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_FAI26_TL, out ho_ImageReduced);
      ho_Edges1.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced, out ho_Edges1, "canny", 1, 20, 40);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_Edges1, out ExpTmpOutVar_0);
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      LongestXLD(ho_Edges1, out ExpTmpOutVar_0);
      ho_Edges1.Dispose();
      ho_Edges1 = ExpTmpOutVar_0;
      }
      HOperatorSet.IntersectionLineContourXld(ho_Edges1, hv_Y1_FAI26_LEFT, hv_X1_FAI26_LEFT, 
          hv_Y2_FAI26_LEFT, hv_X2_FAI26_LEFT, out hv_rowTL_FAI26, out hv_colTL_FAI26, 
          out hv_IsOverlapping3);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colTL_FAI26);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowTL_FAI26);
      ho_Cross1.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross1, hv_rowTL_FAI26, hv_colTL_FAI26, 
          100, 0);

      //bottom left point
      hv_rectX1 = 1467-hv_modelCol;
      hv_rectY1 = 1372-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 135;
      hv_rectLen2 = 80;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_ROI_FAI26_BL.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_FAI26_BL, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);

      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_FAI26_BL, out ho_ImageReduced);
      ho_Edges1.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced, out ho_Edges1, "canny", 1, 20, 40);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_Edges1, out ExpTmpOutVar_0);
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      LongestXLD(ho_Edges1, out ExpTmpOutVar_0);
      ho_Edges1.Dispose();
      ho_Edges1 = ExpTmpOutVar_0;
      }
      HOperatorSet.IntersectionLineContourXld(ho_Edges1, hv_Y1_FAI26_LEFT, hv_X1_FAI26_LEFT, 
          hv_Y2_FAI26_LEFT, hv_X2_FAI26_LEFT, out hv_rowBL_FAI26, out hv_colBL_FAI26, 
          out hv_IsOverlapping3);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colBL_FAI26);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowBL_FAI26);
      ho_Cross2.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross2, hv_rowBL_FAI26, hv_colBL_FAI26, 
          100, 100);

      //top RIGHT point
      hv_rectX1 = 2918-hv_modelCol;
      hv_rectY1 = 965-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 217;
      hv_rectLen2 = 134;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_ROI_FAI26_TR.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_FAI26_TR, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);

      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_FAI26_TR, out ho_ImageReduced);
      ho_Edges1.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced, out ho_Edges1, "canny", 1, 20, 40);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_Edges1, out ExpTmpOutVar_0);
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }

      {
      HObject ExpTmpOutVar_0;
      LongestXLD(ho_Edges1, out ExpTmpOutVar_0);
      ho_Edges1.Dispose();
      ho_Edges1 = ExpTmpOutVar_0;
      }
      HOperatorSet.IntersectionLineContourXld(ho_Edges1, hv_Y1_FAI26_RIGHT, hv_X1_FAI26_RIGHT, 
          hv_Y2_FAI26_RIGHT, hv_X2_FAI26_RIGHT, out hv_rowTR_FAI26, out hv_colTR_FAI26, 
          out hv_IsOverlapping3);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colTR_FAI26);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowTR_FAI26);
      ho_Cross3.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross3, hv_rowTR_FAI26, hv_colTR_FAI26, 
          100, 0);

      //bottom RIGHT point
      hv_rectX1 = 2888-hv_modelCol;
      hv_rectY1 = 1416-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 217;
      hv_rectLen2 = 134;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_ROI_FAI26_BR.Dispose();
      HOperatorSet.GenRectangle2(out ho_ROI_FAI26_BR, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);
      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_FAI26_BR, out ho_ImageReduced);
      ho_Edges1.Dispose();
      HOperatorSet.EdgesSubPix(ho_ImageReduced, out ho_Edges1, "canny", 1, 20, 40);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_Edges1, out ExpTmpOutVar_0);
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }

      {
      HObject ExpTmpOutVar_0;
      LongestXLD(ho_Edges1, out ExpTmpOutVar_0);
      ho_Edges1.Dispose();
      ho_Edges1 = ExpTmpOutVar_0;
      }
      HOperatorSet.IntersectionLineContourXld(ho_Edges1, hv_Y1_FAI26_RIGHT, hv_X1_FAI26_RIGHT, 
          hv_Y2_FAI26_RIGHT, hv_X2_FAI26_RIGHT, out hv_rowBR_FAI26, out hv_colBR_FAI26, 
          out hv_IsOverlapping3);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colBR_FAI26);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowBR_FAI26);

      HOperatorSet.AngleLl(hv_rowTL_FAI26, hv_colTL_FAI26, hv_rowBL_FAI26, hv_colBL_FAI26, 
          hv_lineY1LeftBase, hv_lineX1LeftBase, hv_lineY2LeftBase, hv_lineX2LeftBase, 
          out hv_Angle);
      HOperatorSet.DistancePp(hv_rowTL_FAI26, hv_colTL_FAI26, hv_rowBL_FAI26, hv_colBL_FAI26, 
          out hv_Distance);
      hv_distPixel = hv_Distance*(hv_Angle.TupleCos());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distPixel*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distPixel);

      HOperatorSet.AngleLl(hv_rowTR_FAI26, hv_colTR_FAI26, hv_rowBR_FAI26, hv_colBR_FAI26, 
          hv_lineY1LeftBase, hv_lineX1LeftBase, hv_lineY2LeftBase, hv_lineX2LeftBase, 
          out hv_Angle);
      HOperatorSet.DistancePp(hv_rowTR_FAI26, hv_colTR_FAI26, hv_rowBR_FAI26, hv_colBR_FAI26, 
          out hv_Distance);
      hv_distPixel = hv_Distance*(hv_Angle.TupleCos());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distPixel*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distPixel);
      //**********************FAI27***************************
      //Top line
      hv_rectX1 = 4137-hv_modelCol;
      hv_rectY1 = 1770-hv_modelRow;
      hv_rectRadian = (new HTuple(-90)).TupleRad();
      hv_rectLen1 = 108;
      hv_rectLen2 = 144;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "false", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI27_TOP, out hv_lineY1_FAI27_TOP, out hv_lineX2_FAI27_TOP, 
          out hv_lineY2_FAI27_TOP, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //Bottom line

      hv_rectX1 = 4129-hv_modelCol;
      hv_rectY1 = 2862-hv_modelRow;
      hv_rectRadian = (new HTuple(90)).TupleRad();
      hv_rectLen1 = 121;
      hv_rectLen2 = 150;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "false", 1, hv_sigma2, 5120, 5120, 5, 40, 
          20, out hv_lineX1_FAI27_BOTTOM, out hv_lineY1_FAI27_BOTTOM, out hv_lineX2_FAI27_BOTTOM, 
          out hv_lineY2_FAI27_BOTTOM, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      //Intersection points

      ho_ROI_0.Dispose();
      HOperatorSet.GenRectangle1(out ho_ROI_0, 1077.9, 2786.7, 3970.7, 4905.1);
      ho_ImageReduced.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_ROI_0, out ho_ImageReduced);
      ho_Region.Dispose();
      HOperatorSet.Threshold(ho_ImageReduced, out ho_Region, 100, 255);
      ho_ConnectedRegions.Dispose();
      HOperatorSet.Connection(ho_Region, out ho_ConnectedRegions);

      ho_SelectedRegions.Dispose();
      HOperatorSet.SelectShape(ho_ConnectedRegions, out ho_SelectedRegions, "area", 
          "and", 800000, 1200000);
      ho_RegionDilation.Dispose();
      HOperatorSet.DilationCircle(ho_SelectedRegions, out ho_RegionDilation, 35);

      ho_image_intersection.Dispose();
      HOperatorSet.ReduceDomain(ho_Image, ho_RegionDilation, out ho_image_intersection
          );
      ho_Edges.Dispose();
      HOperatorSet.EdgesSubPix(ho_image_intersection, out ho_Edges, "canny", 1, 10, 
          20);

      ho_UnionContours2.Dispose();
      HOperatorSet.UnionAdjacentContoursXld(ho_Edges, out ho_UnionContours2, 1000, 
          1000, "attr_keep");
      ho_SelectedXLD.Dispose();
      LongestXLD(ho_UnionContours2, out ho_SelectedXLD);
      HOperatorSet.SmallestCircleXld(ho_SelectedXLD, out hv_rowRightCircle, out hv_colRightCircle, 
          out hv_radRightCircle);
      //fit_circle_contour_xld (SelectedXLD, 'algebraic', -1, 0, 0, 3, 2, rowRightCircle, colRightCircle, radRightCircle, StartPhi1, EndPhi1, PointOrder1)
      ho_ContCircle1.Dispose();
      HOperatorSet.GenCircleContourXld(out ho_ContCircle1, hv_rowRightCircle, hv_colRightCircle, 
          hv_radRightCircle, 0, (new HTuple(360)).TupleRad(), "positive", 1);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_ContCircle1, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI27_P2_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1_FAI27_P2, out hv_Y1_FAI27_P2, out hv_X2_FAI27_P2, out hv_Y2_FAI27_P2);

      HOperatorSet.IntersectionLines(hv_lineY1_FAI27_TOP, hv_lineX1_FAI27_TOP, hv_lineY2_FAI27_TOP, 
          hv_lineX2_FAI27_TOP, hv_Y1_FAI27_P2, hv_X1_FAI27_P2, hv_Y2_FAI27_P2, hv_X2_FAI27_P2, 
          out hv_intersectY, out hv_intersectX, out hv_IsOverlapping);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY);
      HOperatorSet.DistancePp(hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_distancePixel);
      HOperatorSet.AngleLl(hv_lineY1LeftBase, hv_lineX1LeftBase, hv_lineY2LeftBase, 
          hv_lineX2LeftBase, hv_intersectY, hv_intersectX, hv_rowRightCircle, hv_colRightCircle, 
          out hv_Angle);
      hv_distancePixel = hv_distancePixel*(((hv_Angle.TupleCos())).TupleAbs());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distancePixel*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distancePixel);



      HOperatorSet.IntersectionLines(hv_lineY1_FAI27_BOTTOM, hv_lineX1_FAI27_BOTTOM, 
          hv_lineY2_FAI27_BOTTOM, hv_lineX2_FAI27_BOTTOM, hv_Y1_FAI27_P2, hv_X1_FAI27_P2, 
          hv_Y2_FAI27_P2, hv_X2_FAI27_P2, out hv_intersectY, out hv_intersectX, out hv_IsOverlapping);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY);
      //distance p2 bottom
      HOperatorSet.DistancePp(hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_distancePixel);
      HOperatorSet.AngleLl(hv_lineY1LeftBase, hv_lineX1LeftBase, hv_lineY2LeftBase, 
          hv_lineX2LeftBase, hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_Angle);
      hv_distancePixel = hv_distancePixel*(((hv_Angle.TupleCos())).TupleAbs());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distancePixel*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distancePixel);


      //******************FAI28***********************
      hv_diameterPixel = hv_radRightCircle*2;
      hv_Outputs = hv_Outputs.TupleConcat(hv_diameterPixel*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_diameterPixel);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI28_Y_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1H, out hv_Y1H, out hv_X2H, out hv_Y2H);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI28_X_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1V, out hv_Y1V, out hv_X2V, out hv_Y2V);
      HOperatorSet.IntersectionLines(hv_Y1V, hv_X1V, hv_Y2V, hv_X2V, hv_Y1H, hv_X1H, 
          hv_Y2H, hv_X2H, out hv_centerY, out hv_centerX, out hv_IsOverlapping9);

      HOperatorSet.DistancePp(hv_centerY, hv_centerX, hv_rowRightCircle, hv_colRightCircle, 
          out hv_distancePixel);
      hv_Outputs = hv_Outputs.TupleConcat(hv_distancePixel*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distancePixel);

      //*******************************FAI29*****************************
      hv_rectX1 = 3592-hv_modelCol;
      hv_rectY1 = 2306-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 173;
      hv_rectLen2 = 135;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI29_LEFT, out hv_lineY1_FAI29_LEFT, out hv_lineX2_FAI29_LEFT, 
          out hv_lineY2_FAI29_LEFT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      hv_rectX1 = 4675-hv_modelCol;
      hv_rectY1 = 2331-hv_modelRow;
      hv_rectRadian = (new HTuple(0)).TupleRad();
      hv_rectLen1 = 173;
      hv_rectLen2 = 122;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold-10, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 
          40, 20, out hv_lineX1_FAI29_RIGHT, out hv_lineY1_FAI29_RIGHT, out hv_lineX2_FAI29_RIGHT, 
          out hv_lineY2_FAI29_RIGHT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI29_P2_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_FAI29_LINE_H_P2, out hv_Y1_FAI29_LINE_H_P2, out hv_X2_FAI29_LINE_H_P2, 
          out hv_Y2_FAI29_LINE_H_P2);


      //Left intersections and distances

      HOperatorSet.IntersectionLines(hv_lineY1_FAI29_LEFT, hv_lineX1_FAI29_LEFT, 
          hv_lineY2_FAI29_LEFT, hv_lineX2_FAI29_LEFT, hv_Y1_FAI29_LINE_H_P2, hv_X1_FAI29_LINE_H_P2, 
          hv_Y2_FAI29_LINE_H_P2, hv_X2_FAI29_LINE_H_P2, out hv_intersectY, out hv_intersectX, 
          out hv_IsOverlapping);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY);
      HOperatorSet.DistancePp(hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_distancePixel);
      HOperatorSet.AngleLl(hv_lineY1TopBase, hv_lineX1TopBase, hv_lineY2TopBase, 
          hv_lineX2TopBase, hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_Angle);
      hv_distancePixel = hv_distancePixel*(((hv_Angle.TupleCos())).TupleAbs());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distancePixel*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distancePixel);

      //RIGHT intersections and distances
      HOperatorSet.IntersectionLines(hv_lineY1_FAI29_RIGHT, hv_lineX1_FAI29_RIGHT, 
          hv_lineY2_FAI29_RIGHT, hv_lineX2_FAI29_RIGHT, hv_Y1_FAI29_LINE_H_P2, hv_X1_FAI29_LINE_H_P2, 
          hv_Y2_FAI29_LINE_H_P2, hv_X2_FAI29_LINE_H_P2, out hv_intersectY, out hv_intersectX, 
          out hv_IsOverlapping);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY);
      HOperatorSet.DistancePp(hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_distancePixel);
      HOperatorSet.AngleLl(hv_lineY1TopBase, hv_lineX1TopBase, hv_lineY2TopBase, 
          hv_lineX2TopBase, hv_rowRightCircle, hv_colRightCircle, hv_intersectY, 
          hv_intersectX, out hv_Angle);
      hv_distancePixel = hv_distancePixel*(((hv_Angle.TupleCos())).TupleAbs());
      hv_Outputs = hv_Outputs.TupleConcat(hv_distancePixel*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_distancePixel);
      //*************************FAI31**********************************
      hv_rectX1 = 1282-hv_modelCol;
      hv_rectY1 = 2396-hv_modelRow;
      hv_rectRadian = (new HTuple(-45)).TupleRad();
      hv_rectLen1 = 181;
      hv_rectLen2 = 194;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI31_TOPLEFT, out hv_lineY1_FAI31_TOPLEFT, out hv_lineX2_FAI31_TOPLEFT, 
          out hv_lineY2_FAI31_TOPLEFT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);


      hv_rectX1 = 1231-hv_modelCol;
      hv_rectY1 = 4380-hv_modelRow;
      hv_rectRadian = (new HTuple(43)).TupleRad();
      hv_rectLen1 = 186;
      hv_rectLen2 = 178;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "positive", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI31_BOTTOMLEFT, out hv_lineY1_FAI31_BOTTOMLEFT, out hv_lineX2_FAI31_BOTTOMLEFT, 
          out hv_lineY2_FAI31_BOTTOMLEFT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      hv_rectX1 = 3119-hv_modelCol;
      hv_rectY1 = 2453-hv_modelRow;
      hv_rectRadian = (new HTuple(43)).TupleRad();
      hv_rectLen1 = 186;
      hv_rectLen2 = 204;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold-10, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 
          60, 30, out hv_lineX1_FAI31_TOPRIGHT, out hv_lineY1_FAI31_TOPRIGHT, out hv_lineX2_FAI31_TOPRIGHT, 
          out hv_lineY2_FAI31_TOPRIGHT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);


      hv_rectX1 = 3087-hv_modelCol;
      hv_rectY1 = 4399-hv_modelRow;
      hv_rectRadian = (new HTuple(-45)).TupleRad();
      hv_rectLen1 = 181;
      hv_rectLen2 = 194;
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          "negative", hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          10, hv_Threshold, "first", 0.2, "true", 1, hv_sigma2, 5120, 5120, 5, 60, 
          30, out hv_lineX1_FAI31_BOTTOMRIGHT, out hv_lineY1_FAI31_BOTTOMRIGHT, out hv_lineX2_FAI31_BOTTOMRIGHT, 
          out hv_lineY2_FAI31_BOTTOMRIGHT, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, 
          out hv_ptsYIgnored);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI31_LEFT_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_X1_X_1, out hv_Y1_X_1, out hv_X2_X_1, out hv_Y2_X_1);
      HOperatorSet.IntersectionLines(hv_Y1_X_1, hv_X1_X_1, hv_Y2_X_1, hv_X2_X_1, 
          hv_lineY1_FAI31_TOPLEFT, hv_lineX1_FAI31_TOPLEFT, hv_lineY2_FAI31_TOPLEFT, 
          hv_lineX2_FAI31_TOPLEFT, out hv_ptY_TL, out hv_ptX_TL, out hv_IsOverlapping1);
      HOperatorSet.IntersectionLines(hv_Y1_X_1, hv_X1_X_1, hv_Y2_X_1, hv_X2_X_1, 
          hv_lineY1_FAI31_BOTTOMLEFT, hv_lineX1_FAI31_BOTTOMLEFT, hv_lineY2_FAI31_BOTTOMLEFT, 
          hv_lineX2_FAI31_BOTTOMLEFT, out hv_ptY_BL, out hv_ptX_BL, out hv_IsOverlapping1);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_ptX_TL);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_ptY_TL);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_ptX_BL);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_ptY_BL);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI31_RIGHT_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_X1_X_2, out hv_Y1_X_2, out hv_X2_X_2, out hv_Y2_X_2);
      HOperatorSet.IntersectionLines(hv_Y1_X_2, hv_X1_X_2, hv_Y2_X_2, hv_X2_X_2, 
          hv_lineY1_FAI31_TOPRIGHT, hv_lineX1_FAI31_TOPRIGHT, hv_lineY2_FAI31_TOPRIGHT, 
          hv_lineX2_FAI31_TOPRIGHT, out hv_ptY_TR, out hv_ptX_TR, out hv_IsOverlapping1);
      HOperatorSet.IntersectionLines(hv_Y1_X_2, hv_X1_X_2, hv_Y2_X_2, hv_X2_X_2, 
          hv_lineY1_FAI31_BOTTOMRIGHT, hv_lineX1_FAI31_BOTTOMRIGHT, hv_lineY2_FAI31_BOTTOMRIGHT, 
          hv_lineX2_FAI31_BOTTOMRIGHT, out hv_ptY_BR, out hv_ptX_BR, out hv_IsOverlapping1);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_ptX_TR);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_ptY_TR);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_ptX_BR);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_ptY_BR);

      HOperatorSet.IntersectionLines(hv_ptY_TL, hv_ptX_TL, hv_ptY_BR, hv_ptX_BR, 
          hv_ptY_TR, hv_ptX_TR, hv_ptY_BL, hv_ptX_BL, out hv_ptY, out hv_ptX, out hv_IsOverlapping2);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_ptX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_ptY);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI31_CENTERX_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_X1V, out hv_Y1V, out hv_X2V, out hv_Y2V);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI31_CENTERY_LEN, hv_MapToWorld, 
          hv_MapToImage, "false", out hv_X1H, out hv_Y1H, out hv_X2H, out hv_Y2H);
      HOperatorSet.IntersectionLines(hv_Y1H, hv_X1H, hv_Y2H, hv_X2H, hv_Y1V, hv_X1V, 
          hv_Y2V, hv_X2V, out hv_centerY, out hv_centerX, out hv_IsOverlapping8);
      HOperatorSet.DistancePp(hv_centerY, hv_centerX, hv_ptY, hv_ptX, out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      //*****************************FAI32**************************

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI32_X1_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1_X_1, out hv_Y1_X_1, out hv_X2_X_1, out hv_Y2_X_1);
      HOperatorSet.IntersectionLines(hv_Y1_X_1, hv_X1_X_1, hv_Y2_X_1, hv_X1_X_1, 
          hv_lineY1_FAI23_TOP, hv_lineX1_FAI23_TOP, hv_lineY2_FAI23_TOP, hv_lineX2_FAI23_TOP, 
          out hv_intersectY_TL, out hv_intersectX_TL, out hv_IsOverlapping5);
      HOperatorSet.IntersectionLines(hv_Y1_X_1, hv_X1_X_1, hv_Y2_X_1, hv_X1_X_1, 
          hv_lineY1_FAI23_BOTTOM, hv_lineX1_FAI23_BOTTOM, hv_lineY2_FAI23_BOTTOM, 
          hv_lineX2_FAI23_BOTTOM, out hv_intersectY_BL, out hv_intersectX_BL, out hv_IsOverlapping5);



      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI32_X2_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1_X_2, out hv_Y1_X_2, out hv_X2_X_2, out hv_Y2_X_2);
      HOperatorSet.IntersectionLines(hv_Y1_X_2, hv_X1_X_2, hv_Y2_X_2, hv_X1_X_2, 
          hv_lineY1_FAI23_TOP, hv_lineX1_FAI23_TOP, hv_lineY2_FAI23_TOP, hv_lineX2_FAI23_TOP, 
          out hv_intersectY_TR, out hv_intersectX_TR, out hv_IsOverlapping5);
      HOperatorSet.IntersectionLines(hv_Y1_X_2, hv_X1_X_2, hv_Y2_X_2, hv_X1_X_2, 
          hv_lineY1_FAI23_BOTTOM, hv_lineX1_FAI23_BOTTOM, hv_lineY2_FAI23_BOTTOM, 
          hv_lineX2_FAI23_BOTTOM, out hv_intersectY_BR, out hv_intersectX_BR, out hv_IsOverlapping5);
      hv_X1_L6 = (hv_intersectX_TL+hv_intersectX_TR)/2.0;
      hv_Y1_L6 = (hv_intersectY_TL+hv_intersectY_TR)/2.0;
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_X1_L6);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_Y1_L6);

      hv_X2_L6 = (hv_intersectX_BL+hv_intersectX_BR)/2.0;
      hv_Y2_L6 = (hv_intersectY_BL+hv_intersectY_BR)/2.0;
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_X2_L6);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_Y2_L6);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI32_Y1_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_Y_1, out hv_Y1_Y_1, out hv_X2_Y_1, out hv_Y2_Y_1);
      HOperatorSet.IntersectionLines(hv_Y1_Y_1, hv_X1_Y_1, hv_Y2_Y_1, hv_X2_Y_1, 
          hv_lineY1_FAI21_LEFT, hv_lineX1_FAI21_LEFT, hv_lineY2_FAI21_LEFT, hv_lineX2_FAI21_LEFT, 
          out hv_intersectY_LT, out hv_intersectX_LT, out hv_IsOverlapping6);
      HOperatorSet.IntersectionLines(hv_Y1_Y_1, hv_X1_Y_1, hv_Y2_Y_1, hv_X2_Y_1, 
          hv_lineY1_FAI21_Right, hv_lineX1_FAI21_Right, hv_lineY2_FAI21_Right, hv_lineX2_FAI21_Right, 
          out hv_intersectY_RT, out hv_intersectX_RT, out hv_IsOverlapping6);


      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI32_Y2_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1_Y_2, out hv_Y1_Y_2, out hv_X2_Y_2, out hv_Y2_Y_2);
      HOperatorSet.IntersectionLines(hv_Y1_Y_2, hv_X1_Y_2, hv_Y2_Y_2, hv_X2_Y_2, 
          hv_lineY1_FAI21_LEFT, hv_lineX1_FAI21_LEFT, hv_lineY2_FAI21_LEFT, hv_lineX2_FAI21_LEFT, 
          out hv_intersectY_LB, out hv_intersectX_LB, out hv_IsOverlapping6);
      HOperatorSet.IntersectionLines(hv_Y1_Y_2, hv_X1_Y_2, hv_Y2_Y_2, hv_X2_Y_2, 
          hv_lineY1_FAI21_Right, hv_lineX1_FAI21_Right, hv_lineY2_FAI21_Right, hv_lineX2_FAI21_Right, 
          out hv_intersectY_RB, out hv_intersectX_RB, out hv_IsOverlapping6);

      hv_X1_L5 = (hv_intersectX_LT+hv_intersectX_LB)/2.0;
      hv_Y1_L5 = (hv_intersectY_LT+hv_intersectY_LB)/2.0;
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_X1_L5);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_Y1_L5);

      hv_X2_L5 = (hv_intersectX_RT+hv_intersectX_RB)/2.0;
      hv_Y2_L5 = (hv_intersectY_RT+hv_intersectY_RB)/2.0;
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_X2_L5);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_Y2_L5);


      HOperatorSet.IntersectionLines(hv_Y1_L5, hv_X1_L5, hv_Y2_L5, hv_X2_L5, hv_Y1_L6, 
          hv_X1_L6, hv_Y2_L6, hv_X2_L6, out hv_centerY_FAI32, out hv_centerX_FAI32, 
          out hv_IsOverlapping7);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_centerX_FAI32);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_centerY_FAI32);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI23_MID_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1H, out hv_Y1H, out hv_X2H, out hv_Y2H);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI23_P2_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1V, out hv_Y1V, out hv_X2V, out hv_Y2V);
      HOperatorSet.IntersectionLines(hv_Y1V, hv_X1V, hv_Y2V, hv_X2V, hv_Y1H, hv_X1H, 
          hv_Y2H, hv_X2H, out hv_centerY, out hv_centerX, out hv_IsOverlapping7);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_centerX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_centerY);

      HOperatorSet.DistancePp(hv_centerY, hv_centerX, hv_centerY_FAI32, hv_centerX_FAI32, 
          out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);


      //******************FAI33******************

      hv_L6_ROW1 = (hv_rowTL_FAI26+hv_rowTR_FAI26)/2.0;
      hv_L6_COL1 = (hv_colTL_FAI26+hv_colTR_FAI26)/2.0;
      hv_L6_ROW2 = (hv_rowBL_FAI26+hv_rowBR_FAI26)/2.0;
      hv_L6_COL2 = (hv_colBL_FAI26+hv_colBR_FAI26)/2.0;


      hv_L5_ROW1 = (hv_rowTL_FAI26+hv_rowBL_FAI26)/2.0;
      hv_L5_COL1 = (hv_colTL_FAI26+hv_colBL_FAI26)/2.0;
      hv_L5_ROW2 = (hv_rowTR_FAI26+hv_rowBR_FAI26)/2.0;
      hv_L5_COL2 = (hv_colTR_FAI26+hv_colBR_FAI26)/2.0;

      HOperatorSet.IntersectionLines(hv_L6_ROW1, hv_L6_COL1, hv_L6_ROW2, hv_L6_COL2, 
          hv_L5_ROW1, hv_L5_COL1, hv_L5_ROW2, hv_L5_COL2, out hv_centerY_FAI33, out hv_centerX_FAI33, 
          out hv_IsOverlapping4);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_intersectX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_intersectY);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1TopBase, hv_lineY1TopBase, 
          hv_lineX2TopBase, hv_lineY2TopBase, hv_FAI33_V_LEN, hv_MapToWorld, hv_MapToImage, 
          "false", out hv_X1H, out hv_Y1H, out hv_X2H, out hv_Y2H);
      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI33_H_LEN, hv_MapToWorld, hv_MapToImage, 
          "true", out hv_X1V, out hv_Y1V, out hv_X2V, out hv_Y2V);
      HOperatorSet.IntersectionLines(hv_Y1V, hv_X1V, hv_Y2V, hv_X2V, hv_Y1H, hv_X1H, 
          hv_Y2H, hv_X2H, out hv_centerY, out hv_centerX, out hv_IsOverlapping7);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_centerX);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_centerY);

      HOperatorSet.DistancePp(hv_centerY, hv_centerX, hv_centerY_FAI33, hv_centerX_FAI33, 
          out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_XCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      //**********************FAI123******************
      hv_rect1X1 = 1358-hv_modelCol;
      hv_rect1Y1 = 4660-hv_modelRow;
      hv_rect1Radian = (new HTuple(89)).TupleRad();
      hv_rect1Len1 = 40;
      hv_rect1Len2 = 200;

      hv_rect2X1 = 2140-hv_modelCol;
      hv_rect2Y1 = 4685-hv_modelRow;
      hv_rect2Radian = (new HTuple(90)).TupleRad();
      hv_rect2Len1 = 64;
      hv_rect2Len2 = 205;

      hv_rect3X1 = 2972-hv_modelCol;
      hv_rect3Y1 = 4685-hv_modelRow;
      hv_rect3Radian = (new HTuple(90)).TupleRad();
      hv_rect3Len1 = 64;
      hv_rect3Len2 = 205;

      hv_rectX1 = new HTuple();
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect1X1);
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect2X1);
      hv_rectX1 = hv_rectX1.TupleConcat(hv_rect3X1);
      hv_rectY1 = new HTuple();
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect1Y1);
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect2Y1);
      hv_rectY1 = hv_rectY1.TupleConcat(hv_rect3Y1);
      hv_rectRadian = new HTuple();
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect1Radian);
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect2Radian);
      hv_rectRadian = hv_rectRadian.TupleConcat(hv_rect3Radian);
      hv_rectLen1 = new HTuple();
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect1Len1);
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect2Len1);
      hv_rectLen1 = hv_rectLen1.TupleConcat(hv_rect3Len1);
      hv_rectLen2 = new HTuple();
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect1Len2);
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect2Len2);
      hv_rectLen2 = hv_rectLen2.TupleConcat(hv_rect3Len2);
      AffineTransRect2(hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, 
          hv_MovementOfItem, out hv_rectY1, out hv_rectX1, out hv_rectRadian, out hv_rectLen1, 
          out hv_rectLen2);
      ho_Rectangle.Dispose();
      HOperatorSet.GenRectangle2(out ho_Rectangle, hv_rectY1, hv_rectX1, hv_rectRadian, 
          hv_rectLen1, hv_rectLen2);

      ho_findLineRegion.Dispose();ho_lineRegion.Dispose();
      VisionProStyleFindLineOneStep_Pairs(ho_Image, out ho_findLineRegion, out ho_lineRegion, 
          hv_rectY1, hv_rectX1, hv_rectRadian, hv_rectLen1, hv_rectLen2, "positive", 
          10, ((hv_Threshold.TupleConcat(hv_Threshold))).TupleConcat(hv_Threshold), 
          1, 1, "last", "false", 0.2, "first", 1, 15, 5120, 5120, 60, 30, "true", 
          2, out hv_ptsXUsed, out hv_ptsYUsed, out hv_ptsXIgnored, out hv_ptsYIgnored, 
          out hv_lineX1, out hv_lineY1, out hv_lineX2, out hv_lineY2);
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_FindLineRegions, ho_findLineRegion, out ExpTmpOutVar_0
          );
      ho_FindLineRegions.Dispose();
      ho_FindLineRegions = ExpTmpOutVar_0;
      }
      {
      HObject ExpTmpOutVar_0;
      HOperatorSet.ConcatObj(ho_LineRegions, ho_lineRegion, out ExpTmpOutVar_0);
      ho_LineRegions.Dispose();
      ho_LineRegions = ExpTmpOutVar_0;
      }
      hv_PointsXUsed = hv_ptsXUsed.TupleConcat(hv_PointsXUsed);
      hv_PointsYUsed = hv_ptsYUsed.TupleConcat(hv_PointsYUsed);
      hv_PointsXIgnored = hv_ptsXIgnored.TupleConcat(hv_PointsXIgnored);
      hv_PointsYIgnored = hv_ptsYIgnored.TupleConcat(hv_PointsYIgnored);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI123_P1_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_P1_X1, out hv_P1_Y1, out hv_P1_X2, out hv_P1_Y2);
      HOperatorSet.IntersectionLines(hv_P1_Y1, hv_P1_X1, hv_P1_Y2, hv_P1_X2, hv_lineY1TopBase, 
          hv_lineX1TopBase, hv_lineY2TopBase, hv_lineX2TopBase, out hv_rowP1_TOP, 
          out hv_colP1_TOP, out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP1_TOP);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP1_TOP);
      HOperatorSet.IntersectionLines(hv_P1_Y1, hv_P1_X1, hv_P1_Y2, hv_P1_X2, hv_lineY1, 
          hv_lineX1, hv_lineY2, hv_lineX2, out hv_rowP1_BOTTOM, out hv_colP1_BOTTOM, 
          out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP1_BOTTOM);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP1_BOTTOM);
      HOperatorSet.DistancePp(hv_rowP1_TOP, hv_colP1_TOP, hv_rowP1_BOTTOM, hv_colP1_BOTTOM, 
          out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI123_P2_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_P2_X1, out hv_P2_Y1, out hv_P2_X2, out hv_P2_Y2);
      HOperatorSet.IntersectionLines(hv_P2_Y1, hv_P2_X1, hv_P2_Y2, hv_P2_X2, hv_lineY1TopBase, 
          hv_lineX1TopBase, hv_lineY2TopBase, hv_lineX2TopBase, out hv_rowP2_TOP, 
          out hv_colP2_TOP, out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP2_TOP);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP2_TOP);
      HOperatorSet.IntersectionLines(hv_P2_Y1, hv_P2_X1, hv_P2_Y2, hv_P2_X2, hv_lineY1, 
          hv_lineX1, hv_lineY2, hv_lineX2, out hv_rowP2_BOTTOM, out hv_colP2_BOTTOM, 
          out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP2_BOTTOM);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP2_BOTTOM);
      HOperatorSet.DistancePp(hv_rowP2_TOP, hv_colP2_TOP, hv_rowP2_BOTTOM, hv_colP2_BOTTOM, 
          out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      TranslateLineInWorldCoordinateAndConvertBack(hv_lineX1LeftBase, hv_lineY1LeftBase, 
          hv_lineX2LeftBase, hv_lineY2LeftBase, hv_FAI123_P3_LEN, hv_MapToWorld, 
          hv_MapToImage, "true", out hv_P3_X1, out hv_P3_Y1, out hv_P3_X2, out hv_P3_Y2);
      HOperatorSet.IntersectionLines(hv_P3_Y1, hv_P3_X1, hv_P3_Y2, hv_P3_X2, hv_lineY1TopBase, 
          hv_lineX1TopBase, hv_lineY2TopBase, hv_lineX2TopBase, out hv_rowP3_TOP, 
          out hv_colP3_TOP, out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP3_TOP);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP3_TOP);
      HOperatorSet.IntersectionLines(hv_P3_Y1, hv_P3_X1, hv_P3_Y2, hv_P3_X2, hv_lineY1, 
          hv_lineX1, hv_lineY2, hv_lineX2, out hv_rowP3_BOTTOM, out hv_colP3_BOTTOM, 
          out hv_IsOverlapping10);
      hv_IntersectsX = hv_IntersectsX.TupleConcat(hv_colP3_BOTTOM);
      hv_IntersectsY = hv_IntersectsY.TupleConcat(hv_rowP3_BOTTOM);
      HOperatorSet.DistancePp(hv_rowP3_TOP, hv_colP3_TOP, hv_rowP3_BOTTOM, hv_colP3_BOTTOM, 
          out hv_Distance);
      hv_Outputs = hv_Outputs.TupleConcat(hv_Distance*hv_YCoeff);
      hv_OutputsPixel = hv_OutputsPixel.TupleConcat(hv_Distance);

      ho_findLineRegionTop.Dispose();
      ho_lineRegionTop.Dispose();
      ho_findLineRegionLeft.Dispose();
      ho_lineRegionLeft.Dispose();
      ho_findLineRegion.Dispose();
      ho_lineRegion.Dispose();
      ho_ROI_0.Dispose();
      ho_ImageReduced1.Dispose();
      ho_ImageMean1.Dispose();
      ho_mask.Dispose();
      ho_ImageReduced2.Dispose();
      ho_Edges2.Dispose();
      ho_SelectedContours.Dispose();
      ho_UnionContours.Dispose();
      ho_outputContour.Dispose();
      ho_ContCircle.Dispose();
      ho_Circle.Dispose();
      ho_lineRegion1.Dispose();
      ho_ROI_FAI26_TL.Dispose();
      ho_ImageReduced.Dispose();
      ho_Edges1.Dispose();
      ho_Cross1.Dispose();
      ho_ROI_FAI26_BL.Dispose();
      ho_Cross2.Dispose();
      ho_ROI_FAI26_TR.Dispose();
      ho_Cross3.Dispose();
      ho_ROI_FAI26_BR.Dispose();
      ho_Region.Dispose();
      ho_ConnectedRegions.Dispose();
      ho_SelectedRegions.Dispose();
      ho_RegionDilation.Dispose();
      ho_image_intersection.Dispose();
      ho_Edges.Dispose();
      ho_UnionContours2.Dispose();
      ho_SelectedXLD.Dispose();
      ho_ContCircle1.Dispose();
      ho_Rectangle.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_findLineRegionTop.Dispose();
      ho_lineRegionTop.Dispose();
      ho_findLineRegionLeft.Dispose();
      ho_lineRegionLeft.Dispose();
      ho_findLineRegion.Dispose();
      ho_lineRegion.Dispose();
      ho_ROI_0.Dispose();
      ho_ImageReduced1.Dispose();
      ho_ImageMean1.Dispose();
      ho_mask.Dispose();
      ho_ImageReduced2.Dispose();
      ho_Edges2.Dispose();
      ho_SelectedContours.Dispose();
      ho_UnionContours.Dispose();
      ho_outputContour.Dispose();
      ho_ContCircle.Dispose();
      ho_Circle.Dispose();
      ho_lineRegion1.Dispose();
      ho_ROI_FAI26_TL.Dispose();
      ho_ImageReduced.Dispose();
      ho_Edges1.Dispose();
      ho_Cross1.Dispose();
      ho_ROI_FAI26_BL.Dispose();
      ho_Cross2.Dispose();
      ho_ROI_FAI26_TR.Dispose();
      ho_Cross3.Dispose();
      ho_ROI_FAI26_BR.Dispose();
      ho_Region.Dispose();
      ho_ConnectedRegions.Dispose();
      ho_SelectedRegions.Dispose();
      ho_RegionDilation.Dispose();
      ho_image_intersection.Dispose();
      ho_Edges.Dispose();
      ho_UnionContours2.Dispose();
      ho_SelectedXLD.Dispose();
      ho_ContCircle1.Dispose();
      ho_Rectangle.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void AffineTransRect2 (HTuple hv_row, HTuple hv_col, HTuple hv_radian, HTuple hv_len1, 
      HTuple hv_len2, HTuple hv_map, out HTuple hv_rowOut, out HTuple hv_colOut, out HTuple hv_radianOut, 
      out HTuple hv_len1Out, out HTuple hv_len2Out)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_i = null, hv_rowO = new HTuple();
    HTuple hv_colO = new HTuple(), hv_radianO = new HTuple();
    HTuple hv_len1O = new HTuple(), hv_len2O = new HTuple();
    // Initialize local and output iconic variables 
    hv_rowOut = new HTuple();
    hv_colOut = new HTuple();
    hv_radianOut = new HTuple();
    hv_len1Out = new HTuple();
    hv_len2Out = new HTuple();

    for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_row.TupleLength()))-1); hv_i = (int)hv_i + 1)
    {
      _affineTransRect2Single(hv_row.TupleSelect(hv_i), hv_col.TupleSelect(hv_i), 
          hv_radian.TupleSelect(hv_i), hv_len1.TupleSelect(hv_i), hv_len2.TupleSelect(
          hv_i), hv_map, out hv_rowO, out hv_colO, out hv_radianO, out hv_len1O, 
          out hv_len2O);
      hv_rowOut = hv_rowOut.TupleConcat(hv_rowO);
      hv_colOut = hv_colOut.TupleConcat(hv_colO);
      hv_radianOut = hv_radianOut.TupleConcat(hv_radianO);
      hv_len1Out = hv_len1Out.TupleConcat(hv_len1O);
      hv_len2Out = hv_len2Out.TupleConcat(hv_len2O);
    }
  }

  public void PivotLineAroundPoint (out HObject ho_lineRegion, HTuple hv_lineX1, 
      HTuple hv_lineY1, HTuple hv_lineX2, HTuple hv_lineY2, HTuple hv_pivotX, HTuple hv_pivotY, 
      HTuple hv_radian, HTuple hv_newPointDirection, HTuple hv_imageWidth, HTuple hv_imageHeight, 
      out HTuple hv_outLineX1, out HTuple hv_outLineY1, out HTuple hv_outLineX2, out HTuple hv_outLineY2)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_initialRadian = null, hv_newRadian = null;
    HTuple hv_m = null, hv_b = null, hv_dist = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_lineRegion);
    hv_outLineX2 = new HTuple();
    hv_outLineY2 = new HTuple();
    HOperatorSet.LineOrientation(hv_lineY1, hv_lineX1, hv_lineY2, hv_lineX2, out hv_initialRadian);
    hv_newRadian = hv_initialRadian+hv_radian;

    hv_m = hv_newRadian.TupleTan();
    hv_b = hv_pivotY-(hv_pivotX*hv_m);

    hv_outLineX1 = hv_pivotX.Clone();
    hv_outLineY1 = hv_pivotY.Clone();

    hv_dist = 10;
    if ((int)(new HTuple(hv_newPointDirection.TupleEqual("up"))) != 0)
    {
      hv_outLineY2 = hv_outLineY1+hv_dist;
      hv_outLineX2 = (hv_outLineY2-hv_b)/hv_m;
    }
    else if ((int)(new HTuple(hv_newPointDirection.TupleEqual("down"))) != 0)
    {
      hv_outLineY2 = hv_outLineY1-hv_dist;
      hv_outLineX2 = (hv_outLineY2-hv_b)/hv_m;
    }
    else if ((int)(new HTuple(hv_newPointDirection.TupleEqual("left"))) != 0)
    {
      hv_outLineX2 = hv_outLineX1-hv_dist;
      hv_outLineY2 = (hv_outLineX2*hv_m)+hv_b;
    }
    else if ((int)(new HTuple(hv_newPointDirection.TupleEqual("right"))) != 0)
    {
      hv_outLineX2 = hv_outLineX1+hv_dist;
      hv_outLineY2 = (hv_outLineX2*hv_m)+hv_b;
    }
    else
    {
      throw new HalconException("Invalid Direction");
    }

    ho_lineRegion.Dispose();
    GenLineRegion(out ho_lineRegion, hv_outLineX1, hv_outLineY1, hv_outLineX2, hv_outLineY2, 
        hv_imageWidth, hv_imageHeight);


    return;
  }

  public void LongestXLD (HObject ho_inputContour, out HObject ho_outputContour)
  {



    // Local iconic variables 

    HObject ho_selectedContour=null, ho_ObjectSelected=null;

    // Local control variables 

    HTuple hv_Number = null, hv_selectedIndex = new HTuple();
    HTuple hv_selectedLen = new HTuple(), hv_Index = new HTuple();
    HTuple hv_Length = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_outputContour);
    HOperatorSet.GenEmptyObj(out ho_selectedContour);
    HOperatorSet.GenEmptyObj(out ho_ObjectSelected);
    try
    {
      ho_outputContour.Dispose();
      HOperatorSet.UnionAdjacentContoursXld(ho_inputContour, out ho_outputContour, 
          10, 1, "attr_keep");
      HOperatorSet.CountObj(ho_outputContour, out hv_Number);


      if ((int)(new HTuple(hv_Number.TupleGreater(1))) != 0)
      {
        ho_selectedContour.Dispose();
        HOperatorSet.GenEmptyObj(out ho_selectedContour);
        hv_selectedIndex = 0;
        hv_selectedLen = 0;
        HTuple end_val8 = hv_Number;
        HTuple step_val8 = 1;
        for (hv_Index=1; hv_Index.Continue(end_val8, step_val8); hv_Index = hv_Index.TupleAdd(step_val8))
        {
          ho_ObjectSelected.Dispose();
          HOperatorSet.SelectObj(ho_outputContour, out ho_ObjectSelected, hv_Index);
          HOperatorSet.LengthXld(ho_ObjectSelected, out hv_Length);
          if ((int)(new HTuple(hv_Length.TupleGreater(hv_selectedLen))) != 0)
          {
            hv_selectedLen = hv_Length.Clone();
            ho_selectedContour.Dispose();
            ho_selectedContour = ho_ObjectSelected.CopyObj(1,-1);
          }
        }
        ho_outputContour.Dispose();
        ho_outputContour = ho_selectedContour.CopyObj(1,-1);
      }
      ho_selectedContour.Dispose();
      ho_ObjectSelected.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_selectedContour.Dispose();
      ho_ObjectSelected.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void _genSubRect2 (out HObject ho_rect2Out, HTuple hv_row, HTuple hv_col, 
      HTuple hv_radian, HTuple hv_len1, HTuple hv_len2, HTuple hv_lineX1, HTuple hv_lineY1, 
      HTuple hv_lineX2, HTuple hv_lineY2, HTuple hv_newWidth)
  {



    // Local iconic variables 

    HObject ho_Rectangle;

    // Local control variables 

    HTuple hv_rowEndPoint = null, hv_colEndPoint = null;
    HTuple hv_IsOverlapping = null, hv_rowOut = null, hv_colOut = null;
    HTuple hv_radianNormal = null, hv_radianOut = null, hv_len1Out = null;
    HTuple hv_len2Out = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_rect2Out);
    HOperatorSet.GenEmptyObj(out ho_Rectangle);
    try
    {
      ho_Rectangle.Dispose();
      HOperatorSet.GenRectangle2ContourXld(out ho_Rectangle, hv_row, hv_col, hv_radian, 
          hv_len1, hv_len2);
      HOperatorSet.IntersectionLineContourXld(ho_Rectangle, hv_lineY1, hv_lineX1, 
          hv_lineY2, hv_lineX2, out hv_rowEndPoint, out hv_colEndPoint, out hv_IsOverlapping);

      if ((int)((new HTuple((new HTuple(hv_rowEndPoint.TupleLength())).TupleNotEqual(
          2))).TupleOr(new HTuple((new HTuple(hv_colEndPoint.TupleLength())).TupleNotEqual(
          2)))) != 0)
      {
        throw new HalconException("Only two end points should be found!");
      }

      hv_rowOut = (hv_rowEndPoint.TupleSum())/2.0;
      hv_colOut = (hv_colEndPoint.TupleSum())/2.0;

      HOperatorSet.LineOrientation(hv_lineY1, hv_lineX1, hv_lineY2, hv_lineX2, out hv_radianNormal);
      hv_radianOut = hv_radianNormal+((new HTuple(90)).TupleRad());

      hv_len1Out = hv_newWidth.Clone();
      hv_len2Out = hv_len2.Clone();

      ho_rect2Out.Dispose();
      HOperatorSet.GenRectangle2(out ho_rect2Out, hv_rowOut, hv_colOut, hv_radianOut, 
          hv_len1Out, hv_len2Out);

      ho_Rectangle.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Rectangle.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void ProjectionFilter (HTuple hv_Xs, HTuple hv_Ys, HTuple hv_lineX1, HTuple hv_lineY1, 
      HTuple hv_lineX2, HTuple hv_lineY2, HTuple hv_ignorePortion, out HTuple hv_XsOut, 
      out HTuple hv_YsOut)
  {



    // Local iconic variables 

    HObject ho_Cross, ho_Cross2;

    // Local control variables 

    HTuple hv_numInputs = null, hv_lineProjectionXs = null;
    HTuple hv_lineProjectionYs = null, hv_i = null, hv_X1 = new HTuple();
    HTuple hv_Y1 = new HTuple(), hv_X2 = new HTuple(), hv_Y2 = new HTuple();
    HTuple hv_intersectionY = new HTuple(), hv_intersectionX = new HTuple();
    HTuple hv_IsOverlapping = new HTuple(), hv_distances = null;
    HTuple hv_Indices = null, hv_numChoose = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_Cross);
    HOperatorSet.GenEmptyObj(out ho_Cross2);
    try
    {
      hv_numInputs = new HTuple(hv_Xs.TupleLength());

      hv_lineProjectionXs = new HTuple();
      hv_lineProjectionYs = new HTuple();

      HTuple end_val5 = hv_numInputs-1;
      HTuple step_val5 = 1;
      for (hv_i=0; hv_i.Continue(end_val5, step_val5); hv_i = hv_i.TupleAdd(step_val5))
      {
        hv_X1 = hv_Xs.TupleSelect(hv_i);
        hv_Y1 = hv_Ys.TupleSelect(hv_i);
        get_perpendicular_line_that_passes(hv_lineX1, hv_lineY1, hv_lineX2, hv_lineY2, 
            hv_X1, hv_Y1, out hv_X2, out hv_Y2);
        HOperatorSet.IntersectionLines(hv_lineY1, hv_lineX1, hv_lineY2, hv_lineX2, 
            hv_Y1, hv_X1, hv_Y2, hv_X2, out hv_intersectionY, out hv_intersectionX, 
            out hv_IsOverlapping);
        hv_lineProjectionXs = hv_lineProjectionXs.TupleConcat(hv_intersectionX);
        hv_lineProjectionYs = hv_lineProjectionYs.TupleConcat(hv_intersectionY);
      }

      GetDistancesToDistributionCenter(hv_lineProjectionXs, hv_lineProjectionYs, 
          out hv_distances);

      HOperatorSet.TupleSortIndex(hv_distances, out hv_Indices);

      hv_numChoose = (new HTuple(hv_Xs.TupleLength()))*(1-hv_ignorePortion);




      hv_XsOut = new HTuple();
      hv_YsOut = new HTuple();

      //take data points that are within 2 deviations away, that is 95% range
      for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_Xs.TupleLength()))-1); hv_i = (int)hv_i + 1)
      {
        if ((int)(new HTuple(((hv_Indices.TupleSelect(hv_i))).TupleLess(hv_numChoose))) != 0)
        {
          hv_XsOut = hv_XsOut.TupleConcat(hv_Xs.TupleSelect(hv_Indices.TupleSelect(
              hv_i)));
          hv_YsOut = hv_YsOut.TupleConcat(hv_Ys.TupleSelect(hv_Indices.TupleSelect(
              hv_i)));
        }
      }


      if (HDevWindowStack.IsOpen())
      {
        HOperatorSet.SetColor(HDevWindowStack.GetActive(), "red");
      }
      ho_Cross.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross, hv_YsOut, hv_XsOut, 1, 0);
      if (HDevWindowStack.IsOpen())
      {
        HOperatorSet.SetColor(HDevWindowStack.GetActive(), "green");
      }
      ho_Cross2.Dispose();
      HOperatorSet.GenCrossContourXld(out ho_Cross2, hv_Ys, hv_Xs, 1, 0.785398);

      ho_Cross.Dispose();
      ho_Cross2.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Cross.Dispose();
      ho_Cross2.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void GetLineWeightAndBias (HTuple hv_X1, HTuple hv_Y1, HTuple hv_X2, HTuple hv_Y2, 
      out HTuple hv_m, out HTuple hv_b)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_yDiff = null, hv_xDiff = null;
    // Initialize local and output iconic variables 
    hv_yDiff = hv_Y2-hv_Y1;
    hv_xDiff = hv_X2-hv_X1;

    hv_m = hv_yDiff/hv_xDiff;
    hv_b = hv_Y1-(hv_m*hv_X1);


    return;
  }

  public void GetDistancesToDistributionCenter (HTuple hv_Xs, HTuple hv_Ys, out HTuple hv_distances)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xMean = null, hv_yMean = null, hv_i = null;
    HTuple hv_Distance = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.TupleMean(hv_Xs, out hv_xMean);
    HOperatorSet.TupleMean(hv_Ys, out hv_yMean);

    hv_distances = new HTuple();

    for (hv_i=0; (int)hv_i<=(int)((new HTuple(hv_Xs.TupleLength()))-1); hv_i = (int)hv_i + 1)
    {
      HOperatorSet.DistancePp(hv_yMean, hv_xMean, hv_Ys.TupleSelect(hv_i), hv_Xs.TupleSelect(
          hv_i), out hv_Distance);
      hv_distances = hv_distances.TupleConcat(hv_Distance);
    }



    return;
  }

  public void EstimateGaussian1D (HTuple hv_Xs, out HTuple hv_Mean, out HTuple hv_Deviation)
  {


    // Initialize local and output iconic variables 
    HOperatorSet.TupleMean(hv_Xs, out hv_Mean);
    HOperatorSet.TupleDeviation(hv_Xs, out hv_Deviation);


    return;
  }

  public void GetContoursPoints (HObject ho_Contours, out HTuple hv_Xs, out HTuple hv_Ys)
  {



    // Local iconic variables 

    HObject ho_Contour=null;

    // Local control variables 

    HTuple hv_Number = null, hv_i = null, hv_Row = new HTuple();
    HTuple hv_Col = new HTuple();
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_Contour);
    try
    {
      HOperatorSet.CountObj(ho_Contours, out hv_Number);

      hv_Xs = new HTuple();
      hv_Ys = new HTuple();

      HTuple end_val5 = hv_Number;
      HTuple step_val5 = 1;
      for (hv_i=1; hv_i.Continue(end_val5, step_val5); hv_i = hv_i.TupleAdd(step_val5))
      {
        ho_Contour.Dispose();
        HOperatorSet.SelectObj(ho_Contours, out ho_Contour, hv_i);
        HOperatorSet.GetContourXld(ho_Contour, out hv_Row, out hv_Col);
        hv_Xs = hv_Xs.TupleConcat(hv_Col);
        hv_Ys = hv_Ys.TupleConcat(hv_Row);
      }


      ho_Contour.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Contour.Dispose();

      throw HDevExpDefaultException;
    }
  }

  public void GenCalibrationMaps (HObject ho_Image, HTuple hv_CamParams, HTuple hv_CamPose, 
      out HTuple hv_MapToWorld, out HTuple hv_MapToImage)
  {




    // Local iconic variables 

    // Local control variables 

    HTuple hv_Width = null, hv_Height = null, hv_halfWidth = null;
    HTuple hv_halfHeight = null, hv_centerX = null, hv_centerY = null;
    HTuple hv_imageXs = null, hv_imageYs = null, hv_i = null;
    HTuple hv_j = new HTuple(), hv_imageX = new HTuple(), hv_imageY = new HTuple();
    HTuple hv_worldXs = null, hv_worldYs = null;
    // Initialize local and output iconic variables 
    HOperatorSet.GetImageSize(ho_Image, out hv_Width, out hv_Height);
    //
    hv_halfWidth = hv_Width/3.0;
    hv_halfHeight = hv_Height/3.0;
    //
    hv_centerX = hv_Width/2.0;
    hv_centerY = hv_Height/2.0;
    //
    hv_imageXs = new HTuple();
    hv_imageYs = new HTuple();
    //
    //
    for (hv_i=-1; (int)hv_i<=1; hv_i = (int)hv_i + 1)
    {
      for (hv_j=-1; (int)hv_j<=1; hv_j = (int)hv_j + 1)
      {
        hv_imageX = hv_centerX+(hv_j*hv_halfWidth);
        hv_imageXs = hv_imageXs.TupleConcat(hv_imageX);
        hv_imageY = hv_centerY+(hv_i*hv_halfHeight);
        hv_imageYs = hv_imageYs.TupleConcat(hv_imageY);
      }
    }
    //
    HOperatorSet.ImagePointsToWorldPlane(hv_CamParams, hv_CamPose, hv_imageYs, hv_imageXs, 
        0.001, out hv_worldXs, out hv_worldYs);
    //
    HOperatorSet.VectorToHomMat2d(hv_worldXs, hv_worldYs, hv_imageXs, hv_imageYs, 
        out hv_MapToImage);
    HOperatorSet.VectorToHomMat2d(hv_imageXs, hv_imageYs, hv_worldXs, hv_worldYs, 
        out hv_MapToWorld);
    //

    return;
  }

  public void GetParallelLine (HTuple hv_X1, HTuple hv_Y1, HTuple hv_X2, HTuple hv_Y2, 
      HTuple hv_Offset, out HTuple hv_X1Out, out HTuple hv_Y1Out, out HTuple hv_X2Out, 
      out HTuple hv_Y2Out)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_VecX = null, hv_VecY = null;
    // Initialize local and output iconic variables 
    GetNormalVector(hv_X1, hv_Y1, hv_X2, hv_Y2, out hv_VecX, out hv_VecY);
    //
    hv_X1Out = (hv_Offset*hv_VecX)+hv_X1;
    hv_Y1Out = (hv_Offset*hv_VecY)+hv_Y1;
    hv_X2Out = (hv_Offset*hv_VecX)+hv_X2;
    hv_Y2Out = (hv_Offset*hv_VecY)+hv_Y2;

    return;
  }

  public void GetNormalVector (HTuple hv_X1, HTuple hv_Y1, HTuple hv_X2, HTuple hv_Y2, 
      out HTuple hv_VecX, out HTuple hv_VecY)
  {



    // Local iconic variables 

    // Local control variables 

    HTuple hv_xDiff = null, hv_yDiff = null, hv_dist = null;
    HTuple hv_xDiffNorm = null, hv_yDiffNorm = null, hv_radian = null;
    HTuple hv_vecXNew = null, hv_vecYNew = null, hv_radianNew = null;
    // Initialize local and output iconic variables 
    hv_xDiff = hv_X2-hv_X1;
    hv_yDiff = hv_Y2-hv_Y1;
    //
    hv_dist = (((hv_xDiff*hv_xDiff)+(hv_yDiff*hv_yDiff))).TupleSqrt();
    hv_xDiffNorm = hv_xDiff/hv_dist;
    hv_yDiffNorm = hv_yDiff/hv_dist;
    //
    hv_radian = hv_yDiffNorm.TupleAtan2(hv_xDiffNorm);
    //
    hv_VecX = hv_yDiffNorm.Clone();
    hv_VecY = -hv_xDiffNorm;
    //
    hv_vecXNew = hv_xDiffNorm+hv_VecX;
    hv_vecYNew = hv_yDiffNorm+hv_VecY;
    //
    hv_radianNew = hv_vecYNew.TupleAtan2(hv_vecXNew);
    //
    //原单位向量 + 其法线单位向量都会得到一个角度 radianNew = radian + rad(45)的向量
    //若原向量角度大于135, 则radianNew < 0
    if ((int)(new HTuple(hv_radian.TupleGreater(2.35619))) != 0)
    {
      if ((int)(new HTuple(hv_radianNew.TupleGreater(0))) != 0)
      {
        hv_VecX = -hv_VecX;
        hv_VecY = -hv_VecY;
      }
      //
    }
    else
    {
      if ((int)(new HTuple(hv_radianNew.TupleLess(hv_radian))) != 0)
      {
        hv_VecX = -hv_VecX;
        hv_VecY = -hv_VecY;
      }
    }
    //
    //

    return;
  }

  public void SortLineLeftRight (HTuple hv_X1, HTuple hv_Y1, HTuple hv_X2, HTuple hv_Y2, 
      out HTuple hv_XLeft, out HTuple hv_YLeft, out HTuple hv_XRight, out HTuple hv_YRight)
  {



    // Local iconic variables 
    // Initialize local and output iconic variables 
    hv_XLeft = hv_X1.Clone();
    hv_XRight = hv_X2.Clone();
    hv_YLeft = hv_Y1.Clone();
    hv_YRight = hv_Y2.Clone();
    //
    if ((int)(new HTuple(hv_X1.TupleGreater(hv_X2))) != 0)
    {
      hv_XLeft = hv_X2.Clone();
      hv_XRight = hv_X1.Clone();
      hv_YLeft = hv_Y2.Clone();
      hv_YRight = hv_Y1.Clone();
    }
    //

    return;
  }

  public void SortLineUpDown (HTuple hv_X1, HTuple hv_Y1, HTuple hv_X2, HTuple hv_Y2, 
      out HTuple hv_XUp, out HTuple hv_YUp, out HTuple hv_XDown, out HTuple hv_YDown)
  {



    // Local iconic variables 
    // Initialize local and output iconic variables 
    hv_XUp = hv_X1.Clone();
    hv_XDown = hv_X2.Clone();
    hv_YUp = hv_Y1.Clone();
    hv_YDown = hv_Y2.Clone();
    //
    if ((int)(new HTuple(hv_Y1.TupleGreater(hv_Y2))) != 0)
    {
      hv_XUp = hv_X2.Clone();
      hv_XDown = hv_X1.Clone();
      hv_YUp = hv_Y2.Clone();
      hv_YDown = hv_Y1.Clone();
    }
    //

    return;
  }

  public void UndistortImage (HObject ho_ImageRaw, out HObject ho_ImageUndistorted, 
      HTuple hv_CameraParams, out HTuple hv_OutCameraParams)
  {




    // Local iconic variables 

    HObject ho_Map;
    // Initialize local and output iconic variables 
    HOperatorSet.GenEmptyObj(out ho_ImageUndistorted);
    HOperatorSet.GenEmptyObj(out ho_Map);
    try
    {
      HOperatorSet.ChangeRadialDistortionCamPar("adaptive", hv_CameraParams, 0, out hv_OutCameraParams);
      ho_Map.Dispose();
      HOperatorSet.GenRadialDistortionMap(out ho_Map, hv_CameraParams, hv_OutCameraParams, 
          "bilinear");

      ho_ImageUndistorted.Dispose();
      HOperatorSet.MapImage(ho_ImageRaw, ho_Map, out ho_ImageUndistorted);

      ho_Map.Dispose();

      return;
    }
    catch (HalconException HDevExpDefaultException)
    {
      ho_Map.Dispose();

      throw HDevExpDefaultException;
    }
  }




}


